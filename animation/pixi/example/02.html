<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.22" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>二、 进阶 | 赵建辉的前端知识库</title><meta name="description" content="前端的基础的html,css,js,进阶的ts,es,sass,less,也有vue,react等框架,也包含node.js后端处理">
    <link rel="preload" href="/note-front/assets/style-iqQQ7olI.css" as="style"><link rel="stylesheet" href="/note-front/assets/style-iqQQ7olI.css">
    <link rel="modulepreload" href="/note-front/assets/app-Cok9BT0p.js"><link rel="modulepreload" href="/note-front/assets/02.html-BuH6OhBS.js">
    <link rel="prefetch" href="/note-front/assets/index.html-CBDFUdKH.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-BEDUDlA8.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-BsVjrGVF.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-sD0ZocLq.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-Bnnn3kIR.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-lkD5_tqh.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-FHx8-K78.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-CN-R71Oa.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-DdQN-D0H.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-DEON7lyH.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-Cnwgzeiv.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-BToXmBD8.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-BA0nsNfu.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-DM8VaS0J.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-rwRvIShe.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-DHempCWI.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-D-p0tV1j.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-D0PaUPsf.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-WAj7vjM_.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-C9M2foOS.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-dApqMpz5.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-BudKeAUs.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-Dv8Ixd5Q.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-s_sUGEsW.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-BMO1pyrv.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-C8hP8wPR.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-C5MWZXKi.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-DCziuatT.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-DZIr_UWo.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-6kblyDxU.js" as="script"><link rel="prefetch" href="/note-front/assets/00.html-CXTL9Lnk.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DwAvkFzl.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-Bu7H_1Sy.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DeZs4CRk.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BkwLsPKN.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BRdE_K-_.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DDKQsYeZ.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-CjYxV8gF.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-BHIDnxS2.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-BNiQqMbj.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-xBXIEfBt.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-DTtxlGDC.js" as="script"><link rel="prefetch" href="/note-front/assets/00.html-CBN5QRkT.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BP7H7mRA.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-DZzvpKh1.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Drkvuukt.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-C1H5c4Cx.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-DbA6CxCJ.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-C0FNBrIb.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-CUUeRUgQ.js" as="script"><link rel="prefetch" href="/note-front/assets/index.html-BlfKj_ek.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-IAaO-hjT.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-B7Mk9Yy8.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BjQMf0Yf.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DhXyomuH.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BoEhrFHb.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DUCP91d5.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-DpDELNxF.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-BnC2KV_4.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-N14Dt8RD.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Etibm5pE.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-L6fU_hEv.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Cc4gRnoL.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-1-m82TmN.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Dob_jyQS.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CHWlvgMP.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BdKSEzX9.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Cr2xAuBU.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BGv7S6GD.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-CaR42qhb.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-D8MO2Vab.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BKC-kEgU.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-ak_URleo.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DpUpGQXU.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-DfvXiv6x.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CELliKL5.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-D-1Kpj5a.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Dhvw6DKE.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DTUmbttt.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-8lfaIAkJ.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-DdVf1XYM.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-Dw6QLJ2t.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-X2r4461x.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-DzzWbCpP.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-NS1NXKoW.js" as="script"><link rel="prefetch" href="/note-front/assets/13.html-BdlpMAfK.js" as="script"><link rel="prefetch" href="/note-front/assets/14.html-CSAQvvOa.js" as="script"><link rel="prefetch" href="/note-front/assets/15.html-CEpRSn5w.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DcRN1WAV.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-QFhL2cdv.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BSFyvJVJ.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BR8RF8bv.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BoPzZFM4.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-D7Skw6nv.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BdeOnF_7.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-D53Jrsnv.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-4HGhXpBl.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Z3-dKrpf.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-5VQRR3W2.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-BB7vQCPO.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-BSBHSsrz.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-D5250p3i.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-C4zc5Uyv.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-Cgo6aAsZ.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-CjkuDr2t.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-aJi1Ti2r.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CqylPntc.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-zrSVwi3N.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BdVznpbZ.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-DB8NwUoA.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DZ4Qfucf.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-E4d3nFdu.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-Ckt-vTzg.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-DXPr-MOn.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-CDDBdrVL.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-Co11GS4E.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-DZcsu5Uq.js" as="script"><link rel="prefetch" href="/note-front/assets/13.html-Bdc1fxrS.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Cie7TaDv.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-5yBCPaGM.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CHsp3mDi.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BMr9cysq.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-B_zZSFhp.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-Bs6YDl8L.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-Dd_Jp2yO.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-B-CEmJCo.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-CfCvlMPS.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DGaG3qFF.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-I-7DeOs1.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BjfTeu6a.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CuQN-Ejq.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BpMfc2Xo.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-B293LFli.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-DLJTSJgQ.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-B3EgzxYR.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-GzaTYYex.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-DdJELVUT.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-DUublUcX.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-DOw1qr4U.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Ilz6lDwJ.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BAULvNQb.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-J93GyvDb.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CTufObE_.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BEQhkd3x.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DqpeK_7j.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BNxlYm4R.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-sy1AGjlk.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-8kH5TIGZ.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Ca3gWr6N.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-PQzrVkw5.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BfzdCv-U.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-Cv2RKmF1.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-5qcn1Ts0.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DA-Zg2xr.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-DLBlQJ_x.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-Dqq_pD7y.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CqTy03QX.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CNKcbiab.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-1fPZdxCA.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CE4esTlV.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-txB9p7Rh.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-0ovIAv8L.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-OdwkVsk-.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DNnXmRpx.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Btquerfu.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CUP1K1TV.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-De0kxZf6.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-FDlXBneu.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BxxAsPut.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-JPPpL-uF.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-B3AAo10y.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BYVlBjT3.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DGvMbyJA.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-DcdDaaz8.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-C9QDpmYk.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-BpEQyEFi.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-CZ-pOag7.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-DWUoeoKM.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-C3j3Jhw8.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-C5qhJ9jB.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-C0wolP1M.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Bh1M0I18.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BR8_2Jcw.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Ci4i-pLP.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-D_p8CiWM.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-DZS_TuYv.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-BU00Bzac.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-DOTV-m74.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-6hn3v7VB.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-DYt2owap.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-QxkVF07u.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-U3BaavzP.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CxFQ5iD3.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-B3f64qHY.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-yRIX45d0.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-Co0O8CSj.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-D8CYFcOj.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DrUvnr6l.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-OdP7QFK4.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DORxf_y9.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CY5iOrYa.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-utWFHNzp.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DOYh5Vet.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-xfJVwM0E.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-s59ytZqv.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DHZkGapz.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BfwktrGt.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-D4x6JppM.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BWBB57pW.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-DIsGWEap.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Q4XAVuHU.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Cr4AgR6v.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BTAF_K46.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DWwB8u9j.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-oWqlb-40.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-VBwulBGa.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CbyPGUhy.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Ba6oe7Pu.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BTALIO9f.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-D15uoWEE.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-zVmmGFrB.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CV0stUgJ.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Dy-7v7sP.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-Dt04NJkZ.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-C4nhFFAM.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CAHX2Zit.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-D9A9_w2y.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DFNp2MkI.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-Ct8hYZpg.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-RaLlZ_Jb.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-DJg-q3LB.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Cd5Uvaix.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-IU9aRY6U.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-2xDH8bzb.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BdAN-tpL.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Bkls8yiN.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-D8EmMKGL.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-CGGAhzGc.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CRsyLuZA.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DrmKpQXI.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-Dowheb_1.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DIAJV-ia.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-As2avK5Z.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BKo28tM1.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-D41iwy9t.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DhiBxF-o.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BSNwhCP_.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-LROmW-Zr.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-CQm93va6.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DCUeZWWG.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-RPtzndLs.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BjK4w9tV.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-8w-retj5.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-DZYX9eF0.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-BmBT1VuB.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-7FPCZD4N.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CmIe3X9J.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-Odx3EpnN.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CVfnzVhi.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-0iNvw38W.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BCQJ93lW.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-g9NYhmBw.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-legYG0SU.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CrfJorV4.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-C4HumNXg.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-D_rAMDUA.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-3Zsgpm5l.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-41QJyyDg.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DmsdNkBX.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-Bt38FQ4F.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-WhrmE35w.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-BK-c_K46.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-Bmz2VpNR.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-z042KLTx.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-D2a6Uiri.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DKxRsu7m.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-B7n5_DRf.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Cb9_XuF9.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BQbLiRVo.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-0nS2UOUp.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-XH4v8L6l.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CkFCpGyd.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DfhcFtmP.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CYDmGIlP.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-t3XHajEE.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-_ECIvEsL.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BeHw8SoF.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CzSM7oeF.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CslJx0SM.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DYAMAl2M.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-mHunCXBC.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-D8o4EdCh.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-vjYCenQU.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CY235a30.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-D7I8lIC7.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-w9iMZ1nT.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-z6ncwQIF.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DuAVDPP5.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DpMiFA9B.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-0cNPBqKE.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-CcmQYYhW.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-D4wOBJaX.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-BlKwDixL.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-BKZ02jBY.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-JsiQuwIx.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-C8s9_pO_.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-DeVxzx7A.js" as="script"><link rel="prefetch" href="/note-front/assets/13.html-CcYpsVly.js" as="script"><link rel="prefetch" href="/note-front/assets/14.html-CkezQEX4.js" as="script"><link rel="prefetch" href="/note-front/assets/15.html-BuhjTS67.js" as="script"><link rel="prefetch" href="/note-front/assets/16.html-hjjGG1KP.js" as="script"><link rel="prefetch" href="/note-front/assets/17.html-DvLKvM5l.js" as="script"><link rel="prefetch" href="/note-front/assets/18.html-DD_hGPpB.js" as="script"><link rel="prefetch" href="/note-front/assets/19.html-UkdzPnyQ.js" as="script"><link rel="prefetch" href="/note-front/assets/20.html-3qePXX7H.js" as="script"><link rel="prefetch" href="/note-front/assets/21.html-DjoLzPc1.js" as="script"><link rel="prefetch" href="/note-front/assets/22.html-HBc3itU-.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-LIqKv-Kp.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BlV6KWUT.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-C30w6eW7.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-C-LCqq4C.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-RCs3Bqmt.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CqGw_Vra.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CDaAaTVn.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DpRlY1MU.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-9-ZM_mXL.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BE37-d66.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-io_JmM0t.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BVyLX-y2.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BoLGhmLK.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-CkiXuTGB.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CUSyzHW1.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-IWJE9zqI.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-mTJeaYLS.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-COeAKS2t.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-CvfxHdyw.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-X5pZkun5.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-BHfSr_tN.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-C3BT29sj.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-CqPnKedo.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-D4aZvmlF.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CNYs5Vvv.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BIkkPuj0.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BqUfx_Bq.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-Cti3TPao.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DDU6cN06.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-0-mKlrfs.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CRUgMiRH.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DFp1ZBtU.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-bx4925mZ.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-IFq_LkpB.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-B60rkotq.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-0HGS71rv.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-lwL6qXCo.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-C4n2QXJx.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-DUR2eKUS.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-B9MvZRX-.js" as="script"><link rel="prefetch" href="/note-front/assets/13.html-DQE7J54P.js" as="script"><link rel="prefetch" href="/note-front/assets/14.html-DdK1BBzc.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DKzMXjQX.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-Ym3SPJwR.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Cx7aRx65.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-Dk4_0vAV.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-CBC3m1AJ.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-DI_ZrgLK.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-CfNT5Ol7.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-odBXzKtl.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-DuQPyhOP.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-CD9biDPc.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-Z7tFShpX.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-DfY0Lc4a.js" as="script"><link rel="prefetch" href="/note-front/assets/13.html-CTFSXTrQ.js" as="script"><link rel="prefetch" href="/note-front/assets/14.html-BDFNE2g1.js" as="script"><link rel="prefetch" href="/note-front/assets/15.html-C70cIqvU.js" as="script"><link rel="prefetch" href="/note-front/assets/16.html-BbO0N5N_.js" as="script"><link rel="prefetch" href="/note-front/assets/17.html-BOJjWncM.js" as="script"><link rel="prefetch" href="/note-front/assets/00.html-CLy7fK7y.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Kd7hJ5GQ.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-DExZHKS0.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-C0JbDdz8.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BibYPT3X.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-DoXs4CkI.js" as="script"><link rel="prefetch" href="/note-front/assets/00.html-C0PaSG8T.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Bhxpndcy.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-O6yFAAAa.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DJz7xkbt.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-ChVDFWGa.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-DEcJ-jqh.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-sp2lXMeI.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-lZfJGuII.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-D4iPOzZh.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-CHVJKdwo.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-puj3dVzO.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-FC46sL49.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CTzUQYrh.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-oaI2VDIZ.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CeGfWU30.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-AjiY99xL.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BdeM_az6.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-D2jWBV6v.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CzQ6_h8D.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Dj7ymYse.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-FBC0KEOe.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-Bdmbj_Gj.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-DtVfrLjv.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-BZqwfSca.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-BTn_Uri3.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-BcfHD4hZ.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-Rd6t5rt2.js" as="script"><link rel="prefetch" href="/note-front/assets/13.html-CuPyYHAm.js" as="script"><link rel="prefetch" href="/note-front/assets/14.html-CU1EyQH9.js" as="script"><link rel="prefetch" href="/note-front/assets/15.html-CBO6Ws5R.js" as="script"><link rel="prefetch" href="/note-front/assets/16.html-BR7mB121.js" as="script"><link rel="prefetch" href="/note-front/assets/17.html-CKafl59Q.js" as="script"><link rel="prefetch" href="/note-front/assets/18.html-Bm4zAvG2.js" as="script"><link rel="prefetch" href="/note-front/assets/19.html-JXBedbGn.js" as="script"><link rel="prefetch" href="/note-front/assets/20.html-COnGxqPk.js" as="script"><link rel="prefetch" href="/note-front/assets/21.html-DrqCAMzE.js" as="script"><link rel="prefetch" href="/note-front/assets/22.html-Cfp16sxj.js" as="script"><link rel="prefetch" href="/note-front/assets/23.html-CiWna-Ds.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BFD5npTX.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BQsrDMX1.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CtZYfjs4.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CqaofeWs.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BHUnQcp1.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CNriX6FG.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-DQGlxmdV.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-LX84J2N9.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BYo1BNkl.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-QMkL2tMn.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-DBE2aluM.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CJK2v39n.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DWIvjP2r.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-CkC05nC6.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-qHktcqzT.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-D7KAcLJ_.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-C1JNOgpz.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BCAdxVqO.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CbFXjoA3.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DsdfcST_.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DibF_TPc.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DWGxDlHn.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-Dqzbxp31.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Jh-M_ole.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CdT_wZI4.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BfCfnZQm.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CQlXVJxI.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CS4zigTv.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CVlmmqYw.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-7VUfghaf.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DK2zg4Wx.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BpVo9hCI.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-C0mupD4p.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-BmMNBw6v.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-tR7SbS8z.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Q6vE7laL.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-D6-cVKoy.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-CIeK0qpb.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BI69lNGe.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-C0KL6DVG.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-B5Y94mFP.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-AgCvlo-c.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-Dj3H_FMw.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-Cl8MbrdG.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-Wig_8fWB.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-MAduf_4c.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-D1_Pknak.js" as="script"><link rel="prefetch" href="/note-front/assets/13.html-10hyBLqm.js" as="script"><link rel="prefetch" href="/note-front/assets/14.html-BnI1reQ7.js" as="script"><link rel="prefetch" href="/note-front/assets/15.html-CeC3tOsM.js" as="script"><link rel="prefetch" href="/note-front/assets/16.html-BK_M8RKN.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html--oPzyjuO.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CFupcg8P.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-B6RdXZGi.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-D8187fnr.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-DJRLgQqs.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Dsoqh3n7.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-6aAXZ_j-.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Cb8MBJWH.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CVaKY7TT.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-BDsgHLiz.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-B0qOMjYZ.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-xyJ0wrGV.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BObW1K4n.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BJ2AO5DN.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-Rs9gopm1.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-NwWlfaYl.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-T7FLsGPW.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-BbOvYu-B.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-tGCMOjd4.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-BF-1TRQY.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-Bij9UtAq.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-Dt3du3Q3.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BqqIFlXj.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-BJvrlccQ.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-DsmhPDxF.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-CAhDRWJw.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-e9mA0R_8.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-B5tB7u5f.js" as="script"><link rel="prefetch" href="/note-front/assets/09.html-Cdh3XZy7.js" as="script"><link rel="prefetch" href="/note-front/assets/10.html-CCWh5Dkj.js" as="script"><link rel="prefetch" href="/note-front/assets/11.html-BEkzXH9n.js" as="script"><link rel="prefetch" href="/note-front/assets/12.html-vgYs0gv2.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CcphCPIG.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-dXvb1cU0.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-lp8DTQqs.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CMT8TLGr.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-jss-2SZf.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-BrnkvIj6.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-B2rQkRG0.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-CYSTrDhi.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-u4GSXLqQ.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-EVFPSjSD.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-fR44cJB_.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-GRBA15jP.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-B4UEXhWB.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BZ4XnOSn.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-FBAeJlLK.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-MMeZX5g8.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-D8XbBKdg.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-RguEv5LM.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-DM3piJ5Q.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-Bvm6vyyE.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-sPxcGMYS.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DvDl5p39.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-hXJ-Xzu0.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-S8ZZGWr8.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-CJeBq48Z.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-CEKGyTP8.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-acldhgF5.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DvAD5STm.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-BqBLx4dq.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-YGX3Lv33.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-DgHpBwBL.js" as="script"><link rel="prefetch" href="/note-front/assets/04.html-DnQrKxqM.js" as="script"><link rel="prefetch" href="/note-front/assets/05.html-Bc5tWgrh.js" as="script"><link rel="prefetch" href="/note-front/assets/06.html-CH69vfJw.js" as="script"><link rel="prefetch" href="/note-front/assets/07.html-B8Y7ON-e.js" as="script"><link rel="prefetch" href="/note-front/assets/08.html-B2JCXuWH.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-yYV0QCh-.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-BUcTsWBs.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-DIXEUU52.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-FRhRTyFr.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-Cz_kZzAG.js" as="script"><link rel="prefetch" href="/note-front/assets/01.html-B3Q59Uzl.js" as="script"><link rel="prefetch" href="/note-front/assets/02.html-CtIFq1E0.js" as="script"><link rel="prefetch" href="/note-front/assets/03.html-BLmODuf9.js" as="script"><link rel="prefetch" href="/note-front/assets/404.html-DEHhwvCm.js" as="script"><link rel="prefetch" href="/note-front/assets/katex-ChWnQ-fc.js" as="script"><link rel="prefetch" href="/note-front/assets/dagre-OKDRZEBW-DqpdoKlG.js" as="script"><link rel="prefetch" href="/note-front/assets/c4Diagram-VJAJSXHY-Bu_6A4f8.js" as="script"><link rel="prefetch" href="/note-front/assets/flowDiagram-4HSFHLVR-DnP0x8bD.js" as="script"><link rel="prefetch" href="/note-front/assets/flowDiagram-4HSFHLVR-DnP0x8bD.js" as="script"><link rel="prefetch" href="/note-front/assets/erDiagram-Q7BY3M3F-BXoOj3Oz.js" as="script"><link rel="prefetch" href="/note-front/assets/gitGraphDiagram-7IBYFJ6S-1VWA3_1d.js" as="script"><link rel="prefetch" href="/note-front/assets/ganttDiagram-APWFNJXF-CkpBqKAn.js" as="script"><link rel="prefetch" href="/note-front/assets/infoDiagram-PH2N3AL5-BJy3Ietf.js" as="script"><link rel="prefetch" href="/note-front/assets/pieDiagram-IB7DONF6-DMFyK5Uc.js" as="script"><link rel="prefetch" href="/note-front/assets/quadrantDiagram-7GDLP6J5-DYFu9Jr0.js" as="script"><link rel="prefetch" href="/note-front/assets/xychartDiagram-VJFVF3MP-COlmlmjD.js" as="script"><link rel="prefetch" href="/note-front/assets/requirementDiagram-KVF5MWMF-CIoMUjb7.js" as="script"><link rel="prefetch" href="/note-front/assets/sequenceDiagram-X6HHIX6F-CEyU2xCK.js" as="script"><link rel="prefetch" href="/note-front/assets/classDiagram-GIVACNV2-DKpJM5Q5.js" as="script"><link rel="prefetch" href="/note-front/assets/classDiagram-v2-COTLJTTW-DKpJM5Q5.js" as="script"><link rel="prefetch" href="/note-front/assets/stateDiagram-DGXRK772-osqlrq2x.js" as="script"><link rel="prefetch" href="/note-front/assets/stateDiagram-v2-YXO3MK2T-BEfzXktv.js" as="script"><link rel="prefetch" href="/note-front/assets/journeyDiagram-U35MCT3I-DEKqEJoN.js" as="script"><link rel="prefetch" href="/note-front/assets/flowDiagram-4HSFHLVR-DnP0x8bD.js" as="script"><link rel="prefetch" href="/note-front/assets/timeline-definition-BDJGKUSR-whKBVkc_.js" as="script"><link rel="prefetch" href="/note-front/assets/mindmap-definition-ALO5MXBD-Bp7eI7H8.js" as="script"><link rel="prefetch" href="/note-front/assets/kanban-definition-NDS4AKOZ-PdZxpcfV.js" as="script"><link rel="prefetch" href="/note-front/assets/sankeyDiagram-QLVOVGJD-CQFpeeMU.js" as="script"><link rel="prefetch" href="/note-front/assets/diagram-VNBRO52H-B6uirg5H.js" as="script"><link rel="prefetch" href="/note-front/assets/diagram-SSKATNLV--Jpm_9T3.js" as="script"><link rel="prefetch" href="/note-front/assets/blockDiagram-JOT3LUYC-DlDXHZ8z.js" as="script"><link rel="prefetch" href="/note-front/assets/architectureDiagram-IEHRJDOE-cpg61kBY.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/note-front/"><!----><span class="vp-site-name" aria-hidden="true">赵建辉的前端知识库</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端样式"><span class="title">前端样式</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端样式"><span class="title">前端样式</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/base_htmlcss/" aria-label="html+css"><!--[--><!--[--><!--]--><!--]-->html+css<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/records_css/" aria-label="css整理记录"><!--[--><!--[--><!--]--><!--]-->css整理记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/records_html/" aria-label="html整理记录"><!--[--><!--[--><!--]--><!--]-->html整理记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/records_layout/" aria-label="页面布局记录"><!--[--><!--[--><!--]--><!--]-->页面布局记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/pre_compile_css/" aria-label="CSS 预编译器"><!--[--><!--[--><!--]--><!--]-->CSS 预编译器<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/pre_defined_css/" aria-label="CSS 预定义"><!--[--><!--[--><!--]--><!--]-->CSS 预定义<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端交互"><span class="title">前端交互</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端交互"><span class="title">前端交互</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/JavaScript/" aria-label="JavaScript相关"><!--[--><!--[--><!--]--><!--]-->JavaScript相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/ECMAScript/" aria-label="ECMAScript相关"><!--[--><!--[--><!--]--><!--]-->ECMAScript相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/TypeScript/" aria-label="TypeScript相关"><!--[--><!--[--><!--]--><!--]-->TypeScript相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/other/" aria-label="其他相关"><!--[--><!--[--><!--]--><!--]-->其他相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/plugin/" aria-label="插件相关"><!--[--><!--[--><!--]--><!--]-->插件相关<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/framework/vue/" aria-label="Vue相关"><!--[--><!--[--><!--]--><!--]-->Vue相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/framework/react/" aria-label="React相关"><!--[--><!--[--><!--]--><!--]-->React相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/framework/angular/" aria-label="Angular相关"><!--[--><!--[--><!--]--><!--]-->Angular相关<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端动画"><span class="title">前端动画</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端动画"><span class="title">前端动画</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/canvas/" aria-label="canvas"><!--[--><!--[--><!--]--><!--]-->canvas<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/svg/" aria-label="svg"><!--[--><!--[--><!--]--><!--]-->svg<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/fabric/" aria-label="Fabric.js"><!--[--><!--[--><!--]--><!--]-->Fabric.js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/note-front/animation/pixi/" aria-label="pixi.js"><!--[--><!--[--><!--]--><!--]-->pixi.js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/echats/" aria-label="Echats.js"><!--[--><!--[--><!--]--><!--]-->Echats.js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/antv/" aria-label="antv"><!--[--><!--[--><!--]--><!--]-->antv<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/webgl/" aria-label="webgl"><!--[--><!--[--><!--]--><!--]-->webgl<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/three/" aria-label="three.js"><!--[--><!--[--><!--]--><!--]-->three.js<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端应用"><span class="title">前端应用</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端应用"><span class="title">前端应用</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/weixin/" aria-label="微信小程序"><!--[--><!--[--><!--]--><!--]-->微信小程序<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/uniapp/" aria-label="uni-app"><!--[--><!--[--><!--]--><!--]-->uni-app<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/electron/" aria-label="electron桌面"><!--[--><!--[--><!--]--><!--]-->electron桌面<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/cocos/" aria-label="cocos游戏"><!--[--><!--[--><!--]--><!--]-->cocos游戏<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JS后端"><span class="title">JS后端</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JS后端"><span class="title">JS后端</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/backend/node/" aria-label="node基础"><!--[--><!--[--><!--]--><!--]-->node基础<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/backend/senior/" aria-label="web后台框架"><!--[--><!--[--><!--]--><!--]-->web后台框架<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/backend/quote/" aria-label="依赖包记录"><!--[--><!--[--><!--]--><!--]-->依赖包记录<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其他知识"><span class="title">其他知识</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其他知识"><span class="title">其他知识</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/knowledge/" aria-label="前端常识记录"><!--[--><!--[--><!--]--><!--]-->前端常识记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/plugin/" aria-label="插件开发"><!--[--><!--[--><!--]--><!--]-->插件开发<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/construct/" aria-label="前端构建工具"><!--[--><!--[--><!--]--><!--]-->前端构建工具<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/other/" aria-label="其他标记语言"><!--[--><!--[--><!--]--><!--]-->其他标记语言<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/tool/" aria-label="开发工具使用"><!--[--><!--[--><!--]--><!--]-->开发工具使用<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端样式"><span class="title">前端样式</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端样式"><span class="title">前端样式</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/base_htmlcss/" aria-label="html+css"><!--[--><!--[--><!--]--><!--]-->html+css<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/records_css/" aria-label="css整理记录"><!--[--><!--[--><!--]--><!--]-->css整理记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/records_html/" aria-label="html整理记录"><!--[--><!--[--><!--]--><!--]-->html整理记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/records_layout/" aria-label="页面布局记录"><!--[--><!--[--><!--]--><!--]-->页面布局记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/pre_compile_css/" aria-label="CSS 预编译器"><!--[--><!--[--><!--]--><!--]-->CSS 预编译器<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/style/pre_defined_css/" aria-label="CSS 预定义"><!--[--><!--[--><!--]--><!--]-->CSS 预定义<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端交互"><span class="title">前端交互</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端交互"><span class="title">前端交互</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/JavaScript/" aria-label="JavaScript相关"><!--[--><!--[--><!--]--><!--]-->JavaScript相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/ECMAScript/" aria-label="ECMAScript相关"><!--[--><!--[--><!--]--><!--]-->ECMAScript相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/TypeScript/" aria-label="TypeScript相关"><!--[--><!--[--><!--]--><!--]-->TypeScript相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/other/" aria-label="其他相关"><!--[--><!--[--><!--]--><!--]-->其他相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/script/plugin/" aria-label="插件相关"><!--[--><!--[--><!--]--><!--]-->插件相关<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/framework/vue/" aria-label="Vue相关"><!--[--><!--[--><!--]--><!--]-->Vue相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/framework/react/" aria-label="React相关"><!--[--><!--[--><!--]--><!--]-->React相关<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/framework/angular/" aria-label="Angular相关"><!--[--><!--[--><!--]--><!--]-->Angular相关<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端动画"><span class="title">前端动画</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端动画"><span class="title">前端动画</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/canvas/" aria-label="canvas"><!--[--><!--[--><!--]--><!--]-->canvas<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/svg/" aria-label="svg"><!--[--><!--[--><!--]--><!--]-->svg<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/fabric/" aria-label="Fabric.js"><!--[--><!--[--><!--]--><!--]-->Fabric.js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/note-front/animation/pixi/" aria-label="pixi.js"><!--[--><!--[--><!--]--><!--]-->pixi.js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/echats/" aria-label="Echats.js"><!--[--><!--[--><!--]--><!--]-->Echats.js<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/antv/" aria-label="antv"><!--[--><!--[--><!--]--><!--]-->antv<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/webgl/" aria-label="webgl"><!--[--><!--[--><!--]--><!--]-->webgl<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/animation/three/" aria-label="three.js"><!--[--><!--[--><!--]--><!--]-->three.js<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="前端应用"><span class="title">前端应用</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="前端应用"><span class="title">前端应用</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/weixin/" aria-label="微信小程序"><!--[--><!--[--><!--]--><!--]-->微信小程序<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/uniapp/" aria-label="uni-app"><!--[--><!--[--><!--]--><!--]-->uni-app<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/electron/" aria-label="electron桌面"><!--[--><!--[--><!--]--><!--]-->electron桌面<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/application/cocos/" aria-label="cocos游戏"><!--[--><!--[--><!--]--><!--]-->cocos游戏<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="JS后端"><span class="title">JS后端</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="JS后端"><span class="title">JS后端</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/backend/node/" aria-label="node基础"><!--[--><!--[--><!--]--><!--]-->node基础<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/backend/senior/" aria-label="web后台框架"><!--[--><!--[--><!--]--><!--]-->web后台框架<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/backend/quote/" aria-label="依赖包记录"><!--[--><!--[--><!--]--><!--]-->依赖包记录<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="其他知识"><span class="title">其他知识</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="其他知识"><span class="title">其他知识</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/knowledge/" aria-label="前端常识记录"><!--[--><!--[--><!--]--><!--]-->前端常识记录<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/plugin/" aria-label="插件开发"><!--[--><!--[--><!--]--><!--]-->插件开发<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/construct/" aria-label="前端构建工具"><!--[--><!--[--><!--]--><!--]-->前端构建工具<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/other/" aria-label="其他标记语言"><!--[--><!--[--><!--]--><!--]-->其他标记语言<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/note-front/other/tool/" aria-label="开发工具使用"><!--[--><!--[--><!--]--><!--]-->开发工具使用<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">pixi v7 学习 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/base/01.html" aria-label="一、基础操作"><!--[--><!--[--><!--]--><!--]-->一、基础操作<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/base/02.html" aria-label="二、滤镜"><!--[--><!--[--><!--]--><!--]-->二、滤镜<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/base/03.html" aria-label="三、小游戏"><!--[--><!--[--><!--]--><!--]-->三、小游戏<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">pixi v8 官网教程 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/01.html" aria-label="一、开始"><!--[--><!--[--><!--]--><!--]-->一、开始<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/02.html" aria-label="二、核心概念"><!--[--><!--[--><!--]--><!--]-->二、核心概念<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/03.html" aria-label="三、资产(Assets)"><!--[--><!--[--><!--]--><!--]-->三、资产(Assets)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/04.html" aria-label="四、应用程序(Application)"><!--[--><!--[--><!--]--><!--]-->四、应用程序(Application)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/05.html" aria-label="五、渲染器"><!--[--><!--[--><!--]--><!--]-->五、渲染器<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/06.html" aria-label="六、纹理"><!--[--><!--[--><!--]--><!--]-->六、纹理<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/07.html" aria-label="七、场景相关"><!--[--><!--[--><!--]--><!--]-->七、场景相关<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/08.html" aria-label="八、事件/互动"><!--[--><!--[--><!--]--><!--]-->八、事件/互动<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/09.html" aria-label="九、滤镜/混合模式"><!--[--><!--[--><!--]--><!--]-->九、滤镜/混合模式<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/10.html" aria-label="十、数学"><!--[--><!--[--><!--]--><!--]-->十、数学<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/11.html" aria-label="十一、可访问性"><!--[--><!--[--><!--]--><!--]-->十一、可访问性<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/12.html" aria-label="十二、颜色"><!--[--><!--[--><!--]--><!--]-->十二、颜色<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/official/13.html" aria-label="十三、ticker"><!--[--><!--[--><!--]--><!--]-->十三、ticker<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">pixi v8 官网实例 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/01.html" aria-label="一、 基础"><!--[--><!--[--><!--]--><!--]-->一、 基础<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/note-front/animation/pixi/example/02.html" aria-label="二、 进阶"><!--[--><!--[--><!--]--><!--]-->二、 进阶<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/03.html" aria-label="三、 精灵"><!--[--><!--[--><!--]--><!--]-->三、 精灵<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/04.html" aria-label="四、 文本"><!--[--><!--[--><!--]--><!--]-->四、 文本<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/05.html" aria-label="五、 图形"><!--[--><!--[--><!--]--><!--]-->五、 图形<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/06.html" aria-label="六、事件"><!--[--><!--[--><!--]--><!--]-->六、事件<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/07.html" aria-label="七、 遮罩"><!--[--><!--[--><!--]--><!--]-->七、 遮罩<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/08.html" aria-label="八、 滤镜"><!--[--><!--[--><!--]--><!--]-->八、 滤镜<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/09.html" aria-label="九、网格"><!--[--><!--[--><!--]--><!--]-->九、网格<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/10.html" aria-label="十、纹理"><!--[--><!--[--><!--]--><!--]-->十、纹理<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/11.html" aria-label="十一、资产加载"><!--[--><!--[--><!--]--><!--]-->十一、资产加载<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/note-front/animation/pixi/example/12.html" aria-label="十二、使用canvas"><!--[--><!--[--><!--]--><!--]-->十二、使用canvas<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">pixi日常记录 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="二、-进阶" tabindex="-1"><a class="header-anchor" href="#二、-进阶"><span>二、 进阶</span></a></h1><h2 id="_2-1-插槽" tabindex="-1"><a class="header-anchor" href="#_2-1-插槽"><span>2.1 插槽</span></a></h2><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Assets<span class="token punctuation">,</span> Color<span class="token punctuation">,</span> Container<span class="token punctuation">,</span> Texture<span class="token punctuation">,</span> Sprite<span class="token punctuation">,</span> Graphics<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> TextStyle<span class="token punctuation">,</span> BlurFilter<span class="token punctuation">,</span> FillGradient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">//使用立即执行函数进行调用</span></span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 创建应用程序</span></span>
<span class="line">            <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 应用程序初始化</span></span>
<span class="line">            <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">                <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#1099bb&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">height</span><span class="token operator">:</span><span class="token number">600</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 应用程序页面添加到网页上</span></span>
<span class="line">            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 加载纹理</span></span>
<span class="line">            <span class="token keyword">await</span> Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">                <span class="token string">&quot;../assets/images/eggHead.png&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">                <span class="token string">&quot;../assets/images/flowerTop.png&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">                <span class="token string">&quot;../assets/images/helmlok.png&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">                <span class="token string">&quot;../assets/images/skully.png&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">const</span> <span class="token constant">REEL_WIDTH</span> <span class="token operator">=</span> <span class="token number">160</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> <span class="token constant">SYMBOL_SIZE</span> <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建不同的插槽符号</span></span>
<span class="line">            <span class="token keyword">const</span> slotTextures <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                Texture<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/eggHead.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                Texture<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/flowerTop.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                Texture<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/helmlok.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                Texture<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/skully.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建卷轴信息数组</span></span>
<span class="line">            <span class="token keyword">const</span> reels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//创建一个滚动容器</span></span>
<span class="line">            <span class="token keyword">const</span> reelContainer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 判断几条reel（卷轴）</span></span>
<span class="line">            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//新增容器</span></span>
<span class="line">                <span class="token keyword">const</span> rc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//并设置列的位置</span></span>
<span class="line">                rc<span class="token punctuation">.</span>x <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token constant">REEL_WIDTH</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 添加容器内</span></span>
<span class="line">                reelContainer<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>rc<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//设置卷轴信息，并把创建的容器赋予其中一个属性</span></span>
<span class="line">                <span class="token keyword">const</span> reel <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">container</span><span class="token operator">:</span> rc<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">symbols</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">previousPosition</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">blur</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">BlurFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//滤镜的位置</span></span>
<span class="line">                reel<span class="token punctuation">.</span>blur<span class="token punctuation">.</span>blurX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">                reel<span class="token punctuation">.</span>blur<span class="token punctuation">.</span>blurY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//将卷轴的滤镜信息赋予新建的容器</span></span>
<span class="line">                rc<span class="token punctuation">.</span>filters <span class="token operator">=</span> <span class="token punctuation">[</span>reel<span class="token punctuation">.</span>blur<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 构建每一列上每个符号</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//随机显示4个图片上的一个 作为新建精灵的纹理</span></span>
<span class="line">                    <span class="token keyword">const</span> symbol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>slotTextures<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> slotTextures<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// 缩放精灵以适应符号区域。  宽与高与精灵宽与高比例更小的赋予 设置的比例</span></span>
<span class="line">                    symbol<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> symbol<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token constant">SYMBOL_SIZE</span> <span class="token operator">/</span> symbol<span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token constant">SYMBOL_SIZE</span> <span class="token operator">/</span> symbol<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// y轴的位置与循环j值相关</span></span>
<span class="line">                    symbol<span class="token punctuation">.</span>y <span class="token operator">=</span> j <span class="token operator">*</span> <span class="token constant">SYMBOL_SIZE</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// x值 设置为容器的宽度 减去精灵本身的宽度的一半  如果部位整数进行四舍五入</span></span>
<span class="line">                    symbol<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SYMBOL_SIZE</span> <span class="token operator">-</span> symbol<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// 将当前数据加入到卷轴信息中</span></span>
<span class="line">                    reel<span class="token punctuation">.</span>symbols<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// 每一个精灵都加入到当前列的容器里</span></span>
<span class="line">                    rc<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token comment">// 卷轴信息加入到数组中</span></span>
<span class="line">                reels<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>reel<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// 将卷轴容器加入到舞台上</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>reelContainer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//覆盖顶部与底部 并放入到reelContainer（容器）</span></span>
<span class="line">            <span class="token keyword">const</span> margin <span class="token operator">=</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token constant">SYMBOL_SIZE</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//y轴起始位置 margin 高度减去要显示的高度 除以2</span></span>
<span class="line">            reelContainer<span class="token punctuation">.</span>y <span class="token operator">=</span> margin<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//x轴起始位置 宽度减去要显示宽度 除以2</span></span>
<span class="line">            reelContainer<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token constant">REEL_WIDTH</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 上半部分设置黑色</span></span>
<span class="line">            <span class="token keyword">const</span> top <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">,</span> margin<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 下半部分设置黑色</span></span>
<span class="line">            <span class="token keyword">const</span> bottom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">SYMBOL_SIZE</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> margin<span class="token punctuation">,</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">,</span> margin<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建渐变填充</span></span>
<span class="line">            <span class="token keyword">const</span> fill <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FillGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">36</span> <span class="token operator">*</span> <span class="token number">1.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// colors 两个颜色之间出现的颜色 将循环的颜色放入控件中加载，并转成16位</span></span>
<span class="line">            <span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">0x00ff99</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">color</span> <span class="token operator">=&gt;</span> Color<span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//多少分之一 减价对应的颜色</span></span>
<span class="line">            colors<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> ratio <span class="token operator">=</span> index <span class="token operator">/</span> colors<span class="token punctuation">.</span>length<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                fill<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span>ratio<span class="token punctuation">,</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//添加文本的样式</span></span>
<span class="line">            <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;Arial&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">36</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">fontStyle</span><span class="token operator">:</span> <span class="token string">&quot;italic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">fontWeight</span><span class="token operator">:</span> <span class="token string">&quot;bold&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token punctuation">{</span> fill <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">stroke</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x4a1850</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">dropShadow</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x000000</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">angle</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">blur</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">distance</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">wordWrap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">wordWrapWidth</span><span class="token operator">:</span> <span class="token number">440</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">const</span> playText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;启动滚动!&quot;</span><span class="token punctuation">,</span> style<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//添加下面中间的位置</span></span>
<span class="line">            playText<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bottom<span class="token punctuation">.</span>width <span class="token operator">-</span> playText<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//app.screen.height - margin 下方的位置  剩下的是设置文本的位置</span></span>
<span class="line">            playText<span class="token punctuation">.</span>y <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">-</span> margin <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>margin <span class="token operator">-</span> playText<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//8.0之后不建议使用容器之外定义子项</span></span>
<span class="line">            bottom<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>playText<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 添加头部文本</span></span>
<span class="line">            <span class="token keyword">const</span> headerText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;PIXI怪物老虎机!&quot;</span><span class="token punctuation">,</span> style<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            headerText<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>top<span class="token punctuation">.</span>width <span class="token operator">-</span> headerText<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            headerText<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>margin <span class="token operator">-</span> headerText<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            top<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>headerText<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>bottom<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 设置交互性。</span></span>
<span class="line">            <span class="token comment">// 点击时触发信息</span></span>
<span class="line">            bottom<span class="token punctuation">.</span>eventMode <span class="token operator">=</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//鼠标样式改为手指类型</span></span>
<span class="line">            bottom<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">&quot;pointer&quot;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//添加事件  鼠标点击时触发事件  addListener与on一样都是监控用的</span></span>
<span class="line">            bottom<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">&quot;pointerdown&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">let</span> running <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 功能开始播放。</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">startPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//防止多次点击</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>running<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">                running <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//循环每条数组</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> reels<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//每一列的对象</span></span>
<span class="line">                    <span class="token keyword">const</span> r <span class="token operator">=</span> reels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//判断0-3之间</span></span>
<span class="line">                    <span class="token keyword">const</span> extra <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//目标对象  当前位置 + 10 + (0-15) + (0-3)</span></span>
<span class="line">                    <span class="token keyword">const</span> target <span class="token operator">=</span> r<span class="token punctuation">.</span>position <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> extra<span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// 定制时间 最小2500 最大 2500 + 1800 + 1800 = 5100</span></span>
<span class="line">                    <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token number">2500</span> <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">600</span> <span class="token operator">+</span> extra <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//将配置加入 寻要循环的位置</span></span>
<span class="line">                    <span class="token function">tweenTo</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token string">&quot;position&quot;</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> time<span class="token punctuation">,</span> <span class="token function">backout</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> i <span class="token operator">===</span> reels<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> reelsComplete <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 当前轮询是否已结束</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">reelsComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                running <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 监听动画更新</span></span>
<span class="line">            app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 更新插槽</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> reels<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//获取对象</span></span>
<span class="line">                    <span class="token keyword">const</span> r <span class="token operator">=</span> reels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//根据速度更新模糊滤镜y值。</span></span>
<span class="line">                    <span class="token comment">//如果也考虑到时间，这会更好。现在模糊取决于帧率。</span></span>
<span class="line">                    <span class="token comment">// 设置Y轴模糊度</span></span>
<span class="line">                    r<span class="token punctuation">.</span>blur<span class="token punctuation">.</span>blurY <span class="token operator">=</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>position <span class="token operator">-</span> r<span class="token punctuation">.</span>previousPosition<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//之前的位置</span></span>
<span class="line">                    r<span class="token punctuation">.</span>previousPosition <span class="token operator">=</span> r<span class="token punctuation">.</span>position<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 循环其中的条状容器 .</span></span>
<span class="line">                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> r<span class="token punctuation">.</span>symbols<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token comment">// 每一个对象</span></span>
<span class="line">                        <span class="token keyword">const</span> s <span class="token operator">=</span> r<span class="token punctuation">.</span>symbols<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token comment">//当前对象的Y轴</span></span>
<span class="line">                        <span class="token keyword">const</span> prevy <span class="token operator">=</span> s<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="line">                        <span class="token comment">//新的Y值</span></span>
<span class="line">                        <span class="token comment">// 下面的事件中 position都是从初始值一直到目标值</span></span>
<span class="line">                        <span class="token comment">// 每次posion变化 y轴也会花生变化</span></span>
<span class="line"></span>
<span class="line">                        s<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>position <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">%</span> r<span class="token punctuation">.</span>symbols<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">SYMBOL_SIZE</span> <span class="token operator">-</span> <span class="token constant">SYMBOL_SIZE</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token comment">// y轴 一直会随着r.position 变化而花生变化</span></span>
<span class="line">                        <span class="token comment">// 当position 从大于1的数回到1时，y轴也会花生相应的变化</span></span>
<span class="line">                        <span class="token comment">// console.log(s.y, prevy);</span></span>
<span class="line"></span>
<span class="line">                        <span class="token comment">// 能整除4 且有余数(小数)的新值都是负数</span></span>
<span class="line">                        <span class="token comment">// 能整除4 无余数 新值也是负值 但整除4等于1 时 下面的判断就会出现错误</span></span>
<span class="line">                        <span class="token comment">// 不能整除4 不管有没有余数都不会发生改变</span></span>
<span class="line"></span>
<span class="line">                        <span class="token comment">//结果是 symbols.length 下四个精灵  每个循环四次都会改变一下纹理</span></span>
<span class="line">                        <span class="token comment">// y轴移动时 还会改变纹理的成功了</span></span>
<span class="line">                        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> prevy <span class="token operator">&gt;</span> <span class="token constant">SYMBOL_SIZE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                            <span class="token comment">//获取新的随机纹理</span></span>
<span class="line">                            s<span class="token punctuation">.</span>texture <span class="token operator">=</span> slotTextures<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> slotTextures<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                            <span class="token comment">//x轴y轴改变</span></span>
<span class="line">                            s<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> s<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token constant">SYMBOL_SIZE</span> <span class="token operator">/</span> s<span class="token punctuation">.</span>texture<span class="token punctuation">.</span>width<span class="token punctuation">,</span> <span class="token constant">SYMBOL_SIZE</span> <span class="token operator">/</span> s<span class="token punctuation">.</span>texture<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                            <span class="token comment">//x轴也改变</span></span>
<span class="line">                            s<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token constant">SYMBOL_SIZE</span> <span class="token operator">-</span> s<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 非常简单且实用函数 在实际产品中，这应该被一个适当的library （库）所取代。</span></span>
<span class="line">            <span class="token keyword">const</span> tweening <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">tweenTo</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> property<span class="token punctuation">,</span> target<span class="token punctuation">,</span> time<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> onchange<span class="token punctuation">,</span> oncomplete</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> tween <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">                    object<span class="token punctuation">,</span></span>
<span class="line">                    property<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">propertyBeginValue</span><span class="token operator">:</span> object<span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                    target<span class="token punctuation">,</span></span>
<span class="line">                    easing<span class="token punctuation">,</span></span>
<span class="line">                    time<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">change</span><span class="token operator">:</span> onchange<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">complete</span><span class="token operator">:</span> oncomplete<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">start</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                tweening<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tween<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token keyword">return</span> tween<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// 监听动画更新</span></span>
<span class="line">            app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//获取当前时间</span></span>
<span class="line">                <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//移除集合</span></span>
<span class="line">                <span class="token keyword">const</span> remove <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//循环替换集合</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tweening<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//获取当前对象</span></span>
<span class="line">                    <span class="token keyword">const</span> t <span class="token operator">=</span> tweening<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//判断 当前获取的时间减去开始插入时的时间 再除以定制时间 随着时间的增长 会越来越趋近于1</span></span>
<span class="line">                    <span class="token comment">//值是0-1 越来越接近于1</span></span>
<span class="line">                    <span class="token keyword">const</span> phase <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> t<span class="token punctuation">.</span>start<span class="token punctuation">)</span> <span class="token operator">/</span> t<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// t.object等于当前数列的对象 设置的当前属性position  = lerp函数[上次移动位置,目标对象,箭头函数 ]</span></span>
<span class="line">                    <span class="token comment">//位置  最后的值大于 t.easing(phase)接近于想要的位置</span></span>
<span class="line">                    t<span class="token punctuation">.</span>object<span class="token punctuation">[</span>t<span class="token punctuation">.</span>property<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">lerp</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>propertyBeginValue<span class="token punctuation">,</span> t<span class="token punctuation">.</span>target<span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">easing</span><span class="token punctuation">(</span>phase<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// console.log(t.propertyBeginValue, t.target, t.easing(phase), t.object[t.property]);</span></span>
<span class="line">                    <span class="token comment">//t.change存在，执行change函数，默认为空</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>change<span class="token punctuation">)</span> t<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//如果都是1</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>phase <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token comment">//将目标对象 赋予position</span></span>
<span class="line">                        t<span class="token punctuation">.</span>object<span class="token punctuation">[</span>t<span class="token punctuation">.</span>property<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">.</span>target<span class="token punctuation">;</span></span>
<span class="line">                        <span class="token comment">//如果是最后一位开始将运行状态running改为true</span></span>
<span class="line">                        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span>complete<span class="token punctuation">)</span> t<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token comment">//将对象插入到移除列表中</span></span>
<span class="line">                        remove<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token comment">//按照循环进行删除</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> remove<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    tweening<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>tweening<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>remove<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//基本警报功能</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">lerp</span><span class="token punctuation">(</span><span class="token parameter">a1<span class="token punctuation">,</span> a2<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> a1 <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> t<span class="token punctuation">)</span> <span class="token operator">+</span> a2 <span class="token operator">*</span> t<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// tweenjs的回退功能。</span></span>
<span class="line">            <span class="token comment">// 直接返回一个箭头函数  这个箭头函数传入的值是0-1 传入的值越接近1返回的值也越接近于1</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">backout</span><span class="token punctuation">(</span><span class="token parameter">amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// --t 传入的数据先前去1</span></span>
<span class="line">                <span class="token comment">// 如果t等于0.1  --t等于 0.9 t * t = 0.81  结果等于 0.81 * -0.58 + 1 = 0.311499999999999</span></span>
<span class="line">                <span class="token comment">// 如果t &gt; 0.67 小于时 返回值 大于1</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token operator">--</span>t <span class="token operator">*</span> t <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> t <span class="token operator">+</span> amount<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----><h2 id="_2-2-刮刮卡" tabindex="-1"><a class="header-anchor" href="#_2-2-刮刮卡"><span>2.2 刮刮卡</span></a></h2><ul><li>代码</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Assets<span class="token punctuation">,</span> Graphics<span class="token punctuation">,</span> Sprite<span class="token punctuation">,</span> RenderTexture<span class="token punctuation">,</span> Point <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 创建应用程序</span></span>
<span class="line">            <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 初始化应用程序</span></span>
<span class="line">            <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">                <span class="token literal-property property">height</span><span class="token operator">:</span><span class="token number">600</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">width</span><span class="token operator">:</span><span class="token number">800</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 将应用程序添加到网页中</span></span>
<span class="line">            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 画一个原型纹理将被作为我们的笔刷</span></span>
<span class="line">            <span class="token keyword">const</span> brush <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xffffff</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建一条线来插值绘制的点</span></span>
<span class="line">            <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 加载纹理</span></span>
<span class="line">            <span class="token keyword">await</span> Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">                <span class="token string">&quot;../assets/images/bg_grass.jpg&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">                <span class="token string">&quot;../assets/images/bg_rotate.jpg&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//获取宽与高</span></span>
<span class="line">            <span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//将舞台大小设置屏幕的大小</span></span>
<span class="line">            <span class="token keyword">const</span> stageSize <span class="token operator">=</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//设置精灵并赋值屏幕的宽度与高度</span></span>
<span class="line">            <span class="token keyword">const</span> background <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/bg_grass.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stageSize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> imageToReveal <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/bg_rotate.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stageSize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//创建渲染纹理</span></span>
<span class="line">            <span class="token keyword">const</span> renderTexture <span class="token operator">=</span> RenderTexture<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>stageSize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//将这个纹理赋值给新的精灵</span></span>
<span class="line">            <span class="token keyword">const</span> renderTextureSprite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>renderTexture<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//新精灵作为遮罩 当遮罩有值的时候 这个精灵回显示出来</span></span>
<span class="line">            imageToReveal<span class="token punctuation">.</span>mask <span class="token operator">=</span> renderTextureSprite<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 舞台上把这三者添加上</span></span>
<span class="line">            <span class="token comment">// 由于renderTextureSprite初始值为空 所以imageToReveal精灵显示不出  只能 显示background</span></span>
<span class="line">            <span class="token comment">// 更改renderTextureSprite的遮罩信息，可以将imageToReveal数据显示出来</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>background<span class="token punctuation">,</span> imageToReveal<span class="token punctuation">,</span> renderTextureSprite<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置事件启动</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>eventMode <span class="token operator">=</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//点击命中返回的范围是整个屏幕</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>hitArea <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//分别加载四种监控 鼠标按下 鼠标释放 在访问区域的外部 指针在页面上的移动</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pointerdown&quot;</span><span class="token punctuation">,</span> pointerDown<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pointerup&quot;</span><span class="token punctuation">,</span> pointerUp<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pointerupoutside&quot;</span><span class="token punctuation">,</span> pointerUp<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pointermove&quot;</span><span class="token punctuation">,</span> pointerMove<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//拖拽进行的状态</span></span>
<span class="line">            <span class="token keyword">let</span> dragging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 最后按下鼠标指针</span></span>
<span class="line">            <span class="token keyword">let</span> lastDrawnPoint <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//传入的参数 鼠标的位置</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">pointerMove</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//如果鼠标按下了</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>dragging<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//笔刷进入当前位置</span></span>
<span class="line">                    brush<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// 文档路径错误，哎</span></span>
<span class="line">                    app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                        <span class="token comment">//主体 笔刷</span></span>
<span class="line">                        <span class="token literal-property property">container</span><span class="token operator">:</span> brush<span class="token punctuation">,</span></span>
<span class="line">                        <span class="token comment">//目标渲染纹理</span></span>
<span class="line">                        <span class="token literal-property property">target</span><span class="token operator">:</span> renderTexture<span class="token punctuation">,</span></span>
<span class="line">                        <span class="token comment">// 清理</span></span>
<span class="line">                        <span class="token literal-property property">clear</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token comment">//跳过清理转换</span></span>
<span class="line">                        <span class="token literal-property property">skipUpdateTransform</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//这个判断 最后画的点是否存在  是第二次进入</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastDrawnPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token comment">//将上次移动的位置移动到这次的位置 宽度设置100且颜色为白色</span></span>
<span class="line">                        line<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                            <span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>lastDrawnPoint<span class="token punctuation">.</span>x<span class="token punctuation">,</span> lastDrawnPoint<span class="token punctuation">.</span>y<span class="token punctuation">)</span></span>
<span class="line">                            <span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span></span>
<span class="line">                            <span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xffffff</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token comment">//将新内容放到渲染纹理中</span></span>
<span class="line">                        app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                            <span class="token literal-property property">container</span><span class="token operator">:</span> line<span class="token punctuation">,</span></span>
<span class="line">                            <span class="token literal-property property">target</span><span class="token operator">:</span> renderTexture<span class="token punctuation">,</span></span>
<span class="line">                            <span class="token literal-property property">clear</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">                            <span class="token literal-property property">skipUpdateTransform</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token comment">//如果为空新建一个Point 否则使用上次的</span></span>
<span class="line">                    lastDrawnPoint <span class="token operator">=</span> lastDrawnPoint <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//这只x与y的坐标</span></span>
<span class="line">                    lastDrawnPoint<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">//按下后 可进行移动</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">pointerDown</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                dragging <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token function">pointerMove</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// 松开后两个配置都为空</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">pointerUp</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                dragging <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">                lastDrawnPoint <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----><h2 id="_2-3-星空" tabindex="-1"><a class="header-anchor" href="#_2-3-星空"><span>2.3 星空</span></a></h2><ul><li>代码</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Assets<span class="token punctuation">,</span> Sprite <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 创建应用程序</span></span>
<span class="line">            <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 初始化应用程序</span></span>
<span class="line">            <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">                <span class="token literal-property property">height</span><span class="token operator">:</span><span class="token number">600</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">width</span><span class="token operator">:</span><span class="token number">800</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 应用程序添加到页面上</span></span>
<span class="line">            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 加载星星纹理</span></span>
<span class="line">            <span class="token keyword">const</span> starTexture <span class="token operator">=</span> <span class="token keyword">await</span> Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/star.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//星星数量</span></span>
<span class="line">            <span class="token keyword">const</span> starAmount <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//摄像机z轴</span></span>
<span class="line">            <span class="token keyword">let</span> cameraZ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//视厂</span></span>
<span class="line">            <span class="token keyword">const</span> fov <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//基础速度</span></span>
<span class="line">            <span class="token keyword">const</span> baseSpeed <span class="token operator">=</span> <span class="token number">0.025</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//速度</span></span>
<span class="line">            <span class="token keyword">let</span> speed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//曲速</span></span>
<span class="line">            <span class="token keyword">let</span> warpSpeed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 星星伸展</span></span>
<span class="line">            <span class="token keyword">const</span> starStretch <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 星星基础大小</span></span>
<span class="line">            <span class="token keyword">const</span> starBaseSize <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建星星集合</span></span>
<span class="line">            <span class="token keyword">const</span> stars <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> starAmount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// star 精灵对象</span></span>
<span class="line">                <span class="token keyword">const</span> star <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token literal-property property">sprite</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>starTexture<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//设置精灵的锚点</span></span>
<span class="line">                star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>anchor<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span></span>
<span class="line">                star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>anchor<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0.7</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//放入随机位置</span></span>
<span class="line">                <span class="token function">randomizeStar</span><span class="token punctuation">(</span>star<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//将每个star精灵添加到画布上</span></span>
<span class="line">                app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>star<span class="token punctuation">.</span>sprite<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//将star 添加集合中</span></span>
<span class="line">                stars<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>star<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">//星星的随机位置</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">randomizeStar</span><span class="token punctuation">(</span><span class="token parameter">star<span class="token punctuation">,</span> initial</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//z轴 如果为true 开始随机0-2000 之内的数据 否则摄像机轴 加上0-1000 加上2000</span></span>
<span class="line">                star<span class="token punctuation">.</span>z <span class="token operator">=</span> initial <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span> <span class="token operator">:</span> cameraZ <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 放射性随机的坐标来确认star位置 ，这样没有star撞到相机</span></span>
<span class="line">                <span class="token comment">// 角度 0 到 6.28.. 之间</span></span>
<span class="line">                <span class="token keyword">const</span> deg <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 距离</span></span>
<span class="line">                <span class="token keyword">const</span> distance <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//正弦 余弦 都在 -1到1 之间</span></span>
<span class="line">                star<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span> <span class="token operator">*</span> distance<span class="token punctuation">;</span></span>
<span class="line">                star<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>deg<span class="token punctuation">)</span> <span class="token operator">*</span> distance<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 每5秒更改一次飞行速度</span></span>
<span class="line">            <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//五秒钟等于0 五秒钟等于1</span></span>
<span class="line">                warpSpeed <span class="token operator">=</span> warpSpeed <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 监听动画更新</span></span>
<span class="line">            app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">time</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 简单的缓缓移动 当用于真实时，应将其更改为适当的慢动功能</span></span>
<span class="line">                <span class="token comment">// 第一次  warpSpeed等于1 speed越来越接近1</span></span>
<span class="line">                <span class="token comment">// 第二次  由接近1的数 开始无线接近于0 会出现 4.662602347812701e-9 这样的数 其实这个数比0.0000010177704155697795 更小</span></span>
<span class="line">                speed <span class="token operator">+=</span> <span class="token punctuation">(</span>warpSpeed <span class="token operator">-</span> speed<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//判断摄像机的z轴 默认是0 一直再变大</span></span>
<span class="line">                <span class="token comment">// 如果 time.deltaTime 等于1 最大加的值 12.5  最小加的值 2.5</span></span>
<span class="line">                <span class="token comment">// warpSpeed 是1的时候 cameraZ增长的快 是0的时候 cameraZ增长的慢</span></span>
<span class="line">                cameraZ <span class="token operator">+=</span> time<span class="token punctuation">.</span>deltaTime <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span>speed <span class="token operator">+</span> baseSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//循环一千颗星星</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> starAmount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">// 每一颗星星的对象</span></span>
<span class="line">                    <span class="token keyword">const</span> star <span class="token operator">=</span> stars<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//当前星星的z轴小于摄像机的z轴  重新设定位置</span></span>
<span class="line">                    <span class="token comment">// 由于摄像机一直会增大 star的z轴也会变化</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>star<span class="token punctuation">.</span>z <span class="token operator">&lt;</span> cameraZ<span class="token punctuation">)</span> <span class="token function">randomizeStar</span><span class="token punctuation">(</span>star<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 用非常简单的投影将star的三维位置映射到二维</span></span>
<span class="line">                    <span class="token comment">// 这个z 调整后 1-1000  + 2000 距离</span></span>
<span class="line">                    <span class="token comment">// 随着 cameraZ慢慢增大 得到的结果又会慢慢缩小 达到某个阈值又会从头开始</span></span>
<span class="line">                    <span class="token keyword">const</span> z <span class="token operator">=</span> star<span class="token punctuation">.</span>z <span class="token operator">-</span> cameraZ<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 第一次x 与y 都在 -1 到1 之间 星星对象中精灵的位置 都在中心一个点上</span></span>
<span class="line">                    <span class="token comment">// 视厂 屏幕距离 (fov / z) * app.renderer.screen.width 其实就是判断距离屏幕眼镜的z轴距离，这个应该学习图形学的时候会学到吧</span></span>
<span class="line">                    star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>x <span class="token operator">=</span> star<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token punctuation">(</span>fov <span class="token operator">/</span> z<span class="token punctuation">)</span> <span class="token operator">*</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">+</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">                    star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>y <span class="token operator">=</span> star<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token punctuation">(</span>fov <span class="token operator">/</span> z<span class="token punctuation">)</span> <span class="token operator">*</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">+</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 计算star的尺度和自转。</span></span>
<span class="line">                    <span class="token keyword">const</span> dxCenter <span class="token operator">=</span> star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>x <span class="token operator">-</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">const</span> dyCenter <span class="token operator">=</span> star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>y <span class="token operator">-</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//距离中心点 sqrt平方根</span></span>
<span class="line">                    <span class="token keyword">const</span> distanceCenter <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>dxCenter <span class="token operator">*</span> dxCenter <span class="token operator">+</span> dyCenter <span class="token operator">*</span> dyCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span> distanceCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">//距离比例</span></span>
<span class="line">                    <span class="token keyword">const</span> distanceScale <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2000</span> <span class="token operator">-</span> z<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">//x 的比例 星星基础比例 x 距离比例</span></span>
<span class="line">                    star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>x <span class="token operator">=</span> distanceScale <span class="token operator">*</span> starBaseSize<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">//恒星朝向中心，因此y轴朝向中心。</span></span>
<span class="line">                    <span class="token comment">//根据我们移动的速度和拉伸系数来缩放恒星</span></span>
<span class="line">                    <span class="token comment">//取决于它离中心有多远。</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// y轴比例 星星基础比例 x 距离比例</span></span>
<span class="line">                    <span class="token comment">// speed越来越接近1 y轴会边长</span></span>
<span class="line">                    <span class="token comment">// distanceCenter speed越接近0变化越小 speed越接近1变化越大</span></span>
<span class="line">                    star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>scale<span class="token punctuation">.</span>y <span class="token operator">=</span> distanceScale <span class="token operator">*</span> starBaseSize <span class="token operator">+</span> <span class="token punctuation">(</span>distanceScale <span class="token operator">*</span> speed <span class="token operator">*</span> starStretch <span class="token operator">*</span> distanceCenter<span class="token punctuation">)</span> <span class="token operator">/</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//atan2 返回值再 -PI与PI之间 代表旋转的角度在0度与360度之间</span></span>
<span class="line">                    star<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>dyCenter<span class="token punctuation">,</span> dxCenter<span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----><h2 id="_2-4-结合three-js" tabindex="-1"><a class="header-anchor" href="#_2-4-结合three-js"><span>2.4 结合three.js</span></a></h2><ul><li>代码</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token comment">// 从PixiJS和Three.js导入所需类</span></span>
<span class="line">        <span class="token keyword">import</span> <span class="token punctuation">{</span> Container<span class="token punctuation">,</span> Graphics<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> WebGLRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">THREE</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/three.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 自执行异步函数用于设置演示场景</span></span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 初始化窗口尺寸</span></span>
<span class="line">            <span class="token keyword">let</span> <span class="token constant">WIDTH</span> <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">let</span> <span class="token constant">HEIGHT</span> <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// === THREE.JS 设置 ===</span></span>
<span class="line">            <span class="token comment">// 创建带抗锯齿和模板缓冲的Three.js WebGL渲染器</span></span>
<span class="line">            <span class="token keyword">const</span> threeRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">stencil</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 配置Three.js渲染器尺寸和背景色</span></span>
<span class="line">            threeRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            threeRenderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xdddddd</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 浅灰色背景</span></span>
<span class="line">            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>threeRenderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建Three.js场景</span></span>
<span class="line">            <span class="token keyword">const</span> scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 设置70°视野的透视相机</span></span>
<span class="line">            <span class="token keyword">const</span> threeCamera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token constant">WIDTH</span> <span class="token operator">/</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            threeCamera<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span> <span class="token comment">// 将相机后移以查看场景</span></span>
<span class="line">            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>threeCamera<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建立方体网格</span></span>
<span class="line">            <span class="token keyword">const</span> boxGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> basicMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x0095dd</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 蓝色材质</span></span>
<span class="line">            <span class="token keyword">const</span> cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>boxGeometry<span class="token punctuation">,</span> basicMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cube<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// === PIXI.JS 设置 ===</span></span>
<span class="line">            <span class="token comment">// 创建与Three.js共享WebGL上下文的PixiJS渲染器</span></span>
<span class="line">            <span class="token keyword">const</span> pixiRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 使用共享上下文初始化PixiJS渲染器</span></span>
<span class="line">            <span class="token keyword">await</span> pixiRenderer<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">context</span><span class="token operator">:</span> threeRenderer<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token constant">WIDTH</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token constant">HEIGHT</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">clearBeforeRender</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不清空画布，由Three.js处理</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建PixiJS场景图</span></span>
<span class="line">            <span class="token keyword">const</span> stage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建黄色圆角矩形UI元素</span></span>
<span class="line">            <span class="token keyword">const</span> uiLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roundRect</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0xffff00</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 添加文字覆盖层</span></span>
<span class="line">            <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;Pixi and Three.js&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;Arial&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            uiLayer<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>uiLayer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 动画循环</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 持续旋转立方体</span></span>
<span class="line">                cube<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">0.01</span><span class="token punctuation">;</span></span>
<span class="line">                cube<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">0.01</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 使用正弦波动画化UI层位置</span></span>
<span class="line">                uiLayer<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.001</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.5</span> <span class="token operator">*</span> <span class="token constant">WIDTH</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 渲染Three.js场景</span></span>
<span class="line">                threeRenderer<span class="token punctuation">.</span><span class="token function">resetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                threeRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> threeCamera<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 渲染PixiJS场景</span></span>
<span class="line">                pixiRenderer<span class="token punctuation">.</span><span class="token function">resetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                pixiRenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">container</span><span class="token operator">:</span> stage <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 继续动画循环</span></span>
<span class="line">                <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 启动动画循环</span></span>
<span class="line">            <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 处理窗口大小调整</span></span>
<span class="line">            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token constant">WIDTH</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span></span>
<span class="line">                <span class="token constant">HEIGHT</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 更新Three.js渲染器</span></span>
<span class="line">                threeRenderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 更新Three.js相机宽高比确保正确渲染</span></span>
<span class="line">                threeCamera<span class="token punctuation">.</span>aspect <span class="token operator">=</span> <span class="token constant">WIDTH</span> <span class="token operator">/</span> <span class="token constant">HEIGHT</span><span class="token punctuation">;</span></span>
<span class="line">                threeCamera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 更新PixiJS渲染器</span></span>
<span class="line">                pixiRenderer<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----><h2 id="_2-5-鼠标轨迹" tabindex="-1"><a class="header-anchor" href="#_2-5-鼠标轨迹"><span>2.5 鼠标轨迹</span></a></h2><ul><li>代码</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">    <span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Assets<span class="token punctuation">,</span> Point<span class="token punctuation">,</span> MeshRope <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 创建应用程序</span></span>
<span class="line">      <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 初始化应用程序</span></span>
<span class="line">      <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">          <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#1099bb&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">          <span class="token literal-property property">height</span><span class="token operator">:</span><span class="token number">600</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">width</span><span class="token operator">:</span><span class="token number">800</span><span class="token punctuation">,</span> </span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 将应用程序添加到页面上</span></span>
<span class="line">      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 加载图片到纹理上</span></span>
<span class="line">      <span class="token keyword">const</span> trailTexture <span class="token operator">=</span> <span class="token keyword">await</span> Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/trail.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">const</span> historyX <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> historyY <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">// historySize决定了足迹的长度</span></span>
<span class="line">      <span class="token keyword">const</span> historySize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">// ropeSize决定了步道的平滑程度</span></span>
<span class="line">      <span class="token keyword">const</span> ropeSize <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 创建历史集合</span></span>
<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> historySize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//历史x点于历史y点都为20个</span></span>
<span class="line">        historyX<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        historyY<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">// 创建轨迹点集合</span></span>
<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ropeSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        points<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">//创建一个网绳</span></span>
<span class="line">      <span class="token keyword">const</span> rope <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MeshRope</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">texture</span><span class="token operator">:</span> trailTexture<span class="token punctuation">,</span> points <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 应用于混合模式</span></span>
<span class="line">      rope<span class="token punctuation">.</span>blendmode <span class="token operator">=</span> <span class="token string">&quot;add&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>rope<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">let</span> mouseposition <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">//开启事件装填是</span></span>
<span class="line">      app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>eventMode <span class="token operator">=</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">//点击范围</span></span>
<span class="line">      app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>hitArea <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">;</span></span>
<span class="line">      <span class="token comment">//鼠标移动</span></span>
<span class="line">      app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//判断是否为空 如果为空设定为0</span></span>
<span class="line">        mouseposition <span class="token operator">=</span> mouseposition <span class="token operator">||</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//鼠标的x轴 于鼠标的y轴</span></span>
<span class="line">        mouseposition<span class="token punctuation">.</span>x <span class="token operator">=</span> event<span class="token punctuation">.</span>global<span class="token punctuation">.</span>x<span class="token punctuation">;</span></span>
<span class="line">        mouseposition<span class="token punctuation">.</span>y <span class="token operator">=</span> event<span class="token punctuation">.</span>global<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token comment">// 监听动画并更新</span></span>
<span class="line">      app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mouseposition<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 更新鼠标的值对于历史数据</span></span>
<span class="line">        <span class="token comment">// 每次鼠标移动都会留有x与y值</span></span>
<span class="line">        <span class="token comment">// 每帧都会获取对应的x与y轴</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">//删除最后一个</span></span>
<span class="line">        historyX<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//添加开头</span></span>
<span class="line">        historyX<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>mouseposition<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        historyY<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        historyY<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>mouseposition<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 由于图片是个轨迹状的图片  变形后也是有尾迹的</span></span>
<span class="line">        <span class="token comment">//下面的三次插值 为了轨迹更平滑弄出的计算公式 只需调用即可</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 更新这些点以与历史记录相对应。</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ropeSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">const</span> p <span class="token operator">=</span> points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">          <span class="token comment">// 使用三次插值平滑曲线，以防止出现锐边。</span></span>
<span class="line">          <span class="token keyword">const</span> ix <span class="token operator">=</span> <span class="token function">cubicInterpolation</span><span class="token punctuation">(</span>historyX<span class="token punctuation">,</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> ropeSize<span class="token punctuation">)</span> <span class="token operator">*</span> historySize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">const</span> iy <span class="token operator">=</span> <span class="token function">cubicInterpolation</span><span class="token punctuation">(</span>historyY<span class="token punctuation">,</span> <span class="token punctuation">(</span>i <span class="token operator">/</span> ropeSize<span class="token punctuation">)</span> <span class="token operator">*</span> historySize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">          <span class="token comment">//当前点 等于计算出来的点</span></span>
<span class="line">          p<span class="token punctuation">.</span>x <span class="token operator">=</span> ix<span class="token punctuation">;</span></span>
<span class="line">          p<span class="token punctuation">.</span>y <span class="token operator">=</span> iy<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      <span class="token doc-comment comment">/**</span>
<span class="line">       * 基于以下公式的三次插值 https://github.com/osuushi/Smooth.js</span>
<span class="line">       */</span></span>
<span class="line">      <span class="token keyword">function</span> <span class="token function">clipInput</span><span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">&gt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> k <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">function</span> <span class="token function">getTangent</span><span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> factor<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span>factor <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">clipInput</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">clipInput</span><span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">      <span class="token keyword">function</span> <span class="token function">cubicInterpolation</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> t<span class="token punctuation">,</span> tangentFactor <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> k <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">getTangent</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> tangentFactor<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getTangent</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> tangentFactor<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">clipInput</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">clipInput</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        t <span class="token operator">-=</span> k<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> t2 <span class="token operator">=</span> t <span class="token operator">*</span> t<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> t3 <span class="token operator">=</span> t <span class="token operator">*</span> t2<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> t3 <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> t2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t3 <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> t2 <span class="token operator">+</span> t<span class="token punctuation">)</span> <span class="token operator">*</span> m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span> <span class="token operator">*</span> t3 <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">*</span> t2<span class="token punctuation">)</span> <span class="token operator">*</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>t3 <span class="token operator">-</span> t2<span class="token punctuation">)</span> <span class="token operator">*</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----><h2 id="_2-6-屏幕截图" tabindex="-1"><a class="header-anchor" href="#_2-6-屏幕截图"><span>2.6 屏幕截图</span></a></h2><ul><li>代码</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Assets<span class="token punctuation">,</span> Container<span class="token punctuation">,</span> Sprite<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> TextStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 创建应用程序</span></span>
<span class="line">            <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 初始化应用程序</span></span>
<span class="line">            <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#111&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 添加用用程序画布到桌面上</span></span>
<span class="line">            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建一个新的应用程序</span></span>
<span class="line">            <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 创建容器框架</span></span>
<span class="line">            <span class="token keyword">const</span> containerFrame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 将第一个容器添加到容器框架中</span></span>
<span class="line">            containerFrame<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 应用框架添加到舞台上</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>containerFrame<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 加载兔子图片纹理</span></span>
<span class="line">            <span class="token keyword">const</span> texture <span class="token operator">=</span> <span class="token keyword">await</span> Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/bunny.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 创建5x5的兔子网格在容器上</span></span>
<span class="line">            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">25</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//纹理添加到精灵里</span></span>
<span class="line">                <span class="token keyword">const</span> bunny <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>texture<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                bunny<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">;</span></span>
<span class="line">                bunny<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>i <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">;</span></span>
<span class="line">                container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>bunny<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 移动框架容器到屏幕中央</span></span>
<span class="line">            containerFrame<span class="token punctuation">.</span>x <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">            containerFrame<span class="token punctuation">.</span>y <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 将兔子精灵居中放置在本地容器坐标中</span></span>
<span class="line">            <span class="token comment">// pivot 此显示对象在其局部空间中的旋转、缩放和倾斜中心。该位置是枢轴在父对象局部空间中的投影。</span></span>
<span class="line">            container<span class="token punctuation">.</span>pivot<span class="token punctuation">.</span>x <span class="token operator">=</span> container<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">            container<span class="token punctuation">.</span>pivot<span class="token punctuation">.</span>y <span class="token operator">=</span> container<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 监听动画更新</span></span>
<span class="line">            app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">time</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//不断旋转容器！</span></span>
<span class="line">                <span class="token comment">//*使用delta创建与帧无关的变换*</span></span>
<span class="line">                container<span class="token punctuation">.</span>rotation <span class="token operator">-=</span> <span class="token number">0.01</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">let</span> screenshot<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 截取截图并下载</span></span>
<span class="line">            <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">takeScreenshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//如果对象不为空 直接清理</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>screenshot <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    screenshot<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token comment">//渲染停止</span></span>
<span class="line">                app<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//当前东起转换成base64数据</span></span>
<span class="line">                <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>extract<span class="token punctuation">.</span><span class="token function">base64</span><span class="token punctuation">(</span>containerFrame<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 创建a标签</span></span>
<span class="line">                screenshot <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// a标签加入</span></span>
<span class="line">                document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>screenshot<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// a标签的位置</span></span>
<span class="line">                screenshot<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">&quot;fixed&quot;</span><span class="token punctuation">;</span></span>
<span class="line">                screenshot<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">&quot;20px&quot;</span><span class="token punctuation">;</span></span>
<span class="line">                screenshot<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">&quot;20px&quot;</span><span class="token punctuation">;</span></span>
<span class="line">                screenshot<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&quot;screenshot&quot;</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//给予其赋值 如果点击就会下载</span></span>
<span class="line">                screenshot<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//创建图片对象</span></span>
<span class="line">                <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//宽度为屏幕的五分之一</span></span>
<span class="line">                image<span class="token punctuation">.</span>width <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//设置url</span></span>
<span class="line">                image<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//将image的html代码 放入到截屏标签中</span></span>
<span class="line">                screenshot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> image<span class="token punctuation">.</span>outerHTML<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 设置渲染开始</span></span>
<span class="line">                app<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// 设置可以监控</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>eventMode <span class="token operator">=</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 点击页面大小，整个页面</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>hitArea <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 用户按下鼠标时 执行截图方法</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pointerdown&quot;</span><span class="token punctuation">,</span> takeScreenshot<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 新增文本风格</span></span>
<span class="line">            <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">&quot;Roboto&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&quot;#999&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 创建截屏文字</span></span>
<span class="line">            <span class="token keyword">const</span> screenshotText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;点击可以截屏&quot;</span><span class="token punctuation">,</span> style <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 截屏文字x位置 屏幕的宽度减去文字宽度的一半    y位置 文字高度的一半</span></span>
<span class="line">            screenshotText<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">-</span> screenshotText<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            screenshotText<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>screenshotText<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 将文本添加到舞台上</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>screenshotText<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----><h2 id="_2-7-碰撞检测" tabindex="-1"><a class="header-anchor" href="#_2-7-碰撞检测"><span>2.7 碰撞检测</span></a></h2><ul><li>代码</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Assets<span class="token punctuation">,</span> Point<span class="token punctuation">,</span> Sprite<span class="token punctuation">,</span> Texture <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 基于下面这篇文章</span></span>
<span class="line">        <span class="token comment">// https://spicyyoghurt.com/tutorials/html5-javascript-game-development/collision-detection-physics</span></span>
<span class="line">        <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 创建应用程序</span></span>
<span class="line">            <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 初始化应用程序</span></span>
<span class="line">            <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#111&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 应用程序画布加载到页面上</span></span>
<span class="line">            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 对象交互的反应</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 红色方块的移动速度</span></span>
<span class="line">            <span class="token keyword">const</span> movementSpeed <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 两个物体之间的冲击力</span></span>
<span class="line">            <span class="token keyword">const</span> impulsePower <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//命中测试</span></span>
<span class="line">            <span class="token comment">//两个不同方格之间的基本AABB检查</span></span>
<span class="line">            <span class="token comment">//object1 绿色方块 object2 红色方块</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">testForAABB</span><span class="token punctuation">(</span><span class="token parameter">object1<span class="token punctuation">,</span> object2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> bounds1 <span class="token operator">=</span> object1<span class="token punctuation">.</span><span class="token function">getBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">const</span> bounds2 <span class="token operator">=</span> object2<span class="token punctuation">.</span><span class="token function">getBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 四个条件都满足才是出现碰撞</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">                    bounds1<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> bounds2<span class="token punctuation">.</span>x <span class="token operator">+</span> bounds2<span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span></span>
<span class="line">                    bounds1<span class="token punctuation">.</span>x <span class="token operator">+</span> bounds1<span class="token punctuation">.</span>width <span class="token operator">&gt;</span> bounds2<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span></span>
<span class="line">                    bounds1<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> bounds2<span class="token punctuation">.</span>y <span class="token operator">+</span> bounds2<span class="token punctuation">.</span>height <span class="token operator">&amp;&amp;</span></span>
<span class="line">                    bounds1<span class="token punctuation">.</span>y <span class="token operator">+</span> bounds1<span class="token punctuation">.</span>height <span class="token operator">&gt;</span> bounds2<span class="token punctuation">.</span>y</span>
<span class="line">                <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//计算碰撞的结果，使我们能够给出一个脉冲将物体铲开</span></span>
<span class="line">            <span class="token comment">// object1 绿色方块 object2 红色方块</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">collisionResponse</span><span class="token punctuation">(</span><span class="token parameter">object1<span class="token punctuation">,</span> object2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 都不存在 直接返回0点位置</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>object1 <span class="token operator">||</span> <span class="token operator">!</span>object2<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token comment">// 碰撞位置</span></span>
<span class="line">                <span class="token keyword">const</span> vCollision <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>object2<span class="token punctuation">.</span>x <span class="token operator">-</span> object1<span class="token punctuation">.</span>x<span class="token punctuation">,</span> object2<span class="token punctuation">.</span>y <span class="token operator">-</span> object1<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 斜线距离</span></span>
<span class="line">                <span class="token keyword">const</span> distance <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>object2<span class="token punctuation">.</span>x <span class="token operator">-</span> object1<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>object2<span class="token punctuation">.</span>x <span class="token operator">-</span> object1<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>object2<span class="token punctuation">.</span>y <span class="token operator">-</span> object1<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>object2<span class="token punctuation">.</span>y <span class="token operator">-</span> object1<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 碰撞规范 直角边/斜边</span></span>
<span class="line">                <span class="token keyword">const</span> vCollisionNorm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>vCollision<span class="token punctuation">.</span>x <span class="token operator">/</span> distance<span class="token punctuation">,</span> vCollision<span class="token punctuation">.</span>y <span class="token operator">/</span> distance<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 相对速度</span></span>
<span class="line">                <span class="token keyword">const</span> vRelativeVelocity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>object1<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x <span class="token operator">-</span> object2<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x<span class="token punctuation">,</span> object1<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y <span class="token operator">-</span> object2<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 速度</span></span>
<span class="line">                <span class="token keyword">const</span> speed <span class="token operator">=</span> vRelativeVelocity<span class="token punctuation">.</span>x <span class="token operator">*</span> vCollisionNorm<span class="token punctuation">.</span>x <span class="token operator">+</span> vRelativeVelocity<span class="token punctuation">.</span>y <span class="token operator">*</span> vCollisionNorm<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 推动</span></span>
<span class="line">                <span class="token keyword">const</span> impulse <span class="token operator">=</span> <span class="token punctuation">(</span>impulsePower <span class="token operator">*</span> speed<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>object1<span class="token punctuation">.</span>mass <span class="token operator">+</span> object2<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>impulse <span class="token operator">*</span> vCollisionNorm<span class="token punctuation">.</span>x<span class="token punctuation">,</span> impulse <span class="token operator">*</span> vCollisionNorm<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//计算两个给定点之间的距离</span></span>
<span class="line">            <span class="token comment">// p1当前鼠标的x轴与y值的值，p2红色方块中心点的位置</span></span>
<span class="line">            <span class="token keyword">function</span> <span class="token function">distanceBetweenTwoPoints</span><span class="token punctuation">(</span><span class="token parameter">p1<span class="token punctuation">,</span> p2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> a <span class="token operator">=</span> p1<span class="token punctuation">.</span>x <span class="token operator">-</span> p2<span class="token punctuation">.</span>x<span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">const</span> b <span class="token operator">=</span> p1<span class="token punctuation">.</span>y <span class="token operator">-</span> p2<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//  Math.hypot函数返回所有参数的平方和的平方根，</span></span>
<span class="line">                <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">hypot</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 我们要移动的绿色方块</span></span>
<span class="line">            <span class="token keyword">const</span> greenSquare <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>Texture<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 设置精灵所在的位置</span></span>
<span class="line">            greenSquare<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            greenSquare<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">            greenSquare<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 给精灵涂上颜色</span></span>
<span class="line">            greenSquare<span class="token punctuation">.</span>tint <span class="token operator">=</span> <span class="token number">0x00ff00</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 非精灵自带的值 加速</span></span>
<span class="line">            greenSquare<span class="token punctuation">.</span>acceleration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 质量</span></span>
<span class="line">            greenSquare<span class="token punctuation">.</span>mass <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 你移动的方块</span></span>
<span class="line">            <span class="token keyword">const</span> redSquare <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>Texture<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            redSquare<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            redSquare<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">            redSquare<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">            redSquare<span class="token punctuation">.</span>tint <span class="token operator">=</span> <span class="token number">0xff0000</span><span class="token punctuation">;</span></span>
<span class="line">            redSquare<span class="token punctuation">.</span>acceleration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            redSquare<span class="token punctuation">.</span>mass <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">const</span> mouseCoords <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>eventMode <span class="token operator">=</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//设置可以点击的大小</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>hitArea <span class="token operator">=</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//一直检测鼠标位置 并赋值</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                mouseCoords<span class="token punctuation">.</span>x <span class="token operator">=</span> event<span class="token punctuation">.</span>global<span class="token punctuation">.</span>x<span class="token punctuation">;</span></span>
<span class="line">                mouseCoords<span class="token punctuation">.</span>y <span class="token operator">=</span> event<span class="token punctuation">.</span>global<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 监听动画更新</span></span>
<span class="line">            app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">time</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> delta <span class="token operator">=</span> time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 对两个方块应用减速，每次循环将加速度减少0.01%</span></span>
<span class="line">                <span class="token comment">// 这个点会越来越低</span></span>
<span class="line">                redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">0.99</span><span class="token punctuation">,</span> redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">0.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">0.99</span><span class="token punctuation">,</span> greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">0.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">,</span> greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 检查绿色方块是否移出屏幕 如果是这样，则沿该方向反向加速</span></span>
<span class="line">                <span class="token comment">//如果x轴 超过两侧</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>greenSquare<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> greenSquare<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x<span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token comment">// 如果y轴超过两侧</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>greenSquare<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> greenSquare<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span>greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 如果绿色方块跳出警戒线，它会弹回到中间</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>greenSquare<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">30</span> <span class="token operator">||</span> greenSquare<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">30</span> <span class="token operator">||</span> greenSquare<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">30</span> <span class="token operator">||</span> greenSquare<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    greenSquare<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 在屏幕内执行下列动作（如果鼠标不在屏幕上，则不再更新）</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">&gt;</span> mouseCoords<span class="token punctuation">.</span>x <span class="token operator">||</span> mouseCoords<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">||</span> app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">&gt;</span> mouseCoords<span class="token punctuation">.</span>y <span class="token operator">||</span> mouseCoords<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">// 获取红色方块的中心点</span></span>
<span class="line">                    <span class="token keyword">const</span> redSquareCenterPosition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>redSquare<span class="token punctuation">.</span>x <span class="token operator">+</span> redSquare<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> redSquare<span class="token punctuation">.</span>y <span class="token operator">+</span> redSquare<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 计算鼠标指针和红色方块</span></span>
<span class="line">                    <span class="token keyword">const</span> toMouseDirection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>mouseCoords<span class="token punctuation">.</span>x <span class="token operator">-</span> redSquareCenterPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span> mouseCoords<span class="token punctuation">.</span>y <span class="token operator">-</span> redSquareCenterPosition<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 使用上述方法计算出方向的角度  atan2 返回值再 -PI与PI之间 代表旋转的角度在0度与360度之间</span></span>
<span class="line">                    <span class="token keyword">const</span> angleToMouse <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>toMouseDirection<span class="token punctuation">.</span>y<span class="token punctuation">,</span> toMouseDirection<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 计算出方块应该行驶的速度，作为红色方块距离鼠标指针多远的函数</span></span>
<span class="line">                    <span class="token comment">// 算出方块中的斜线</span></span>
<span class="line">                    <span class="token keyword">const</span> distMouseRedSquare <span class="token operator">=</span> <span class="token function">distanceBetweenTwoPoints</span><span class="token punctuation">(</span>mouseCoords<span class="token punctuation">,</span> redSquareCenterPosition<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// 获取新的速度</span></span>
<span class="line">                    <span class="token keyword">const</span> redSpeed <span class="token operator">=</span> distMouseRedSquare <span class="token operator">*</span> movementSpeed<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 计算红色方块的加速度</span></span>
<span class="line">                    redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angleToMouse<span class="token punctuation">)</span> <span class="token operator">*</span> redSpeed<span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angleToMouse<span class="token punctuation">)</span> <span class="token operator">*</span> redSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 如果两个方块相撞</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">testForAABB</span><span class="token punctuation">(</span>greenSquare<span class="token punctuation">,</span> redSquare<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//计算以下两种情况之间应发生的加速度变化</span></span>
<span class="line">                    <span class="token comment">//每个方块都是碰撞的结果</span></span>
<span class="line">                    <span class="token keyword">const</span> collisionPush <span class="token operator">=</span> <span class="token function">collisionResponse</span><span class="token punctuation">(</span>greenSquare<span class="token punctuation">,</span> redSquare<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 设置两个方块的加速度变化</span></span>
<span class="line">                    redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>collisionPush<span class="token punctuation">.</span>x <span class="token operator">*</span> greenSquare<span class="token punctuation">.</span>mass<span class="token punctuation">,</span> collisionPush<span class="token punctuation">.</span>y <span class="token operator">*</span> greenSquare<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// 绿色获取相反的加速度</span></span>
<span class="line">                    greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span>collisionPush<span class="token punctuation">.</span>x <span class="token operator">*</span> redSquare<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token punctuation">(</span>collisionPush<span class="token punctuation">.</span>y <span class="token operator">*</span> redSquare<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token comment">// 加速度会一直消减的</span></span>
<span class="line">                <span class="token comment">//x位置 随着加速度一直变化</span></span>
<span class="line">                greenSquare<span class="token punctuation">.</span>x <span class="token operator">+=</span> greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="line">                greenSquare<span class="token punctuation">.</span>y <span class="token operator">+=</span> greenSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//红色方块也是一样</span></span>
<span class="line">                redSquare<span class="token punctuation">.</span>x <span class="token operator">+=</span> redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>x <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="line">                redSquare<span class="token punctuation">.</span>y <span class="token operator">+=</span> redSquare<span class="token punctuation">.</span>acceleration<span class="token punctuation">.</span>y <span class="token operator">*</span> delta<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 加载到舞台上</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>redSquare<span class="token punctuation">,</span> greenSquare<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----><h2 id="_2-8-旋转器" tabindex="-1"><a class="header-anchor" href="#_2-8-旋转器"><span>2.8 旋转器</span></a></h2><ul><li>代码</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">    <span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Assets<span class="token punctuation">,</span> Container<span class="token punctuation">,</span> Graphics<span class="token punctuation">,</span> Point<span class="token punctuation">,</span> Sprite <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../js/pixi.mjs&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 创建新的PixiJS应用实例</span></span>
<span class="line">        <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 初始化应用配置（开启抗锯齿/设置背景色/自动适应窗口）</span></span>
<span class="line">        <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> </span>
<span class="line">            <span class="token literal-property property">antialias</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#1099bb&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 将应用画布添加到网页body中</span></span>
<span class="line">        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 加载纹理资源（旋转背景图/圆形元素图）</span></span>
<span class="line">        <span class="token keyword">await</span> Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">            <span class="token string">&quot;../assets/images/bg_scene_rotate.jpg&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token string">&quot;../assets/images/bg_rotate.jpg&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">            <span class="token string">&quot;../assets/images/circle.png&quot;</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">/* ---------------------------------------</span>
<span class="line">        变化形式1 正方形径向变化</span>
<span class="line">        -------------------------------------- */</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token function-variable function">generateSpinner1</span> <span class="token operator">=</span> <span class="token parameter">position</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 新建一个容器</span></span>
<span class="line">            <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//容器的位置</span></span>
<span class="line">            container<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//将容器加载到页面上</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//上面展示图片</span></span>
<span class="line">            <span class="token keyword">const</span> base <span class="token operator">=</span> Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/bg_scene_rotate.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            base<span class="token punctuation">.</span>width <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line">            base<span class="token punctuation">.</span>height <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//下面展示图片</span></span>
<span class="line">            <span class="token keyword">const</span> bottom <span class="token operator">=</span> Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/bg_rotate.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            bottom<span class="token punctuation">.</span>width <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line">            bottom<span class="token punctuation">.</span>height <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">const</span> mask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            mask<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//基础精灵加载上遮罩</span></span>
<span class="line">            base<span class="token punctuation">.</span>mask <span class="token operator">=</span> mask<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//整个页面也加上纹理</span></span>
<span class="line">            window<span class="token punctuation">.</span>mask <span class="token operator">=</span> mask<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//容器中将三者都加入子元素中</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>bottom<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//这个精灵在上面 但是mask 并没有大小 还是显示的是这个精灵  后续如果增大 会将整个纹理覆盖 只会显示下面的精灵</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 阶段</span></span>
<span class="line">            <span class="token keyword">let</span> phase <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//改变的是mask遮罩，这个数据以自身为中心点，所以会有负值 以坐标轴为原点调整要展示的数据</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token parameter">delta</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 更新阶段</span></span>
<span class="line">                <span class="token comment">// 每次加上每帧时间的的60分之一</span></span>
<span class="line">                phase <span class="token operator">+=</span> delta <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 阶段每次除以360度 如果能除下 phase会第一次等于0</span></span>
<span class="line">                phase <span class="token operator">%=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 计算目标点</span></span>
<span class="line">                <span class="token comment">//通过正弦与余弦计算 位置</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 2π 一个循环</span></span>
<span class="line">                <span class="token comment">// 开始值(phase - Math.PI / 2)  负二分之一π 值为0</span></span>
<span class="line">                <span class="token comment">// sin 0 到1 1到-1 -1到0</span></span>
<span class="line">                <span class="token keyword">const</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>phase <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 2π 一个循环</span></span>
<span class="line">                <span class="token comment">// 开始值(phase - Math.PI / 2)  负二分之一π 值为-1</span></span>
<span class="line">                <span class="token comment">// sin -1 到1 然后1到-1</span></span>
<span class="line">                <span class="token keyword">const</span> y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phase <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// console.log(delta, phase, phase - Math.PI / 2, x, y);</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 四个边 每两个数字是一个点</span></span>
<span class="line">                <span class="token keyword">const</span> segments <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 上部</span></span>
<span class="line">                    <span class="token punctuation">[</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 右边</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 下边</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 左边</span></span>
<span class="line">                <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 找到线段相交的点</span></span>
<span class="line">                <span class="token keyword">let</span> intersection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//弯曲值为0</span></span>
<span class="line">                <span class="token keyword">let</span> winding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 每次循环都按照顺时针循环</span></span>
<span class="line">                <span class="token comment">// 循环中每次都按照 每条边进行循环</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> segments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">const</span> segment <span class="token operator">=</span> segments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//获取相交的x与y点</span></span>
<span class="line">                    <span class="token keyword">const</span> hit <span class="token operator">=</span> <span class="token function">intersect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">//如果相交点存在</span></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>hit<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        intersection <span class="token operator">=</span> hit<span class="token punctuation">;</span></span>
<span class="line">                        <span class="token comment">//判断如果相交的点为负数 就是第五部分</span></span>
<span class="line">                        <span class="token comment">// 从最上边的中间开始走到末尾 winding等于0</span></span>
<span class="line">                        <span class="token comment">// 从最上边开始走到中间 winding 等于 4</span></span>
<span class="line">                        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> winding <span class="token operator">=</span> hit<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token keyword">else</span> winding <span class="token operator">=</span> i<span class="token punctuation">;</span></span>
<span class="line">                        <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//角度</span></span>
<span class="line">                <span class="token keyword">const</span> corners <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 右上角</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 右下角</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 左下角</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 左上角</span></span>
<span class="line">                    <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 结束点</span></span>
<span class="line">                <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 重绘遮罩</span></span>
<span class="line">                mask<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>intersection<span class="token punctuation">.</span>x<span class="token punctuation">,</span> intersection<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 充满角</span></span>
<span class="line">                <span class="token comment">// 直接连接可以连接的每个点 越往后连接的越少</span></span>
<span class="line">                <span class="token comment">// 开始值为0 形成一个 缺少（0度 - 45度）的多边形</span></span>
<span class="line">                <span class="token comment">// 值为1 形成一个 缺少0度到135度的多边形</span></span>
<span class="line">                <span class="token comment">// 值为2 形成一个 缺少0度到225度的多边形</span></span>
<span class="line">                <span class="token comment">// 值为3 形成一个 缺少0度到315度的多边形</span></span>
<span class="line">                <span class="token comment">// 值为4 形成一个 缺少0度到360度的多边形</span></span>
<span class="line"></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> winding<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> corners<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//连接x与y点</span></span>
<span class="line">                    mask<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>corners<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//填充红色 只要填充颜色都会展示数据</span></span>
<span class="line">                mask<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">/* -----------------------</span>
<span class="line">        Spinner. 3 缩放球</span>
<span class="line">        ---------------------- */</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token function-variable function">generateSpinner2</span> <span class="token operator">=</span> <span class="token parameter">position</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//新建一个容器</span></span>
<span class="line">            <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//容器位置判断</span></span>
<span class="line">            container<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//在舞台上添加</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置大小</span></span>
<span class="line">            <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//小球数量</span></span>
<span class="line">            <span class="token keyword">const</span> ballAmount <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//球的集合</span></span>
<span class="line">            <span class="token keyword">const</span> balls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//数量循环</span></span>
<span class="line">            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ballAmount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//加载纹理</span></span>
<span class="line">                <span class="token keyword">const</span> ball <span class="token operator">=</span> Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/circle.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//设置锚点</span></span>
<span class="line">                ball<span class="token punctuation">.</span>anchor<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//加入舞台上</span></span>
<span class="line">                container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//设置球的位置</span></span>
<span class="line">                <span class="token comment">//通过余弦与正弦设置x与y 环绕着中心点放位置</span></span>
<span class="line">                <span class="token comment">//(i / ballAmount) * Math.PI * 2  </span></span>
<span class="line">                <span class="token comment">// 计算结果: 0  2π/7（约0.88） 4π/7（约1.76） 6π/7（约2.64） 8π/7（约3.52） 10π/7（约4.40） 12π/7（约5.28）</span></span>
<span class="line">                <span class="token comment">//cos 1 0.62 -0.22 -0.90 -0.90 -0.22 0.62</span></span>
<span class="line">                <span class="token comment">//sin 0 0.78 0.97 0.43 -0.43 -0.97 -0.78</span></span>
<span class="line">                <span class="token comment">//最后除以3 防止超过设定的值的二分之一</span></span>
<span class="line">                <span class="token comment">//以size/2为坐标轴原点，所有的数据围绕着这个点循环</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//最终的x与y的坐标   83.3 50   70.7 76.0   42.5 82.4   19.9 64.4   19.9 35.5   42.5 17.5   70.7 23.9</span></span>
<span class="line">                ball<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">/</span> ballAmount<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">,</span> </span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">/</span> ballAmount<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span></span>
<span class="line">                <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//加入集合</span></span>
<span class="line">                balls<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 阶段</span></span>
<span class="line">            <span class="token keyword">let</span> phase <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> <span class="token parameter">delta</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 更新阶段</span></span>
<span class="line">                phase <span class="token operator">+=</span> delta <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span></span>
<span class="line">                phase <span class="token operator">%=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 修改球的大小</span></span>
<span class="line">                balls<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">b<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//根据页面缓缓增大</span></span>
<span class="line">                    <span class="token comment">//使用这些数据 0  π/7  2π/7  3π/7 4π/7  5π/7  6π/7 减去一个0-2π的值</span></span>
<span class="line">                    <span class="token comment">// 最后值都在-1到1之间循环</span></span>
<span class="line">                    <span class="token comment">//因为减去的相同，都是按照曲线获取的值 相隔一个π/7</span></span>
<span class="line">                    <span class="token keyword">const</span> sin <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">/</span> ballAmount<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">-</span> phase<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// 将sin与自身相乘，得到更陡峭的边缘。</span></span>
<span class="line">                    <span class="token comment">// 0.5 - 0.9 再0.9 - 0.5 定期修改</span></span>
<span class="line">                    <span class="token comment">// 最低是0.5 也是值为0的时候</span></span>
<span class="line">                    <span class="token comment">// Math.abs 计算数据的绝对值，不管是什么最后都等于正数</span></span>
<span class="line">                    b<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>sin <span class="token operator">*</span> sin <span class="token operator">*</span> sin <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">/* ---------------------</span>
<span class="line">        Spinner 3. 径向遮罩</span>
<span class="line">        -------------------- */</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token function-variable function">generateSpinner3</span> <span class="token operator">=</span> <span class="token parameter">position</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//新建一个容器</span></span>
<span class="line">            <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//判断位置</span></span>
<span class="line">            container<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//容器加载到舞台上</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//加载精灵</span></span>
<span class="line">            <span class="token keyword">const</span> base <span class="token operator">=</span> Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/bg_scene_rotate.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置大小</span></span>
<span class="line">            base<span class="token punctuation">.</span>width <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line">            base<span class="token punctuation">.</span>height <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置遮罩</span></span>
<span class="line">            <span class="token keyword">const</span> mask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//遮罩中心位置</span></span>
<span class="line">            mask<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//设置遮罩</span></span>
<span class="line">            base<span class="token punctuation">.</span>mask <span class="token operator">=</span> mask<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//也是整个页面的遮罩</span></span>
<span class="line">            window<span class="token punctuation">.</span>mask <span class="token operator">=</span> mask<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//精灵与遮罩都加入到容器中</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//阶段</span></span>
<span class="line">            <span class="token keyword">let</span> phase <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> <span class="token parameter">delta</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 更新阶段 phase 是一个不断增大的数 如果大于2π 就会重新开始</span></span>
<span class="line">                phase <span class="token operator">+=</span> delta <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span></span>
<span class="line">                phase <span class="token operator">%=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//开始角度 -90°  -0.44 也是坐标轴上方的竖线</span></span>
<span class="line">                <span class="token keyword">const</span> angleStart <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//角度</span></span>
<span class="line">                <span class="token keyword">const</span> angle <span class="token operator">=</span> phase <span class="token operator">+</span> angleStart<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//圆角</span></span>
<span class="line">                <span class="token keyword">const</span> radius <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// x1与y1 根据余弦与正弦获取正确的数据</span></span>
<span class="line">                <span class="token keyword">const</span> x1 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>angleStart<span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">const</span> y1 <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>angleStart<span class="token punctuation">)</span> <span class="token operator">*</span> radius<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 重新绘制遮罩</span></span>
<span class="line">                <span class="token comment">// 从0点开始 目标点x1与y1 不停变化的数据</span></span>
<span class="line">                <span class="token comment">// arc 前两个参数 弧的中心点 弧度的半径  弧度的开始点 弧度的结束点 是否逆时针(false代表顺时针)</span></span>
<span class="line">                <span class="token comment">// 代表先从原点画 画到目标点 连接一个弧线  再次连接到原点 形成一个扇形  最后加入颜色</span></span>
<span class="line">                mask<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> radius<span class="token punctuation">,</span> angleStart<span class="token punctuation">,</span> angle<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">/* ---------------------------------</span>
<span class="line">        Spinner 4. 围绕正方形的边</span>
<span class="line">        ------------------------------- */</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token function-variable function">generateSpinner4</span> <span class="token operator">=</span> <span class="token parameter">position</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//新建一个容器</span></span>
<span class="line">            <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//容器的位置</span></span>
<span class="line">            container<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">//圆弧半径</span></span>
<span class="line">            <span class="token keyword">const</span> arcRadius <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//初始化精灵</span></span>
<span class="line">            <span class="token keyword">const</span> base <span class="token operator">=</span> Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;../assets/images/bg_scene_rotate.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//宽度与高度</span></span>
<span class="line">            base<span class="token punctuation">.</span>width <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line">            base<span class="token punctuation">.</span>height <span class="token operator">=</span> size<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 为了获得更好的性能，预先对资产进行设定比遮罩要好。</span></span>
<span class="line">            <span class="token keyword">const</span> roundingMask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 围绕的遮罩 这个遮罩有颜色 会一直展示</span></span>
<span class="line">            roundingMask<span class="token punctuation">.</span><span class="token function">roundRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">,</span> arcRadius<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0x0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            base<span class="token punctuation">.</span>mask <span class="token operator">=</span> roundingMask<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 边缘也可以用图像代替</span></span>
<span class="line">            <span class="token keyword">const</span> lineSize <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> edge <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//创建一个圆角边 是边框(stroke)类型的，外部是红色</span></span>
<span class="line">            edge<span class="token punctuation">.</span><span class="token function">roundRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">,</span> arcRadius<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> lineSize<span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//此示例中的Mask的工作方式与示例1基本相同。</span></span>
<span class="line">            <span class="token comment">//除了它被反转并在边缘中以直线计算遮罩。</span></span>
<span class="line">            <span class="token keyword">const</span> mask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//内部的遮罩</span></span>
<span class="line">            mask<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            edge<span class="token punctuation">.</span>mask <span class="token operator">=</span> mask<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>roundingMask<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>edge<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">let</span> phase <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> <span class="token parameter">delta</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 更新阶段</span></span>
<span class="line">                <span class="token comment">// 除以160 需要更长的时间去获取</span></span>
<span class="line">                phase <span class="token operator">+=</span> delta <span class="token operator">/</span> <span class="token number">160</span><span class="token punctuation">;</span></span>
<span class="line">                phase <span class="token operator">%=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 随时间变化 通过余弦与正弦确认x y变化 计算目标点</span></span>
<span class="line">                <span class="token keyword">const</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>phase <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">const</span> y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>phase <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 线段计算 四个边</span></span>
<span class="line">                <span class="token keyword">const</span> segments <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 上边</span></span>
<span class="line">                    <span class="token punctuation">[</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 右边</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 下边</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 左边</span></span>
<span class="line">                <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 在每个分段处，应屏蔽到哪个目录继续</span></span>
<span class="line">                <span class="token keyword">let</span> outDir <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 找到线段相交的点</span></span>
<span class="line">                <span class="token keyword">let</span> intersection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">let</span> winding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">//在找到撞击后，在撞击线尺寸之前，线应该继续朝哪个方向前进</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> segments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">const</span> segment <span class="token operator">=</span> segments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">//相交的点</span></span>
<span class="line">                    <span class="token keyword">const</span> hit <span class="token operator">=</span> <span class="token function">intersect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> segment<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>hit<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        intersection <span class="token operator">=</span> hit<span class="token punctuation">;</span></span>
<span class="line">                        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> winding <span class="token operator">=</span> hit<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token keyword">else</span> winding <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> <span class="token comment">//这里发生了变动 1与3调换位置</span></span>
<span class="line">                        <span class="token comment">//判断 屏蔽目录</span></span>
<span class="line">                        outDir <span class="token operator">=</span> outDir<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">                        <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//角度</span></span>
<span class="line">                <span class="token keyword">const</span> corners <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span> <span class="token comment">// 左上角,</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> <span class="token comment">// 左下角</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span> <span class="token comment">// 右下角</span></span>
<span class="line">                    size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> lineSize<span class="token punctuation">,</span></span>
<span class="line">                    <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">,</span> <span class="token comment">// 左上角</span></span>
<span class="line">                <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 重绘遮罩</span></span>
<span class="line">                <span class="token comment">// 这些形成一条直线，是竖着的一条线</span></span>
<span class="line">                mask<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>size <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> lineSize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 填充角度</span></span>
<span class="line">                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> winding<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">//循环中连接不同的角</span></span>
<span class="line">                    mask<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>corners<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//首先连接短线的上边与下边</span></span>
<span class="line">                <span class="token comment">//然后连接到原点</span></span>
<span class="line">                <span class="token comment">//最后填充颜色</span></span>
<span class="line">                mask<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>intersection<span class="token punctuation">.</span>x <span class="token operator">+</span> outDir<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> lineSize <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> intersection<span class="token punctuation">.</span>y <span class="token operator">+</span> outDir<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> lineSize <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>intersection<span class="token punctuation">.</span>x<span class="token punctuation">,</span> intersection<span class="token punctuation">.</span>y<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">/* ---------------------</span>
<span class="line">        Spinner 5. 圆矩形定长旋转器</span>
<span class="line">        -------------------- */</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token function-variable function">generateSpinner5</span> <span class="token operator">=</span> <span class="token parameter">position</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">//创建容器</span></span>
<span class="line">            <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置位置</span></span>
<span class="line">            container<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span></span>
<span class="line">            app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置半个圆 颜色红色</span></span>
<span class="line">            <span class="token keyword">const</span> halfCircle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置位置的中心点</span></span>
<span class="line">            halfCircle<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//设置圆角矩形 白色</span></span>
<span class="line">            <span class="token keyword">const</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roundRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xffffff</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//圆角矩形的遮罩使用半圆</span></span>
<span class="line">            rectangle<span class="token punctuation">.</span>mask <span class="token operator">=</span> halfCircle<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//再容器中添加圆角矩形与半圆遮罩</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>halfCircle<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">//阶段</span></span>
<span class="line">            <span class="token keyword">let</span> phase <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> <span class="token parameter">delta</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 更新阶段</span></span>
<span class="line">                phase <span class="token operator">+=</span> delta <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">;</span></span>
<span class="line">                phase <span class="token operator">%=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">                <span class="token comment">//设置旋转角度，每次角度变化 都会将数据改变</span></span>
<span class="line">                halfCircle<span class="token punctuation">.</span>rotation <span class="token operator">=</span> phase<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">const</span> onTick <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token function">generateSpinner1</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function">generateSpinner2</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function">generateSpinner3</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">270</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function">generateSpinner4</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">380</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token function">generateSpinner5</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">490</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// Listen for animate update</span></span>
<span class="line">        app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">time</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// Call tick handling for each spinner.</span></span>
<span class="line">            onTick<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">cb</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token doc-comment comment">/**</span>
<span class="line">         * 帮助方法</span>
<span class="line"></span>
<span class="line">                Paul Bourke的线截距数学http://paulbourke.net/geometry/pointlineplane/</span>
<span class="line">                确定两条线段的交点</span>
<span class="line">                如果线条不相交，则返回FALSE</span>
<span class="line">                对原始代码进行了修改，以匹配pixi示例的linting规则。</span>
<span class="line"></span>
<span class="line">                前四个参数与后四个参数都代表 一条线</span>
<span class="line">                每两个参数代表一个点 </span>
<span class="line">        */</span></span>
<span class="line">        <span class="token keyword">function</span> <span class="token function">intersect</span><span class="token punctuation">(</span><span class="token parameter">x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> x3<span class="token punctuation">,</span> y3<span class="token punctuation">,</span> x4<span class="token punctuation">,</span> y4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 检查每条线的起始位置是否相同 如果相同是个点 不符合判断 直接返回false</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x1 <span class="token operator">===</span> x2 <span class="token operator">&amp;&amp;</span> y1 <span class="token operator">===</span> y2<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>x3 <span class="token operator">===</span> x4 <span class="token operator">&amp;&amp;</span> y3 <span class="token operator">===</span> y4<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 分母</span></span>
<span class="line">            <span class="token keyword">const</span> denominator <span class="token operator">=</span> <span class="token punctuation">(</span>y4 <span class="token operator">-</span> y3<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>x2 <span class="token operator">-</span> x1<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>x4 <span class="token operator">-</span> x3<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>y2 <span class="token operator">-</span> y1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 线条是平行的</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>denominator <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">const</span> ua <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x4 <span class="token operator">-</span> x3<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>y1 <span class="token operator">-</span> y3<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>y4 <span class="token operator">-</span> y3<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>x1 <span class="token operator">-</span> x3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> denominator<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> ub <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x2 <span class="token operator">-</span> x1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>y1 <span class="token operator">-</span> y3<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>y2 <span class="token operator">-</span> y1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>x1 <span class="token operator">-</span> x3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> denominator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 是沿线段的交点</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>ua <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> ua <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">||</span> ub <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> ub <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 返回一个具有交点x和y坐标的对象</span></span>
<span class="line">            <span class="token keyword">const</span> x <span class="token operator">=</span> x1 <span class="token operator">+</span> ua <span class="token operator">*</span> <span class="token punctuation">(</span>x2 <span class="token operator">-</span> x1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">const</span> y <span class="token operator">=</span> y1 <span class="token operator">+</span> ua <span class="token operator">*</span> <span class="token punctuation">(</span>y2 <span class="token operator">-</span> y1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例</li></ul><p><button>开启展示</button></p><!----></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-07-14T11:02:05.000Z" data-allow-mismatch>2025/7/14 11:02</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 857899180@qq.com">zhao-farmer</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/note-front/animation/pixi/example/01.html" aria-label="一、 基础"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">一、 基础</span></div><!--]--></a><a class="route-link auto-link next" href="/note-front/animation/pixi/example/03.html" aria-label="三、 精灵"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">三、 精灵</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/note-front/assets/app-Cok9BT0p.js" defer></script>
  </body>
</html>
