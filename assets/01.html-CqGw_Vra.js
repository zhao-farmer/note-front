import{aq as n,ar as a,as as p,at as e}from"./app-Cok9BT0p.js";const t="/note-front/other/plugin/vscode/001.png",o="/note-front/other/plugin/vscode/002.png",l="/note-front/other/plugin/vscode/003.png",i="/note-front/other/plugin/vscode/004.png",c={};function u(r,s){return e(),a("div",null,s[0]||(s[0]=[p(`<h1 id="一、vs-code-插件开发教程" tabindex="-1"><a class="header-anchor" href="#一、vs-code-插件开发教程"><span>一、VS Code 插件开发教程</span></a></h1><h2 id="_1-1-概述" tabindex="-1"><a class="header-anchor" href="#_1-1-概述"><span>1.1 概述</span></a></h2><p>Visual Studio Code（简称 VS Code）是一款由 Microsoft 开发的开源轻量级编辑器，支持跨平台（Windows、macOS、Linux）。<br> 其最大的优势之一是<strong>强大的插件系统</strong>，开发者可以通过编写扩展（Extension）来增强 VS Code 的功能，比如支持新的编程语言、代码提示、调试器、界面主题等。</p><p>VS Code 插件的主要原理是：</p><ul><li>插件运行在独立的进程（Extension Host）中，不会阻塞编辑器主线程。</li><li>插件通过 <strong>VS Code 提供的 API</strong> 与编辑器进行交互，比如注册命令、添加菜单、修改编辑器行为等。</li><li>插件开发语言主要是 <strong>TypeScript</strong> 或 <strong>JavaScript</strong>，并基于 Node.js 生态。</li></ul><hr><h2 id="_1-2-安装" tabindex="-1"><a class="header-anchor" href="#_1-2-安装"><span>1.2 安装</span></a></h2><h3 id="_1-2-1-vs-code-安装" tabindex="-1"><a class="header-anchor" href="#_1-2-1-vs-code-安装"><span>1.2.1 VS Code 安装</span></a></h3><ol><li>打开 <a href="https://code.visualstudio.com/Download" target="_blank" rel="noopener noreferrer">VS Code 官方下载页面</a>。</li><li>选择对应操作系统（Windows、macOS 或 Linux）。</li><li>按提示进行安装，安装完成后可以通过 <code>code</code> 命令（需要在安装时勾选“添加到 PATH”）在命令行中启动 VS Code。</li></ol><h3 id="_1-2-2-插件开发环境安装" tabindex="-1"><a class="header-anchor" href="#_1-2-2-插件开发环境安装"><span>1.2.2 插件开发环境安装</span></a></h3><p>插件开发需要以下工具：</p><ul><li><strong>yo</strong>（Yeoman 脚手架工具）</li><li><strong>generator-code</strong>（VS Code 插件项目生成器）</li><li><strong>vsce</strong>（VS Code Extension CLI，用于打包和发布插件）</li></ul><p>安装步骤：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 安装 yo 和 generator-code</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> yo generator-code</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 安装 vsce</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @vscode/vsce</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-3-开发" tabindex="-1"><a class="header-anchor" href="#_1-3-开发"><span>1.3 开发</span></a></h2><h3 id="_1-3-1-生成代码" tabindex="-1"><a class="header-anchor" href="#_1-3-1-生成代码"><span>1.3.1 生成代码</span></a></h3><ol><li><p>使用 Yeoman 脚手架生成插件项目：</p><div class="language-cmd line-numbers-mode" data-highlighter="prismjs" data-ext="cmd"><pre><code><span class="line">yo code</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>执行后会有交互式提示，例如：</p><ul><li>选择 &quot;New Extension (TypeScript)&quot;</li><li>输入扩展名称：helloworld</li><li>输入标识符：helloworld</li><li>输入描述：A simple Hello World extension</li><li>是否初始化 Git 仓库：选择 No</li><li>使用打包类型：unbundled</li><li>选择包管理器：pnpm</li></ul></li><li><p>生成完成后，结构信息：</p><ol><li>.vscode/ - VS Code配置文件目录 <ul><li>extensions.json - 推荐插件配置，建议安装ESLint和测试运行器插件</li><li>launch.json - 调试配置文件，定义了运行和调试插件的配置</li><li>settings.json - 工作区设置，控制文件显示和搜索行为，关闭TypeScript自动检测</li><li>tasks.json - 任务配置文件，定义了npm watch任务用于编译TypeScript文件</li></ul></li><li>src/ - 源代码目录 <ul><li>extension.ts - 插件主文件，包含激活和命令实现</li><li>test/ - 测试文件目录 <ul><li>extension.test.ts - 插件测试文件</li></ul></li></ul></li><li>.vscode-test.mjs 配置测试文件</li><li>.vscodeignore - 打包时忽略的文件列表</li><li>CHANGELOG.md - 版本更新日志</li><li>eslint.config.mjs - ESLint代码检查配置</li><li>package.json - 插件配置文件，定义插件名称、版本、命令等</li><li>README.md - 插件说明文档</li><li>tsconfig.json - TypeScript编译配置</li><li>vsc-extension-quickstart.md - VS Code扩展快速入门指南</li></ol></li></ol><h3 id="_1-3-2-package-json-核心配置" tabindex="-1"><a class="header-anchor" href="#_1-3-2-package-json-核心配置"><span>1.3.2 package.json 核心配置</span></a></h3><p>package.json 是插件的描述文件，控制插件如何被 VS Code 加载。主要字段：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-extension&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;displayName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My Extension&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;一个简单的 VS Code 插件示例&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.104.0&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;categories&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&quot;Other&quot;</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./out/extension.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extension.helloWorld&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;vscode:prepublish&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pnpm run compile&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;compile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc -p ./&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc -watch -p ./&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;pretest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pnpm run compile &amp;&amp; pnpm run lint&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vscode-test&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;@types/vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.104.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;@types/mocha&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^10.0.10&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;@types/node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;22.x&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;@typescript-eslint/eslint-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.42.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;@typescript-eslint/parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.42.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.34.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.9.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;@vscode/test-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.0.11&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;@vscode/test-electron&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.5.2&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>核心字段说明：</p><ul><li><strong>name</strong>：插件的唯一 ID（发布后不可更改）。</li><li><strong>displayName</strong>：VS Code Marketplace 上显示的名称。</li><li><strong>version</strong>：插件版本。</li><li><strong>publisher</strong>：发布者名称（需与 Marketplace 发布者一致）。</li><li><strong>engines.vscode</strong>：兼容的 VS Code 版本范围。</li><li><strong>activationEvents</strong>：触发插件激活的事件（如 <code>onCommand</code>、<code>onLanguage</code>、<code>*</code>）。</li><li><strong>main</strong>：插件的入口文件（一般是编译后的 <code>extension.js</code>）。</li><li><strong>contributes</strong>：插件扩展点，例如命令、菜单、快捷键、配置等。</li></ul><h3 id="_1-3-3-extension-ts-核心函数" tabindex="-1"><a class="header-anchor" href="#_1-3-3-extension-ts-核心函数"><span>1.3.3 extension.ts 核心函数</span></a></h3><p>extension.ts 是插件的入口文件，负责插件的生命周期和功能实现。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">&#39;vscode&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 插件被激活时调用</span>
<span class="line"> * <span class="token keyword">@param</span> <span class="token parameter">context</span> 插件上下文对象，包含订阅、全局存储等</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">context</span><span class="token operator">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;插件已激活！&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 注册命令</span></span>
<span class="line">    <span class="token keyword">let</span> disposable <span class="token operator">=</span> vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">&#39;extension.helloWorld&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showInformationMessage</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World from My Extension!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 将命令注册到插件上下文，确保插件卸载时清理资源</span></span>
<span class="line">    context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>disposable<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 插件被停用时调用</span>
<span class="line"> * 通常用于清理资源、保存数据</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>核心点解释：</p><ul><li><strong>activate</strong>：插件激活时执行（如首次运行命令、打开特定文件类型）。</li><li><strong>deactivate</strong>：插件停用时执行，用于清理资源。</li><li><strong>vscode.commands.registerCommand</strong>：注册一个命令（命令 ID 必须和 <code>package.json</code> 中一致）。</li><li><strong>vscode.window.showInformationMessage</strong>：在 VS Code 界面右下角弹出提示消息。</li><li><strong>context.subscriptions</strong>：插件上下文，保存所有注册的资源，确保在插件停用时能正确释放。</li></ul><h2 id="_1-4-hello-world-示例" tabindex="-1"><a class="header-anchor" href="#_1-4-hello-world-示例"><span>1.4 Hello World 示例</span></a></h2><ol><li><p>编辑 <code>src/extension.ts</code>，添加一个最简单的命令：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> vscode <span class="token keyword">from</span> <span class="token string">&#39;vscode&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">context</span><span class="token operator">:</span> vscode<span class="token punctuation">.</span>ExtensionContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;插件已激活！&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> disposable <span class="token operator">=</span> vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">&#39;extension.helloWorld&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showInformationMessage</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World from My Extension!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>disposable<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在 <code>package.json</code> 中配置命令：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string-property property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extension.helloWorld&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行调试：</p><ul><li><p>按 <code>F5</code> 启动调试，会打开一个新的 VS Code 窗口（Extension Development Host）。</p></li><li><p>打开命令面板（<code>Ctrl+Shift+P</code> / <code>Cmd+Shift+P</code>），输入并运行 <strong>Hello World</strong>。</p></li><li><p>会弹出消息 “Hello World from My Extension!”。</p><p><img src="`+t+`" alt=""></p></li></ul></li></ol><h2 id="_1-5-拓展介绍" tabindex="-1"><a class="header-anchor" href="#_1-5-拓展介绍"><span>1.5 拓展介绍</span></a></h2><p>VS Code 插件 API 非常丰富，常见扩展能力包括：</p><ul><li><p><strong>编辑器扩展</strong>：代码高亮、自动补全、格式化器。</p></li><li><p><strong>UI 扩展</strong>：状态栏、活动栏、侧边栏视图。</p></li><li><p><strong>调试扩展</strong>：调试适配器，用于支持新的调试语言。</p></li><li><p><strong>文件系统扩展</strong>：实现虚拟文件系统。</p></li></ul><p>常见配置示例（在 <code>package.json</code> 中添加）：</p><h3 id="_1-5-1-命令-commands" tabindex="-1"><a class="header-anchor" href="#_1-5-1-命令-commands"><span>1.5.1 命令（Commands）</span></a></h3><p>命令是最常见的扩展方式，用户可以在命令面板（Ctrl+Shift+P）或绑定快捷键来触发。</p><ol><li><p><strong>配置（package.json）</strong>：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extension.helloWorld&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><strong>实现（extension.ts）</strong>：</p><pre><code>\`\`\`ts
vscode.commands.registerCommand(&#39;extension.helloWorld&#39;, () =&gt; {
    vscode.window.showInformationMessage(&#39;Hello World!&#39;);
});
\`\`\`
</code></pre><h3 id="_1-5-2-菜单-menus" tabindex="-1"><a class="header-anchor" href="#_1-5-2-菜单-menus"><span>1.5.2 菜单（Menus）</span></a></h3><p>可以把命令挂载到编辑器右键菜单、资源管理器右键菜单等位置。</p><ol><li><p><strong>配置（package.json）</strong>：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string-property property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extension.helloWorld&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-property property">&quot;menus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string-property property">&quot;editor/context&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extension.helloWorld&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token string-property property">&quot;when&quot;</span><span class="token operator">:</span> <span class="token string">&quot;editorLangId == javascript&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token string-property property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;navigation&quot;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>说明：</p><ul><li><p><code>editor/context</code> 表示编辑器内右键菜单。</p></li><li><p><code>when</code> 条件限制了命令只在 JavaScript 文件中出现。</p></li><li><p><code>group</code> 用于控制菜单项的位置（navigation = 导航相关）。</p><ul><li>内置组如 navigation（最顶部）、1_modification、2_workspace等。</li><li><code>@&lt;number&gt;</code>用于排序，如 navigation@1。</li></ul></li><li><p>菜单本身没有名字，只能通过命令 title 来显示，菜单本省command会关联到commands的命令通过command的title显示菜单名称。</p></li></ul></li><li><p>菜单位置由 <code>menus</code> 的 key 决定，比如：</p><ul><li><code>editor/context</code> 编辑器右键菜单</li><li><code>editor/title</code> 编辑器标题栏按钮</li><li><code>editor/title/context</code> 编辑器标题栏右键菜单</li><li><code>explorer/context</code> 资源管理器右键菜单</li><li><code>commandPalette</code> 命令面板（Ctrl+Shift+P）</li><li><code>view/title</code> 视图面板标题栏按钮</li><li><code>scm/title</code> 版本控制标题栏按钮</li></ul></li><li><p>运行结果</p><p><img src="`+o+`" alt=""></p></li></ol><h3 id="_1-5-3-快捷键-keybindings" tabindex="-1"><a class="header-anchor" href="#_1-5-3-快捷键-keybindings"><span>1.5.3 快捷键（Keybindings）</span></a></h3><p>可以为命令绑定快捷键。</p><ol><li><p><strong>配置（package.json）</strong>：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;keybindings&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extension.helloWorld&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ctrl+alt+h&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;when&quot;</span><span class="token operator">:</span> <span class="token string">&quot;editorTextFocus&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>说明：</p><ul><li><code>key</code>：快捷键组合。</li><li><code>when</code>：触发条件，这里是“编辑器有焦点时”。</li></ul></li></ol><h3 id="_1-5-4-状态栏-status-bar-items" tabindex="-1"><a class="header-anchor" href="#_1-5-4-状态栏-status-bar-items"><span>1.5.4 状态栏（Status Bar Items）</span></a></h3><p>可以在底部状态栏添加一个按钮。</p><ol><li><p><strong>实现（extension.ts）</strong>：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> statusBar <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createStatusBarItem</span><span class="token punctuation">(</span>vscode<span class="token punctuation">.</span>StatusBarAlignment<span class="token punctuation">.</span>Right<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">statusBar<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;$(smiley) Hello&quot;</span><span class="token punctuation">;</span></span>
<span class="line">statusBar<span class="token punctuation">.</span>command <span class="token operator">=</span> <span class="token string">&quot;extension.helloWorld&quot;</span><span class="token punctuation">;</span></span>
<span class="line">statusBar<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>statusBar<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>说明：</p><ul><li><code>createStatusBarItem</code> 用于创建状态栏元素。</li><li><code>text</code> 可以包含图标（如 <code>$(smiley)</code>）。</li><li><code>command</code> 绑定点击事件。</li></ul></li><li><p>运行结果</p><p><img src="`+l+`" alt=""></p></li></ol><h3 id="_1-4-5-侧边栏视图-views" tabindex="-1"><a class="header-anchor" href="#_1-4-5-侧边栏视图-views"><span>1.4.5 侧边栏视图（Views）</span></a></h3><p>可以在活动栏（左侧竖栏）添加一个自定义视图。</p><ol><li><p><strong>配置（package.json）</strong>：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;views&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;explorer&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mySidebar&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My Sidebar&quot;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>实现（extension.ts）：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyTreeDataProvider</span> <span class="token keyword">implements</span> <span class="token class-name">vscode<span class="token punctuation">.</span>TreeDataProvider</span><span class="token operator">&lt;</span>vscode<span class="token punctuation">.</span>TreeItem<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">getTreeItem</span><span class="token punctuation">(</span>element<span class="token operator">:</span> vscode<span class="token punctuation">.</span>TreeItem<span class="token punctuation">)</span><span class="token operator">:</span> vscode<span class="token punctuation">.</span>TreeItem <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> element<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> vscode<span class="token punctuation">.</span>TreeItem<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>TreeItem</span><span class="token punctuation">(</span><span class="token string">&quot;Item 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>TreeItem</span><span class="token punctuation">(</span><span class="token string">&quot;Item 2&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 放入激活activate函数中</span></span>
<span class="line">vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">registerTreeDataProvider</span><span class="token punctuation">(</span><span class="token string">&quot;mySidebar&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyTreeDataProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>说明：</p><ul><li>在 <strong>资源管理器面板</strong> 添加一个新视图 “My Sidebar”。</li><li>用 <code>TreeDataProvider</code> 动态提供数据。</li></ul></li></ol><h3 id="_1-4-6-编辑器装饰-decorations" tabindex="-1"><a class="header-anchor" href="#_1-4-6-编辑器装饰-decorations"><span>1.4.6 编辑器装饰（Decorations）</span></a></h3><p>可以给代码添加背景色、高亮、提示信息等。</p><ol><li><p><strong>实现（extension.ts）</strong>：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> decorationType <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">createTextEditorDecorationType</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;rgba(255,0,0,0.3)&quot;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> editor <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> range <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    editor<span class="token punctuation">.</span><span class="token function">setDecorations</span><span class="token punctuation">(</span>decorationType<span class="token punctuation">,</span> <span class="token punctuation">[</span>range<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>说明：</p><ul><li><code>createTextEditorDecorationType</code> 定义样式。</li><li><code>setDecorations</code> 应用到代码范围。</li></ul></li></ol><h3 id="_1-4-7-语言支持-language-features" tabindex="-1"><a class="header-anchor" href="#_1-4-7-语言支持-language-features"><span>1.4.7 语言支持（Language Features）</span></a></h3><p>可以扩展某种语言的代码补全、悬浮提示等。</p><ol><li><p><strong>配置（package.json）</strong>：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;languages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mylang&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;aliases&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;MyLang&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;extensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.mlg&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;configuration&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./language-configuration.json&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>实现补全（extension.ts）</strong>：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">vscode<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">registerCompletionItemProvider</span><span class="token punctuation">(</span><span class="token string">&quot;mylang&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">provideCompletionItems</span><span class="token punctuation">(</span><span class="token parameter">document<span class="token punctuation">,</span> position</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>CompletionItem</span><span class="token punctuation">(</span><span class="token string">&quot;helloWorld&quot;</span><span class="token punctuation">,</span> vscode<span class="token punctuation">.</span>CompletionItemKind<span class="token punctuation">.</span>Keyword<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>说明：</p><ul><li><code>languages</code> 定义新语言（这里是 <code>.mlg</code> 后缀）。</li><li><code>registerCompletionItemProvider</code> 提供自动补全。</li></ul></li></ol><h3 id="_1-4-8-配置-configuration" tabindex="-1"><a class="header-anchor" href="#_1-4-8-配置-configuration"><span>1.4.8 配置（Configuration）</span></a></h3><p>插件可以在 VS Code 设置里增加配置项。</p><ol><li><p><strong>配置（package.json）</strong>：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string-property property">&quot;configuration&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My Extension&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string-property property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string-property property">&quot;myExtension.enableFeature&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token string-property property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;是否启用我的功能&quot;</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string-property property">&quot;myExtension.apiEndpoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token string-property property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.example.com&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                    <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;API 接口地址&quot;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>读取配置（extension.ts）：</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">const</span> config <span class="token operator">=</span> vscode<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;myExtension&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> enable <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;enableFeature&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> api <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;apiEndpoint&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="_1-4-9-文件系统监听-file-system-watcher" tabindex="-1"><a class="header-anchor" href="#_1-4-9-文件系统监听-file-system-watcher"><span>1.4.9 文件系统监听（File System Watcher）</span></a></h3><p>可以监听文件变化事件。</p><ol><li><strong>实现（extension.ts）</strong>：</li></ol><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">const</span> watcher <span class="token operator">=</span> vscode<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">createFileSystemWatcher</span><span class="token punctuation">(</span><span class="token string">&quot;**/*.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">watcher<span class="token punctuation">.</span><span class="token function">onDidChange</span><span class="token punctuation">(</span>uri <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;修改: &quot;</span> <span class="token operator">+</span> uri<span class="token punctuation">.</span>fsPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">watcher<span class="token punctuation">.</span><span class="token function">onDidCreate</span><span class="token punctuation">(</span>uri <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建: &quot;</span> <span class="token operator">+</span> uri<span class="token punctuation">.</span>fsPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">watcher<span class="token punctuation">.</span><span class="token function">onDidDelete</span><span class="token punctuation">(</span>uri <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;删除: &quot;</span> <span class="token operator">+</span> uri<span class="token punctuation">.</span>fsPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-10-任务-tasks" tabindex="-1"><a class="header-anchor" href="#_1-4-10-任务-tasks"><span>1.4.10 任务（Tasks）</span></a></h3><p>可以让插件在 VS Code 的“任务运行器”中提供任务。</p><ol><li><p><strong>配置（package.json）</strong>：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;taskDefinitions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;myTask&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;required&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;taskName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;任务名称&quot;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>实现（extension.ts）：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">vscode<span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">registerTaskProvider</span><span class="token punctuation">(</span><span class="token string">&quot;myTask&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function-variable function">provideTasks</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>Task</span><span class="token punctuation">(</span></span>
<span class="line">            <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;myTask&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">taskName</span><span class="token operator">:</span> <span class="token string">&quot;sayHello&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            vscode<span class="token punctuation">.</span>TaskScope<span class="token punctuation">.</span>Workspace<span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;sayHello&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;myTask&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token keyword">new</span> <span class="token class-name">vscode<span class="token punctuation">.</span>ShellExecution</span><span class="token punctuation">(</span><span class="token string">&quot;echo Hello from task!&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">resolveTask</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">undefined</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_1-6-发布" tabindex="-1"><a class="header-anchor" href="#_1-6-发布"><span>1.6 发布</span></a></h2><h3 id="_1-6-1-打包插件" tabindex="-1"><a class="header-anchor" href="#_1-6-1-打包插件"><span>1.6.1 打包插件</span></a></h3><p>使用 <code>vsce</code> 打包插件：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 在插件项目根目录执行</span></span>
<span class="line">vsce package</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>执行成功后，会生成一个 .vsix 文件，例如：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">my-extension-0.0.1.vsix</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装插件：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">code --install-extension my-extension-0.0.1.vsix</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者到<code>vscode插件中心</code>右侧… install from vsix选择本地文件。</p><p><img src="`+i+`" alt=""></p><h3 id="_1-6-2-发布到-vs-code-marketplace" tabindex="-1"><a class="header-anchor" href="#_1-6-2-发布到-vs-code-marketplace"><span>1.6.2 发布到 VS Code Marketplace</span></a></h3><ol><li><p>前往 Azure DevOps 创建 <strong>Publisher</strong>。</p></li><li><p>使用 <code>vsce login &lt;publisher-name&gt;</code> 登录，并输入 Personal Access Token。</p></li><li><p>发布插件：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">vsce publish</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者指定版本号：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">vsce publish minor</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>发布成功后，你的插件就会出现在 Visual Studio Marketplace 上，供所有用户下载。</p></li></ol>`,78)]))}const k=n(c,[["render",u]]),v=JSON.parse('{"path":"/other/plugin/vscode/01.html","title":"一、VS Code 插件开发教程","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1758492259000,"contributors":[{"name":"zhao-farmer","username":"zhao-farmer","email":"857899180@qq.com","commits":2,"url":"https://github.com/zhao-farmer"}],"changelog":[{"hash":"c15d3157a954391cb96df1b6709be9de801c7930","time":1758492259000,"email":"857899180@qq.com","author":"zhao-farmer","message":"插件开发"},{"hash":"99c22db75003feb5447a5e9b7cef050f5faec996","time":1758492113000,"email":"857899180@qq.com","author":"zhao-farmer","message":"插件开发"}]},"filePathRelative":"other/plugin/vscode/01.md"}');export{k as comp,v as data};
