import{aq as s,ar as a,as as p,at as t}from"./app-Cok9BT0p.js";const e={};function c(l,n){return t(),a("div",null,n[0]||(n[0]=[p(`<h1 id="一、第一章" tabindex="-1"><a class="header-anchor" href="#一、第一章"><span>一、第一章</span></a></h1><h2 id="_1-1-fabric-js简介" tabindex="-1"><a class="header-anchor" href="#_1-1-fabric-js简介"><span>1.1 Fabric.js简介</span></a></h2><p>Fabric.js是一个对canvas进行封装的Javascript库，在原生canvas之上提供了交互式对象模型，通过简洁的api就可以在画布上进行丰富的操作。</p><p>它主要的功能包括在canvas上创建和填充图形，比如矩形、圆形、多边形；生成的图像自带缩放、旋转、拖拽等功能；还可以给图形填充渐变颜色；各个图形可以相互组合等等。</p><h2 id="_1-2-开始" tabindex="-1"><a class="header-anchor" href="#_1-2-开始"><span>1.2 开始</span></a></h2><ol><li>引入Fabric.js</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">npm</span> i fabric <span class="token parameter variable">--save</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>在main.js中使用</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">// main.js</span>
<span class="line"><span class="token function">import</span> fabric from <span class="token string">&quot;fabric&quot;</span></span>
<span class="line">Vue.use<span class="token punctuation">(</span>fabric<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>初始化画布</li></ol><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line"> <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">canvas</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 画布对象</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"> <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">&#39;canvas&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">200</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span>  <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1.3 方法</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>                   <span class="token comment">// 添加对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>                <span class="token comment">// 删除对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span>               <span class="token comment">// 设置canvas宽度</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">setHeight</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span>             <span class="token comment">// 设置canvas高度</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">setDimensions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>width<span class="token punctuation">,</span> height<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 一键设置宽高</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">getObjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                  <span class="token comment">// 获取所有对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token comment">// 获取选中的对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                       <span class="token comment">// 清除画布中所有对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">renderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                   <span class="token comment">// 重绘</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">// 请求重新渲染</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">getZoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                     <span class="token comment">// 获取画布当前缩放值</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">sendToBack</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>            <span class="token comment">// 移到对象到最底层</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">viewportCenterObjectH</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token comment">// 水平居中对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">viewportCenterObjectV</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token comment">// 垂直居中对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">viewportCenterObject</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>  <span class="token comment">// 垂直水平居中对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">fxCenterObjectH</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>       <span class="token comment">// 动画水平居中对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">fxCenterObjectV</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>       <span class="token comment">// 动画垂直居中对象</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">fxCenterObject</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>        <span class="token comment">// 动画垂直水平居中对象</span></span>
<span class="line"> </span>
<span class="line"><span class="token keyword">let</span> canvasJsonData <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 将画布序列化成json数据</span></span>
<span class="line"><span class="token keyword">let</span> canvasSvgData <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toSVG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 将画布序列化成svg数据</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-4-事件" tabindex="-1"><a class="header-anchor" href="#_1-4-事件"><span>1.4 事件</span></a></h2><ol><li>常用事件</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token literal-property property">mouse</span><span class="token operator">:</span> down         <span class="token comment">// 鼠标按下事件</span></span>
<span class="line"><span class="token literal-property property">mouse</span><span class="token operator">:</span> move         <span class="token comment">// 鼠标移动事件</span></span>
<span class="line"><span class="token literal-property property">mouse</span><span class="token operator">:</span> up           <span class="token comment">// 鼠标移动事件</span></span>
<span class="line"><span class="token literal-property property">mouse</span><span class="token operator">:</span> over         <span class="token comment">// 鼠标移入事件</span></span>
<span class="line"><span class="token literal-property property">mouse</span><span class="token operator">:</span> out          <span class="token comment">// 鼠标移出事件</span></span>
<span class="line"><span class="token literal-property property">mouse</span><span class="token operator">:</span> dblclick     <span class="token comment">// 鼠标双击事件</span></span>
<span class="line"><span class="token literal-property property">object</span><span class="token operator">:</span> added       <span class="token comment">// 对象被添加事件</span></span>
<span class="line"><span class="token literal-property property">object</span><span class="token operator">:</span> removed     <span class="token comment">// 对象被删除事件</span></span>
<span class="line"><span class="token literal-property property">object</span><span class="token operator">:</span> modified    <span class="token comment">// 对象被修改事件</span></span>
<span class="line"><span class="token literal-property property">object</span><span class="token operator">:</span> rotating    <span class="token comment">// 对象被旋转事件</span></span>
<span class="line"><span class="token literal-property property">object</span><span class="token operator">:</span> scaling     <span class="token comment">// 对象被缩放事件</span></span>
<span class="line"><span class="token literal-property property">object</span><span class="token operator">:</span> moving      <span class="token comment">// 对象被移动事件</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>事件绑定</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">canvas<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;mouse:wheel&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">opt</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>事件解绑</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">canvas<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;mouse:wheel&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_1-5-canvas常用属性" tabindex="-1"><a class="header-anchor" href="#_1-5-canvas常用属性"><span>1.5 canvas常用属性</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">canvas<span class="token punctuation">.</span>selection <span class="token operator">=</span> <span class="token boolean">true</span>                  <span class="token comment">// 画布是否可选中 默认为true、false：不可选中</span></span>
<span class="line">canvas<span class="token punctuation">.</span>selectionColor <span class="token operator">=</span> <span class="token string">&#39;transparent&#39;</span>    <span class="token comment">// 画布鼠标框选时的背景色</span></span>
<span class="line">canvas<span class="token punctuation">.</span>selectionBorderColor <span class="token operator">=</span> <span class="token string">&#39;transparent&#39;</span><span class="token comment">// 画布鼠标框选时的边框颜色</span></span>
<span class="line">canvas<span class="token punctuation">.</span>selectionLineWidth <span class="token operator">=</span> <span class="token number">6</span>            <span class="token comment">// 画布鼠标框选时的边框厚度</span></span>
<span class="line">canvas<span class="token punctuation">.</span>selectionDashArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token comment">// 画布鼠标框选时边框虚线规则</span></span>
<span class="line">canvas<span class="token punctuation">.</span>selectionFullyContained <span class="token operator">=</span> <span class="token boolean">true</span>   <span class="token comment">// 只选择完全包含在拖动选择矩形中的形状</span></span>
<span class="line">canvas<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&#39;#2E3136&#39;</span>      <span class="token comment">// 画布背景色</span></span>
<span class="line">canvas<span class="token punctuation">.</span>hoverCursor <span class="token operator">=</span> <span class="token string">&#39;pointer&#39;</span>          <span class="token comment">// 鼠标光标样式 default、pointer、move等</span></span>
<span class="line">canvas<span class="token punctuation">.</span>skipTargetFind <span class="token operator">=</span> <span class="token boolean">true</span>            <span class="token comment">// 整个画板元素不能被选中</span></span>
<span class="line">canvas<span class="token punctuation">.</span>fireRightClick <span class="token operator">=</span> <span class="token boolean">true</span>            <span class="token comment">// 启用右键，options.button的数字为3</span></span>
<span class="line">canvas<span class="token punctuation">.</span>stopContextMenu <span class="token operator">=</span> <span class="token boolean">true</span>           <span class="token comment">// 禁止默认右键菜单</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Fabric.js 可以通过 viewportTransform 属性配置画布的视窗属性</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">canvas<span class="token punctuation">.</span>viewportTransform<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span></span>
<span class="line">canvas<span class="token punctuation">.</span>viewportTransform<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>viewportTransform 是一个数组，里面有6个元素，默认值是 [1, 0, 0, 1, 0, 0]。从下标0开始，它们分别代表：</p><ul><li></li><li></li><li></li><li></li><li></li><li></li></ul><h2 id="_1-6-对象属性" tabindex="-1"><a class="header-anchor" href="#_1-6-对象属性"><span>1.6 对象属性</span></a></h2><ol><li>基本属性</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>    <span class="token comment">// y坐标</span></span>
<span class="line">  <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>    <span class="token comment">// x坐标</span></span>
<span class="line">  <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&#39;#17b978&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 填充色</span></span>
<span class="line">  <span class="token literal-property property">radius</span><span class="token operator">:</span> <span class="token number">50</span>  <span class="token comment">// 半径</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">rect<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">100</span>                       <span class="token comment">// y坐标</span></span>
<span class="line">rect<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token number">100</span>                      <span class="token comment">// x坐标</span></span>
<span class="line">rect<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">100</span>                     <span class="token comment">// 矩形宽度</span></span>
<span class="line">rect<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">100</span>                    <span class="token comment">// 矩形高度</span></span>
<span class="line">circle<span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">50</span>                   <span class="token comment">// 圆半径</span></span>
<span class="line">rect<span class="token punctuation">.</span>fill <span class="token operator">=</span> <span class="token string">&#39;#17b978&#39;</span>                <span class="token comment">// 填充色</span></span>
<span class="line">rect<span class="token punctuation">.</span>stroke <span class="token operator">=</span> <span class="token string">&#39;#FE5332&#39;</span>              <span class="token comment">// 线条颜色</span></span>
<span class="line">rect<span class="token punctuation">.</span>strokeWidth <span class="token operator">=</span> <span class="token number">10</span>                <span class="token comment">// 线条宽度</span></span>
<span class="line">rect<span class="token punctuation">.</span>strokeMiterLimit <span class="token operator">=</span> index        <span class="token comment">// 可以用来记录当前选中的rectList列表的索引！！！！</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>扩展属性</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">circle<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">hasBorders</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">circle<span class="token punctuation">.</span>selectable <span class="token operator">=</span> <span class="token boolean">false</span>                 <span class="token comment">// 控件不能被选择，不会被操作</span></span>
<span class="line">circle<span class="token punctuation">.</span>hasControls <span class="token operator">=</span> <span class="token boolean">false</span>                <span class="token comment">// 只能移动不能（编辑）操作</span></span>
<span class="line">circle<span class="token punctuation">.</span>hasBorders <span class="token operator">=</span> <span class="token boolean">false</span>                 <span class="token comment">// 选中时，是否显示边，true：显示（默认）</span></span>
<span class="line">circle<span class="token punctuation">.</span>borderColor <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span>                <span class="token comment">// 选中时，边的颜色</span></span>
<span class="line">circle<span class="token punctuation">.</span>borderScaleFactor <span class="token operator">=</span> <span class="token number">5</span>              <span class="token comment">// 选中时，边的粗细</span></span>
<span class="line">circle<span class="token punctuation">.</span>borderDashArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>  <span class="token comment">// 选中时，虚线边的规则</span></span>
<span class="line">circle<span class="token punctuation">.</span>transparentCorners <span class="token operator">=</span> <span class="token boolean">false</span>         <span class="token comment">// 选中时，角是否是空心 true：空心  false：实心</span></span>
<span class="line">circle<span class="token punctuation">.</span>cornerColor <span class="token operator">=</span> <span class="token string">&quot;#a1de93&quot;</span><span class="token punctuation">,</span>           <span class="token comment">// 选中时，角的颜色</span></span>
<span class="line">circle<span class="token punctuation">.</span>cornerStrokeColor <span class="token operator">=</span> <span class="token string">&#39;pink&#39;</span>         <span class="token comment">// 选中时，角的边框的颜色</span></span>
<span class="line">circle<span class="token punctuation">.</span>cornerStyle <span class="token operator">=</span> <span class="token string">&#39;circle&#39;</span>             <span class="token comment">// 选中时，角的属性  rect：矩形（默认）、circle：圆形</span></span>
<span class="line">circle<span class="token punctuation">.</span>cornerSize <span class="token operator">=</span> <span class="token number">20</span>                    <span class="token comment">// 选中时，角的大小为20</span></span>
<span class="line">circle<span class="token punctuation">.</span>cornerDashArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>       <span class="token comment">// 选中时，虚线角的规则</span></span>
<span class="line">circle<span class="token punctuation">.</span>selectionBackgroundColor <span class="token operator">=</span> <span class="token string">&#39;#ffc300&#39;</span> <span class="token comment">// 选中时，选框的背景色</span></span>
<span class="line">circle<span class="token punctuation">.</span>padding <span class="token operator">=</span> <span class="token number">20</span>                       <span class="token comment">// 选中时，选框离图形的距离</span></span>
<span class="line">circle<span class="token punctuation">.</span>borderOpacityWhenMoving <span class="token operator">=</span> <span class="token number">0.6</span>      <span class="token comment">// 当对象活动和移动时，对象控制边界的不透明度</span></span>
<span class="line">triangle<span class="token punctuation">.</span>perPixelTargetFind <span class="token operator">=</span> <span class="token boolean">true</span>        <span class="token comment">// 选择三角形空白位置的时候无法选中，false：可以选中（默认）</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-7-图层层级操作" tabindex="-1"><a class="header-anchor" href="#_1-7-图层层级操作"><span>1.7 图层层级操作</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">canvas<span class="token punctuation">.</span><span class="token function">bringToFront</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>    <span class="token comment">// 移到顶层</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">sendToBack</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>      <span class="token comment">// 移到底层</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">bringForward</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>    <span class="token comment">// 上移一层</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">sendBackwards</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>   <span class="token comment">// 下移一层</span></span>
<span class="line">canvas<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>          <span class="token comment">// 移动到指定层</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-8-复制和粘贴" tabindex="-1"><a class="header-anchor" href="#_1-8-复制和粘贴"><span>1.8 复制和粘贴</span></a></h2><ol><li>复制</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token function">handleCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&#39;请先选择元素&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">cloned</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects <span class="token operator">=</span> cloned</span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>粘贴</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token function">handlePaste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&#39;还没复制过任何内容&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">cloned</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">discardActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取消选择</span></span>
<span class="line">    <span class="token comment">// 设置新内容的坐标位置</span></span>
<span class="line">    cloned<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">left</span><span class="token operator">:</span> cloned<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">top</span><span class="token operator">:</span> cloned<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">evented</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>cloned<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&#39;activeSelection&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果复制的是多个对象，则需要遍历克隆对象</span></span>
<span class="line">      cloned<span class="token punctuation">.</span>canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span></span>
<span class="line">      cloned<span class="token punctuation">.</span><span class="token function">forEachObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      cloned<span class="token punctuation">.</span><span class="token function">setCoords</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cloned<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">.</span>top <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">.</span>left <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">setActiveObject</span><span class="token punctuation">(</span>cloned<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>实例代码</li></ol><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleCopy()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>复制<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handlePaste()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>粘贴<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button-canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>400px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>400px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span></span>
<span class="line"> <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"> <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">canvas</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">cloneObjects</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"> <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"> <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">//画图</span></span>
<span class="line">  <span class="token function">loadRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//获取对象</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Canvas</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//深红</span></span>
<span class="line">    <span class="token keyword">var</span> rect1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">//长宽</span></span>
<span class="line">      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">//距离</span></span>
<span class="line">      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">//填充色 </span></span>
<span class="line">      <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&#39;#d6195e&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">//边框颜色与边框宽度</span></span>
<span class="line">      <span class="token literal-property property">stroke</span> <span class="token operator">:</span> <span class="token string">&#39;#111&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">//旋转角度</span></span>
<span class="line">      <span class="token literal-property property">angle</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">//圆角</span></span>
<span class="line">      <span class="token literal-property property">rx</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">ry</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//浅红</span></span>
<span class="line">    <span class="token keyword">var</span> rect2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fabric<span class="token punctuation">.</span>Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">&#39;#ef608f&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">stroke</span> <span class="token operator">:</span> <span class="token string">&#39;#111&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">strokeWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">angle</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">rx</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">ry</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> </span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">//复制</span></span>
<span class="line">  <span class="token function">handleCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&#39;请先选择元素&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">cloned</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects <span class="token operator">=</span> cloned</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">//粘贴</span></span>
<span class="line">  <span class="token function">handlePaste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">&#39;还没复制过任何内容&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">cloned</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">discardActiveObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取消选择</span></span>
<span class="line">      <span class="token comment">// 设置新内容的坐标位置</span></span>
<span class="line">      cloned<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">left</span><span class="token operator">:</span> cloned<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">top</span><span class="token operator">:</span> cloned<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">evented</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>cloned<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&#39;activeSelection&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果复制的是多个对象，则需要遍历克隆对象</span></span>
<span class="line">        cloned<span class="token punctuation">.</span>canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">;</span></span>
<span class="line">        cloned<span class="token punctuation">.</span><span class="token function">forEachObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        cloned<span class="token punctuation">.</span><span class="token function">setCoords</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cloned<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">.</span>top <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>cloneObjects<span class="token punctuation">.</span>left <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">setActiveObject</span><span class="token punctuation">(</span>cloned<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">requestRenderAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"> <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span>  <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line"><span class="token selector">.button-box</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">gap</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token selector">.button-canvas</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span>
<span class="line">  <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,40)]))}const i=s(e,[["render",c]]),u=JSON.parse('{"path":"/animation/fabric/vue/01.html","title":"一、第一章","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1752490925000,"contributors":[{"name":"zhao-farmer","username":"zhao-farmer","email":"857899180@qq.com","commits":1,"url":"https://github.com/zhao-farmer"}],"changelog":[{"hash":"08d014805d6447d2221b34fe03fdc2ca18411d66","time":1752490925000,"email":"857899180@qq.com","author":"zhao-farmer","message":"2025年7月更新"}]},"filePathRelative":"animation/fabric/vue/01.md"}');export{i as comp,u as data};
