import{aq as s,ar as a,as as p,at as t}from"./app-Cok9BT0p.js";const e="/note-front/application/cocos/base/039.png",o="/note-front/application/cocos/base/040.png",c="/note-front/application/cocos/base/041.png",l="/note-front/application/cocos/base/042.png",i="/note-front/application/cocos/base/043.gif",u="/note-front/application/cocos/base/044.png",k="/note-front/application/cocos/base/045.png",r="/note-front/application/cocos/base/046.gif",d="/note-front/application/cocos/base/047.png",m="/note-front/application/cocos/base/048.gif",v="/note-front/application/cocos/base/049.png",b="/note-front/application/cocos/base/050.png",y="/note-front/application/cocos/base/051.gif",h="/note-front/application/cocos/base/052.png",g="/note-front/application/cocos/base/053.png",f="/note-front/application/cocos/base/054.gif",w="/note-front/application/cocos/base/055.png",C="/note-front/application/cocos/base/058.png",_="/note-front/application/cocos/base/059.png",x="/note-front/application/cocos/base/056.png",T="/note-front/application/cocos/base/057.gif",D="/note-front/application/cocos/base/060.gif",P="/note-front/application/cocos/base/061.gif",B="/note-front/application/cocos/base/062.gif",q="/note-front/application/cocos/base/063.gif",E="/note-front/application/cocos/base/064.gif",V="/note-front/application/cocos/base/065.gif",I="/note-front/application/cocos/base/066.png",j="/note-front/application/cocos/base/067.png",A="/note-front/application/cocos/base/068.gif",N="/note-front/application/cocos/base/069.png",S="/note-front/application/cocos/base/072.png",U="/note-front/application/cocos/base/070.gif",O="/note-front/application/cocos/base/071.png",R="/note-front/application/cocos/base/073.png",F="/note-front/application/cocos/base/074.png",z="/note-front/application/cocos/base/075.png",M="/note-front/application/cocos/base/076.gif",Y="/note-front/application/cocos/base/077.png",X="/note-front/application/cocos/base/078.png",G="/note-front/application/cocos/base/079.gif",W="/note-front/application/cocos/base/080.png",H="/note-front/application/cocos/base/081.png",L="/note-front/application/cocos/base/082.png",K="/note-front/application/cocos/base/083.png",Q="/note-front/application/cocos/base/084.png",J="/note-front/application/cocos/base/085.gif",Z="/note-front/application/cocos/base/086.png",$="/note-front/application/cocos/base/087.png",nn="/note-front/application/cocos/base/088.gif",sn="/note-front/application/cocos/base/089.png",an="/note-front/application/cocos/base/090.gif",pn="/note-front/application/cocos/base/091.png",tn="/note-front/application/cocos/base/092.png",en="/note-front/application/cocos/base/094.png",on="/note-front/application/cocos/base/093.png",cn="/note-front/application/cocos/base/096.png",ln="/note-front/application/cocos/base/097.png",un="/note-front/application/cocos/base/098.png",kn="/note-front/application/cocos/base/099.png",rn="/note-front/application/cocos/base/100.gif",dn="/note-front/application/cocos/base/101.png",mn="/note-front/application/cocos/base/168.png",vn="/note-front/application/cocos/base/169.gif",bn={};function yn(hn,n){return t(),a("div",null,n[0]||(n[0]=[p('<h1 id="三、cocos-creator-进阶" tabindex="-1"><a class="header-anchor" href="#三、cocos-creator-进阶"><span>三、cocos creator 进阶</span></a></h1><h2 id="_3-1-碰撞检测" tabindex="-1"><a class="header-anchor" href="#_3-1-碰撞检测"><span>3.1 碰撞检测</span></a></h2><ol><li><p>调整物理引擎</p><p>Cocos Creator 有轻量的 <code>Builtin</code> 物理系统与更强的 <code>Box2D</code> 物理系统。</p><p>Cocos Creator 3.8.6 现在默认是 Box2D 物理系统，要调回 <code>Builtin</code></p><p><img src="'+e+'" alt=""></p></li><li><p>操作界面</p><ul><li>添加组件</li></ul><p><img src="'+o+'" alt=""></p><ul><li>第一个碰撞体</li></ul><p><img src="'+c+'" alt=""></p><ul><li>第二个碰撞与脚本</li></ul><p><img src="'+l+`" alt=""></p></li><li><p>脚本</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Collider2D<span class="token punctuation">,</span>BoxCollider2D<span class="token punctuation">,</span>Contact2DType<span class="token punctuation">,</span>IPhysics2DContact<span class="token punctuation">,</span>PhysicsSystem2D <span class="token punctuation">,</span>find<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;BoxCollider2DTest&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BoxCollider2DTest</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;物理系统是否启用:&quot;</span><span class="token punctuation">,</span> PhysicsSystem2D<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>enable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 应为 true</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">let</span> collider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Collider2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前节点是否激活:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;当前节点碰撞体是否启用:&quot;</span><span class="token punctuation">,</span> collider<span class="token operator">?.</span>enabled<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">let</span> otherNoe  <span class="token operator">=</span>  <span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas/bg_day&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> otherCollider  <span class="token operator">=</span> otherNoe<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Collider2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;目标节点是否激活:&quot;</span><span class="token punctuation">,</span> otherNoe<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;目标节点碰撞体是否启用:&quot;</span><span class="token punctuation">,</span> otherCollider<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        collider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">BEGIN_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onBeginContact<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        collider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">END_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onEndContact<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        otherCollider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">BEGIN_CONTACT</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>selfCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> otherCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;目标节点-检测到碰撞&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        otherCollider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">END_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>selfCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> otherCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;目标节点-离开碰撞区域&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">onBeginContact</span> <span class="token punctuation">(</span>selfCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> otherCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> contact<span class="token operator">:</span> IPhysics2DContact <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 只在两个碰撞体开始接触时被调用一次</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;当前节点-检测到碰撞&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">onEndContact</span> <span class="token punctuation">(</span>selfCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> otherCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> contact<span class="token operator">:</span> IPhysics2DContact <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 只在两个碰撞体结束接触时被调用一次</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;当前节点-离开碰撞区域&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>x <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行结果</p><p><img src="`+i+'" alt=""></p></li></ol><h2 id="_3-2-飞机大战练习" tabindex="-1"><a class="header-anchor" href="#_3-2-飞机大战练习"><span>3.2 飞机大战练习</span></a></h2><ol><li>调整画布大小</li></ol><p><img src="'+u+'" alt=""></p><ol start="2"><li><p>背景图片循环播放</p><ul><li>实现循环播放方式：</li></ul><p>两张图片不断交替向下滚动</p><ul><li>界面设置</li></ul><p><img src="'+k+`" alt=""></p><ul><li>父节点脚本</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Node <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;BgControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BgControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token comment">// 遍历子物体</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> bgNode <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 移动 帧 -&gt; 秒</span></span>
<span class="line">            <span class="token comment">// deltaTime 两帧的间隔，</span></span>
<span class="line">            <span class="token comment">// 一秒钟可以分为多个不同的deltaTime,他们加起来肯定也等于1</span></span>
<span class="line">            bgNode<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">200</span> <span class="token operator">*</span> deltaTime</span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 第一张图片加载完，重新设置高度</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span> bgNode<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">850</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                bgNode<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">852</span> <span class="token operator">*</span> <span class="token number">2</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>结果展示</li></ul><p><img src="`+r+'" alt=""></p></li><li><p>飞机移动</p><ul><li>新建飞机节点与脚本</li></ul><p><img src="'+d+`" alt=""></p><ul><li>编写脚本</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> EventTouch<span class="token punctuation">,</span> Input<span class="token punctuation">,</span>find<span class="token punctuation">,</span>UITransform<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;PlayerControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PlayerControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 获取canvas</span></span>
<span class="line">        <span class="token keyword">const</span> cut <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// const sut = this.node.getComponent(UITransform);</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span><span class="token constant">TOUCH_MOVE</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span>event<span class="token operator">:</span> EventTouch<span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> location <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 需要减去项目设置的锚点与原点的距离</span></span>
<span class="line">            <span class="token keyword">let</span> moveX <span class="token operator">=</span> location<span class="token punctuation">.</span>x <span class="token operator">-</span> cut<span class="token punctuation">.</span>width <span class="token operator">*</span> cut<span class="token punctuation">.</span>anchorX </span>
<span class="line">            <span class="token keyword">let</span> moveY <span class="token operator">=</span> location<span class="token punctuation">.</span>y <span class="token operator">-</span> cut<span class="token punctuation">.</span>height <span class="token operator">*</span> cut<span class="token punctuation">.</span>anchorY </span>
<span class="line">            </span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>moveX<span class="token punctuation">,</span>moveY<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行结果</li></ul><p><img src="`+m+'" alt=""></p></li><li><p>子弹</p><ul><li>创建预设体</li></ul><p><img src="'+v+`" alt=""></p><ul><li>预设体脚本</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Node <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;BulletControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BulletControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    speed<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">800</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">*</span> deltaTime</span>
<span class="line">        <span class="token comment">// 移除屏幕销毁</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">820</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>玩家脚本</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> EventTouch<span class="token punctuation">,</span>Input<span class="token punctuation">,</span>find<span class="token punctuation">,</span>UITransform<span class="token punctuation">,</span>Prefab<span class="token punctuation">,</span>instantiate<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;PlayerControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PlayerControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> Prefab <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    bulletPre<span class="token operator">:</span> Prefab <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 获取canvas</span></span>
<span class="line">        <span class="token keyword">const</span> cut <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> sut <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span><span class="token constant">TOUCH_MOVE</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span>event<span class="token operator">:</span> EventTouch<span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> location <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 需要减去项目设置的锚点与原点的距离</span></span>
<span class="line">            <span class="token keyword">let</span> moveX <span class="token operator">=</span> location<span class="token punctuation">.</span>x <span class="token operator">-</span> cut<span class="token punctuation">.</span>width <span class="token operator">*</span> cut<span class="token punctuation">.</span>anchorX </span>
<span class="line">            <span class="token keyword">let</span> moveY <span class="token operator">=</span> location<span class="token punctuation">.</span>y <span class="token operator">-</span> cut<span class="token punctuation">.</span>height <span class="token operator">*</span> cut<span class="token punctuation">.</span>anchorY </span>
<span class="line">            </span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>moveX<span class="token punctuation">,</span>moveY<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line highlighted">        <span class="token comment">// 攻击 计时器</span></span>
<span class="line highlighted">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line highlighted">            <span class="token comment">// 创建子弹</span></span>
<span class="line highlighted">            <span class="token keyword">let</span> bullet <span class="token operator">=</span> <span class="token function">instantiate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bulletPre<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">            <span class="token comment">// 设置父物体 当前场景</span></span>
<span class="line highlighted">            bullet<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">            <span class="token comment">// 设置子弹位置</span></span>
<span class="line highlighted">            bullet<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>x<span class="token punctuation">;</span></span>
<span class="line highlighted">            bullet<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">+</span> sut<span class="token punctuation">.</span>height <span class="token operator">*</span> sut<span class="token punctuation">.</span>anchorY<span class="token punctuation">;</span></span>
<span class="line highlighted">        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>界面上 挂载 子弹预设体</li></ul><p><img src="`+b+'" alt=""></p><ul><li>运行结果</li></ul><p><img src="'+y+'" alt=""></p></li><li><p>敌人</p><ol><li><p>敌人类</p><ul><li>创建敌人预设体</li></ul><p><img src="'+h+`" alt=""></p><ul><li>敌人脚本</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> resources <span class="token punctuation">,</span>SpriteFrame<span class="token punctuation">,</span>Sprite<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;EnemyControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">EnemyControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 是否死亡</span></span>
<span class="line">    isDie<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isDie<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">300</span> <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// 到底部</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token operator">-</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>isDie <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 加载爆炸图片</span></span>
<span class="line">        resources<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;enemy0_die/spriteFrame&quot;</span><span class="token punctuation">,</span> SpriteFrame<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> sf<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">const</span> sprite <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            sprite<span class="token punctuation">.</span>spriteFrame <span class="token operator">=</span> sf<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 300毫秒销毁</span></span>
<span class="line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token operator">?.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>敌人管理类</p><ul><li>界面设置</li></ul><p><img src="`+g+`" alt=""></p><ul><li>脚本</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> instantiate<span class="token punctuation">,</span> find<span class="token punctuation">,</span> Prefab <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;EnemyManager&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">EnemyManager</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 敌机预设体</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span>Prefab<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    enemyPre<span class="token operator">:</span> Prefab <span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 每隔2s,创建一个敌机</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 创建敌机</span></span>
<span class="line">            <span class="token keyword">let</span> enemy <span class="token operator">=</span> <span class="token function">instantiate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>enemyPre<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            enemy<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            enemy<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y<span class="token punctuation">;</span></span>
<span class="line">            enemy<span class="token punctuation">.</span>x <span class="token operator">=</span>  Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">400</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>碰撞类效果展示</p><ul><li>碰到子弹会销毁</li></ul><p>BulletControl.ts</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Collider2D<span class="token punctuation">,</span>Contact2DType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EnemyControl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./EnemyControl&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;BulletControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BulletControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    speed<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">800</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">        <span class="token keyword">let</span> collider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Collider2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">        collider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">BEGIN_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onBeginContact<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">*</span> deltaTime</span>
<span class="line">        <span class="token comment">// 移除屏幕销毁</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">820</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line highlighted">    <span class="token function">onBeginContact</span><span class="token punctuation">(</span>selfCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> otherCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line highlighted">        <span class="token comment">// 如果碰到敌人，销毁自己，让敌人死亡</span></span>
<span class="line highlighted">        <span class="token keyword">if</span><span class="token punctuation">(</span>otherCollider<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line highlighted">            <span class="token comment">// 销毁敌人 通知敌人销毁</span></span>
<span class="line highlighted">            otherCollider<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>EnemyControl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">            <span class="token comment">// 销毁自己</span></span>
<span class="line highlighted">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line highlighted">        <span class="token punctuation">}</span></span>
<span class="line highlighted">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>玩家飞机会销毁 PlayerControl.ts</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span>Input<span class="token punctuation">,</span>EventTouch<span class="token punctuation">,</span>find<span class="token punctuation">,</span>UITransform<span class="token punctuation">,</span>Prefab<span class="token punctuation">,</span>instantiate<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Collider2D<span class="token punctuation">,</span>Contact2DType<span class="token punctuation">,</span>resources<span class="token punctuation">,</span>SpriteFrame<span class="token punctuation">,</span>Sprite<span class="token punctuation">,</span>director<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> EnemyControl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./EnemyControl&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;PlayerControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PlayerControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> Prefab <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    bulletPre<span class="token operator">:</span> Prefab <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 获取canvas</span></span>
<span class="line">        <span class="token keyword">const</span> cut <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> sut <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span><span class="token constant">TOUCH_MOVE</span><span class="token punctuation">,</span>  <span class="token punctuation">(</span>event<span class="token operator">:</span> EventTouch<span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> location <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 需要减去项目设置的锚点与原点的距离</span></span>
<span class="line">            <span class="token keyword">let</span> moveX <span class="token operator">=</span> location<span class="token punctuation">.</span>x <span class="token operator">-</span> cut<span class="token punctuation">.</span>width <span class="token operator">*</span> cut<span class="token punctuation">.</span>anchorX </span>
<span class="line">            <span class="token keyword">let</span> moveY <span class="token operator">=</span> location<span class="token punctuation">.</span>y <span class="token operator">-</span> cut<span class="token punctuation">.</span>height <span class="token operator">*</span> cut<span class="token punctuation">.</span>anchorY </span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>moveX<span class="token punctuation">,</span>moveY<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 攻击 计时器</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 创建子弹</span></span>
<span class="line">            <span class="token keyword">let</span> bullet <span class="token operator">=</span> <span class="token function">instantiate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bulletPre<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 设置父物体 当前场景</span></span>
<span class="line">            bullet<span class="token punctuation">.</span><span class="token function">setParent</span><span class="token punctuation">(</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 设置子弹位置</span></span>
<span class="line">            bullet<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>x<span class="token punctuation">;</span></span>
<span class="line">            bullet<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">+</span> sut<span class="token punctuation">.</span>height <span class="token operator">*</span> sut<span class="token punctuation">.</span>anchorY<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line highlighted">        <span class="token comment">// 监听碰撞</span></span>
<span class="line highlighted">        <span class="token keyword">let</span> collider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Collider2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">        collider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">BEGIN_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onBeginContact<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line highlighted">    <span class="token function">onBeginContact</span><span class="token punctuation">(</span>selfCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> otherCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line highlighted">        <span class="token comment">// 如果碰到敌人，销毁自己，让敌人死亡</span></span>
<span class="line highlighted">        <span class="token keyword">if</span><span class="token punctuation">(</span>otherCollider<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line highlighted">            <span class="token comment">// 销毁敌人 通知敌人销毁</span></span>
<span class="line highlighted">            otherCollider<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>EnemyControl<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">die</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">            <span class="token comment">// 加载资源</span></span>
<span class="line highlighted">            resources<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;hero1_die/spriteFrame&quot;</span><span class="token punctuation">,</span> SpriteFrame<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> sf<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">                <span class="token keyword">const</span> sprite <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">                sprite<span class="token punctuation">.</span>spriteFrame <span class="token operator">=</span> sf<span class="token punctuation">;</span></span>
<span class="line highlighted">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">            <span class="token comment">// 直接游戏结束  暂停游戏逻辑 关闭监听事件</span></span>
<span class="line highlighted">            director<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">            <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span><span class="token constant">TOUCH_MOVE</span><span class="token punctuation">)</span></span>
<span class="line highlighted">        <span class="token punctuation">}</span></span>
<span class="line highlighted">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行结果</p><p><img src="`+f+'" alt=""></p></li></ol></li></ol><h2 id="_3-3-物理系统" tabindex="-1"><a class="header-anchor" href="#_3-3-物理系统"><span>3.3 物理系统</span></a></h2><h3 id="_3-3-1-刚体" tabindex="-1"><a class="header-anchor" href="#_3-3-1-刚体"><span>3.3.1 刚体</span></a></h3><p>刚体是组成物理世界的基本对象，可以将刚体想象成一个你不能看到（绘制）也不能摸到（碰撞）的且不能变形的物体。</p><ol><li>添加组件-&gt; <code>RigidBody2D</code></li></ol><p><img src="'+w+'" alt=""></p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>Group</td><td>刚体的分组。通过 碰撞矩阵 可设置不同分组间碰撞的可能性</td></tr><tr><td>EnabledContactListener</td><td>开启监听碰撞回调</td></tr><tr><td>Bullet</td><td>这个刚体是否是一个快速移动的刚体，并且需要禁止穿过其他快速移动的刚体</td></tr><tr><td>Type</td><td>刚体类型</td></tr><tr><td>AllowSleep</td><td>是否允许刚体休眠</td></tr><tr><td>GravityScale</td><td>重力缩放比例 <br> 仅对 Dynamic 类型的刚体生效</td></tr><tr><td>LinearDamping</td><td>移动速度衰减系数</td></tr><tr><td>AngularDamping</td><td>旋转速度衰减系数</td></tr><tr><td>LinearVelocity</td><td>移动速度<br>仅对 Dynamic 和 Kinematic 类型的刚体生效</td></tr><tr><td>AngularVelocity</td><td>旋转速度<br>仅对 Dynamic 和 Kinematic 类型的刚体生效</td></tr><tr><td>FixedRotation</td><td>是否固定旋转</td></tr><tr><td>AwakeOnLoad</td><td>加载完成后立刻唤醒刚体</td></tr></tbody></table><table><thead><tr><th>刚体类型</th><th>说明</th></tr></thead><tbody><tr><td>Static</td><td>静态刚体，零质量，零速度，即不会受到重力或速度影响，但是可以设置他的位置来进行移动。该类型通常用于制作场景</td></tr><tr><td>Dynamic</td><td>动态刚体，有质量，可以设置速度，会受到重力影响。唯一可以通过 applyForce 和 applyTorque 等方法改变受力的刚体类型</td></tr><tr><td>Kinematic</td><td>运动刚体，零质量，可以设置速度，不会受到重力的影响，但是可以设置速度来进行移动</td></tr><tr><td>Animated</td><td>动画刚体，在上面已经提到过，从 Kinematic 衍生的类型，主要用于刚体与动画编辑结合使用</td></tr></tbody></table><ol start="2"><li><p>刚体界面使用</p><ul><li>参考背景图</li></ul><p><img src="'+C+'" alt=""></p><ul><li>小鸟刚体</li></ul><p><img src="'+_+'" alt=""></p><ul><li>修改物理系统 <code>Box2D</code></li></ul><p><img src="'+x+'" alt=""></p><ul><li>基础运行结果</li></ul><p><img src="'+T+'" alt=""></p><ul><li>修改重力 <code>GravityScale: 0.5</code></li></ul><p><img src="'+D+'" alt=""></p><ul><li>修改初速度 <code>LinearVelocity:{x:10,y:0}</code></li></ul><p><img src="'+P+'" alt=""></p><ul><li>修改旋转速度 <code>AngularVelocity:10</code></li></ul><p><img src="'+B+`" alt=""></p></li></ol><h3 id="_3-3-2-物理碰撞" tabindex="-1"><a class="header-anchor" href="#_3-3-2-物理碰撞"><span>3.3.2 物理碰撞</span></a></h3><ol><li><p>刚体获取物理特性</p><ul><li>获取刚体</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 获取刚体</span></span>
<span class="line"><span class="token keyword">let</span> rigidbody <span class="token operator">=</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>RigidBody2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>使用 <code>applyForce</code></p><ul><li>代码</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 方向上的作用力 作用到节点上的点</span></span>
<span class="line">rigidbody<span class="token punctuation">.</span><span class="token function">applyForce</span><span class="token punctuation">(</span><span class="token function">v2</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">v2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行结果</li></ul><p><img src="`+q+`" alt=""></p></li><li><p>使用 <code>applyForceToCenter</code></p><ul><li>代码</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 方向上的作用力 </span></span>
<span class="line">rigidbody<span class="token punctuation">.</span><span class="token function">applyForceToCenter</span><span class="token punctuation">(</span><span class="token function">v2</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行结果</li></ul><p><img src="`+E+`" alt=""></p></li><li><p>初速度</p><ul><li>代码</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 物体的初速度</span></span>
<span class="line">rigidbody<span class="token punctuation">.</span>linearVelocity <span class="token operator">=</span> <span class="token function">v2</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行结果</li></ul><p><img src="`+V+'" alt=""></p></li></ul></li><li><p>物体碰撞</p><ul><li>设定陆地,拥有刚体以及检测体</li></ul><p><img src="'+I+'" alt=""></p><ul><li>设定小鸟</li></ul><p><img src="'+j+'" alt=""></p><ul><li>运行结果</li></ul><p><img src="'+A+`" alt=""></p><ul><li>脚本中使用回调</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> v2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;cc&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span>RigidBody2D<span class="token punctuation">,</span> Collider2D<span class="token punctuation">,</span> Contact2DType<span class="token punctuation">,</span> IPhysics2DContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;cc&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&quot;BirdControl&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BirdControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 获取刚体</span></span>
<span class="line">        <span class="token keyword">let</span> rigidbody <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>RigidBody2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 力</span></span>
<span class="line">        <span class="token comment">// rigidbody.applyForce(v2(300,0),v2(0,0),true)</span></span>
<span class="line">        <span class="token comment">// rigidbody.applyForceToCenter(v2(300,0),true)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 速度</span></span>
<span class="line">        rigidbody<span class="token punctuation">.</span>linearVelocity <span class="token operator">=</span> <span class="token function">v2</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line highlighted">        <span class="token comment">// 碰撞体</span></span>
<span class="line highlighted">        <span class="token keyword">let</span> collider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Collider2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">        collider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">BEGIN_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onBeginContact<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">        collider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">END_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onEndContact<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line highlighted">    <span class="token comment">// 开始碰撞</span></span>
<span class="line highlighted">    <span class="token function">onBeginContact</span><span class="token punctuation">(</span>self<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> other<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span>contact<span class="token operator">:</span> IPhysics2DContact <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;检测到碰撞&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">        <span class="token comment">// 得到碰撞点 数组类型</span></span>
<span class="line highlighted">        <span class="token keyword">let</span> points <span class="token operator">=</span>  contact<span class="token punctuation">.</span><span class="token function">getWorldManifold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>points</span>
<span class="line highlighted">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">        <span class="token comment">// 得到法线信息</span></span>
<span class="line highlighted">        <span class="token comment">// 法线垂直于平面的线</span></span>
<span class="line highlighted">        <span class="token keyword">let</span> normal <span class="token operator">=</span> contact<span class="token punctuation">.</span><span class="token function">getWorldManifold</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>normal</span>
<span class="line highlighted">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>normal<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">        </span>
<span class="line highlighted">    <span class="token punctuation">}</span></span>
<span class="line highlighted">    <span class="token comment">// 结束碰撞</span></span>
<span class="line highlighted">    <span class="token function">onEndContact</span><span class="token punctuation">(</span>selfCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> otherCollider<span class="token operator">:</span> Collider2D<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;离开碰撞区域&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line highlighted">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>允许结果</li></ul><p><img src="`+N+'" alt=""></p></li></ol><h3 id="_3-3-3-传感器" tabindex="-1"><a class="header-anchor" href="#_3-3-3-传感器"><span>3.3.3 传感器</span></a></h3><ol><li><p>精灵取消显示，且勾选上传感器</p><p><img src="'+S+'" alt=""></p></li><li><p>页面效果</p><p><img src="'+U+'" alt=""></p></li><li><p>运行结果</p><p><img src="'+O+`" alt=""></p><p>可以看出 依然会碰撞，但是没有碰撞点，且法线没有意义了</p></li></ol><h3 id="_3-3-4-射线" tabindex="-1"><a class="header-anchor" href="#_3-3-4-射线"><span>3.3.4 射线</span></a></h3><ol><li><p>射线写法</p><ul><li><p>代码</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">const</span> results <span class="token operator">=</span> PhysicsSystem2D<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">raycast</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> type<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> results<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> result <span class="token operator">=</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> collider <span class="token operator">=</span> result<span class="token punctuation">.</span>collider<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> point <span class="token operator">=</span> result<span class="token punctuation">.</span>point<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> normal <span class="token operator">=</span> result<span class="token punctuation">.</span>normal<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> fraction <span class="token operator">=</span> result<span class="token punctuation">.</span>fraction<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>射线长度 p1 到 p2 点的线</p></li><li><p>type 类型</p><ul><li>ERaycast2DType.Any：检测射线路径上任意的碰撞体，一旦检测到任何碰撞体，将立刻结束检测其他的碰撞体，最快。</li><li>ERaycast2DType.Closest：检测射线路径上最近的碰撞体，这是射线检测的默认值，稍慢。</li><li>ERaycast2DType.All：检测射线路径上的所有碰撞体，检测到的结果顺序不是固定的。在这种检测类型下，一个碰撞体可能会返回多个结果，这是因为 Box2D 是通过检测夹具（fixture）来进行物体检测的，而一个碰撞体中可能由多个夹具（fixture）组成的，慢。</li><li>ERaycast2DType.AllClosest：检测射线路径上所有碰撞体，但是会对返回值进行删选，只返回每一个碰撞体距离射线起始点最近的那个点的相关信息，最慢。</li></ul></li><li><p>射线检测的结果</p><ul><li>collider：指定射线穿过的是哪一个碰撞体。</li><li>point：指定射线与穿过的碰撞体在哪一点相交。</li><li>normal：指定碰撞体在相交点的表面的法线向量。</li><li>fraction：指定相交点在射线上的分数。</li></ul><p><img src="`+R+'" alt=""></p></li></ul></li><li><p>射线小练习</p><ul><li><p>设置两堵墙</p><p><img src="'+F+'" alt=""></p></li><li><p>设置巡逻物体（用于发送射线）</p><p><img src="'+z+`" alt=""></p><blockquote><p>注意： 千万不要添加碰撞体，否则巡逻物体移动后 依然会在原地留下碰撞体</p></blockquote></li><li><p>脚本</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Vec2<span class="token punctuation">,</span>PhysicsSystem2D<span class="token punctuation">,</span>ERaycast2DType<span class="token punctuation">,</span>UITransform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;RayTest&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">RayTest</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 方向</span></span>
<span class="line">    dir<span class="token operator">:</span>Vec2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vec2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dir<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dir<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// 射线检测</span></span>
<span class="line">        <span class="token comment">// 3.8 开始 射线检测要用世界坐标系</span></span>
<span class="line">        <span class="token keyword">let</span> worldPoint <span class="token operator">=</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getWorldPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vec2</span><span class="token punctuation">(</span> worldPoint<span class="token punctuation">.</span>x  <span class="token punctuation">,</span>worldPoint<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> end <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vec2</span><span class="token punctuation">(</span>start<span class="token punctuation">.</span>x<span class="token punctuation">,</span>start<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dir<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token number">80</span><span class="token punctuation">)</span> <span class="token comment">// 射线的长度为80</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 初始化射线</span></span>
<span class="line">        <span class="token keyword">let</span> res <span class="token operator">=</span>  PhysicsSystem2D<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">raycast</span><span class="token punctuation">(</span></span>
<span class="line">            start<span class="token punctuation">,</span>                  <span class="token comment">// 线的初始点位</span></span>
<span class="line">            end<span class="token punctuation">,</span>                    <span class="token comment">// 线的结束点位</span></span>
<span class="line">            ERaycast2DType<span class="token punctuation">.</span>Closest  <span class="token comment">// 检测类型：Closest 第一次碰到的点</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>dir<span class="token punctuation">.</span>y <span class="token operator">*=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行结果</p><p><img src="`+M+`" alt=""></p></li></ul></li></ol><h2 id="_3-4-动作系统" tabindex="-1"><a class="header-anchor" href="#_3-4-动作系统"><span>3.4 动作系统</span></a></h2><ol><li><p>基础动作类型</p><ul><li><p>位移动作 (Move)</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 移动到指定位置(绝对坐标)</span></span>
<span class="line"><span class="token keyword">const</span> moveTo <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 移动相对距离</span></span>
<span class="line"><span class="token keyword">const</span> moveBy <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>旋转动作 (Rotate)</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 旋转到指定角度</span></span>
<span class="line"><span class="token keyword">const</span> rotateTo <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> eulerAngles<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 旋转相对角度</span></span>
<span class="line"><span class="token keyword">const</span> rotateBy <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> eulerAngles<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>缩放动作 (Scale)</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 缩放到指定大小</span></span>
<span class="line"><span class="token keyword">const</span> scaleTo <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 相对缩放</span></span>
<span class="line"><span class="token keyword">const</span> scaleBy <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>复合动作</p><ul><li><p>顺序执行 (Sequence)</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">sequence</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>同时执行 (Parallel)</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> eulerAngles<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>缓动效果 (Easing)</p><ul><li>Cocos Creator 提供了多种缓动函数：</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> tween<span class="token punctuation">,</span> Easing <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> easing<span class="token operator">:</span> Easing<span class="token punctuation">.</span>QuadInOut <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>常用缓动函数：</p><ul><li><code>Easing.QuadIn</code> - 加速</li><li><code>Easing.QuadOut</code> - 减速</li><li><code>Easing.QuadInOut</code> - 先加速后减速</li><li><code>Easing.ElasticIn</code> - 弹性效果</li><li><code>Easing.BounceOut</code> - 弹跳效果</li></ul></li></ul></li><li><p>回调与事件</p><ul><li><p>动作回调</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;移动完成&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>自定义事件</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;moveComplete&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;moveComplete&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;接收到移动完成事件&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>高级用法</p><ul><li><p>重复动作</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 重复3次</span></span>
<span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 无限循环</span></span>
<span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">repeatForever</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token function">tween</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> rotation<span class="token operator">:</span> <span class="token number">180</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> rotation<span class="token operator">:</span> <span class="token number">360</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>延迟执行</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 延迟1秒</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>贝塞尔曲线运动</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">const</span> bezier <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">// 起点</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 控制点1</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 控制点2</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment">// 终点</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">bezierTo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> bezier<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>动作控制</p><ul><li><p>停止动作</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 创建并保存tween对象</span></span>
<span class="line"><span class="token keyword">const</span> myTween <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> position<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 停止动作</span></span>
<span class="line">myTween<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>暂停/恢复</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 暂停所有动作</span></span>
<span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pauseAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 恢复所有动作</span></span>
<span class="line"><span class="token function">tween</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resumeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>提供实现方法</p><ul><li><p>淡入淡出</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 淡入显示</span></span>
<span class="line"><span class="token function">showWithFade</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    node<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> opacity <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UIOpacity<span class="token punctuation">)</span> <span class="token operator">||</span> node<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span>UIOpacity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    opacity<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token function">tween</span><span class="token punctuation">(</span>opacity<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> <span class="token punctuation">{</span> opacity<span class="token operator">:</span> <span class="token number">255</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 淡出隐藏</span></span>
<span class="line"><span class="token function">hideWithFade</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> opacity <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UIOpacity<span class="token punctuation">)</span> <span class="token operator">||</span> node<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span>UIOpacity<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token function">tween</span><span class="token punctuation">(</span>opacity<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> <span class="token punctuation">{</span> opacity<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> node<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>缩放显示隐藏</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 缩放显示</span></span>
<span class="line"><span class="token function">showWithScale</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    node<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">    node<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token function">tween</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> easing<span class="token operator">:</span> <span class="token string">&#39;backOut&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 缩放隐藏</span></span>
<span class="line"><span class="token function">hideWithScale</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">tween</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> easing<span class="token operator">:</span> <span class="token string">&#39;backIn&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> node<span class="token punctuation">.</span>active <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>翻转动作</p><ul><li><p>水平翻转</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">flipHorizontal</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">tween</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>垂直翻转</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">flipVertical</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">tween</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>3D翻转效果</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token function">flip3D</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">tween</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> eulerAngles<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 这里可以更换显示内容</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>duration<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> eulerAngles<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Vec3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li></ol><h2 id="_3-5-动画系统" tabindex="-1"><a class="header-anchor" href="#_3-5-动画系统"><span>3.5 动画系统</span></a></h2><h3 id="_3-5-1-基础认识" tabindex="-1"><a class="header-anchor" href="#_3-5-1-基础认识"><span>3.5.1 基础认识</span></a></h3><ol><li><p>创建动画</p><p><img src="`+Y+'" alt=""></p></li><li><p>动画编辑器菜单</p><p><img src="'+X+'" alt=""></p></li><li><p>运行结果</p><p><img src="'+G+'" alt=""></p></li></ol><h3 id="_3-5-2-脚本相关" tabindex="-1"><a class="header-anchor" href="#_3-5-2-脚本相关"><span>3.5.2 脚本相关</span></a></h3><ol><li><p>插入帧事件</p><ul><li><p>界面操作</p><p><img src="'+W+'" alt=""></p></li><li><p>双击新建的帧事件按钮</p><p><img src="'+H+`" alt=""></p></li><li><p>脚本</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Node <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;AnimationTest&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AnimationTest</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">custom</span><span class="token punctuation">(</span>param<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;被调用了,参数是：&quot;</span><span class="token punctuation">,</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行结果</p><p><img src="`+L+`" alt=""></p></li></ul></li><li><p>控制动画播放</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Animation<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Node <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;AnimationTest&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AnimationTest</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> ani <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Animation<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 播放</span></span>
<span class="line">        ani<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 暂停</span></span>
<span class="line">        ani<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 恢复</span></span>
<span class="line">        ani<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 停止</span></span>
<span class="line">        ani<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="_3-5-3-关键帧动画" tabindex="-1"><a class="header-anchor" href="#_3-5-3-关键帧动画"><span>3.5.3 关键帧动画</span></a></h3><ol><li><p>添加动画组件、动画属性</p><p><img src="`+K+'" alt=""></p></li><li><p>关键帧图片突入新建属性中</p><p><img src="'+Q+'" alt=""></p></li><li><p>运行结果</p><p><img src="'+J+'" alt=""></p></li></ol><h2 id="_3-6-管道鸟练习" tabindex="-1"><a class="header-anchor" href="#_3-6-管道鸟练习"><span>3.6 管道鸟练习</span></a></h2><ol><li><p>添加资源与屏幕大小</p><p><img src="'+Z+'" alt=""></p></li><li><p>背景设计</p><ul><li><p>背景图片结构设置</p><p><img src="'+$+`" alt=""></p></li><li><p>父节点脚本设计</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Node <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;BgControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BgControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 速度</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    speed<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 宽度</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    width<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">288</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> bg <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            bg<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">*</span> deltaTime <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 如果背景超出</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span>bg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                bg<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行结果</p><p><img src="`+nn+'" alt=""></p></li></ul></li><li><p>陆地设计</p><ul><li><p>背景类似，也使用同样的脚本，传入不同的参数</p><p><img src="'+sn+'" alt=""></p></li><li><p>运行结果</p><p><img src="'+an+'" alt=""></p></li></ul></li><li><p>小鸟设计</p><ul><li><p>小鸟节点创建于动画</p><p><img src="'+pn+'" alt=""></p></li><li><p>设置小鸟刚体、碰撞体、脚本</p><p><img src="'+tn+`" alt=""></p></li><li><p>小鸟脚本</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Animation<span class="token punctuation">,</span> RigidBody2D<span class="token punctuation">,</span> Vec2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;birdControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">birdControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> ani <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Animation<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 播放</span></span>
<span class="line">        ani<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 飞</span></span>
<span class="line">    <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> RigidBody <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>RigidBody2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// 设置向上的除速度</span></span>
<span class="line">        RigidBody<span class="token punctuation">.</span>linearVelocity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vec2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>点击事件修改</p><ul><li><p>背景脚本修该</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> birdControl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./BirdControl&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;BgControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BgControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 速度</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    speed<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 宽度</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    width<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">288</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 小鸟</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span>birdControl<span class="token punctuation">)</span></span>
<span class="line">    bird<span class="token operator">:</span>birdControl <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 点击监听</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> bg <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            bg<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Input<span class="token punctuation">.</span>EventType<span class="token punctuation">.</span><span class="token constant">TOUCH_START</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">this</span><span class="token punctuation">.</span>bird<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 移动</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> bg <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            bg<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">*</span> deltaTime <span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 如果背景超出</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span>bg<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                bg<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>界面参数设置</p><p><img src="`+en+'" alt=""></p></li></ul></li><li><p>陆地添加刚体、碰撞体</p><p><img src="'+on+'" alt=""></p></li><li><p>运行结果</p></li></ul></li><li><p>管道设计</p><ul><li><p>新建管理节点，用于一直添加上下管道</p><p><img src="'+cn+'" alt=""></p></li><li><p>新建预设体</p><ul><li><p>主节点</p><p><img src="'+ln+'" alt=""></p></li><li><p>子节点-上</p><p><img src="'+un+'" alt=""></p></li><li><p>子节点-下</p><p><img src="'+kn+`" alt=""></p></li></ul></li><li><p>管理管道节点脚本 PipeControl.ts</p></li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Prefab<span class="token punctuation">,</span>find<span class="token punctuation">,</span>Size<span class="token punctuation">,</span>instantiate<span class="token punctuation">,</span>UITransform<span class="token punctuation">,</span>BoxCollider2D<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;PipeControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PipeControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    speed<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 敌机预设体</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span>Prefab<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    nextPipe<span class="token operator">:</span> Prefab <span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 设置画布</span></span>
<span class="line">    canvasUI<span class="token operator">:</span><span class="token builtin">any</span><span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>canvasUI <span class="token operator">=</span>  <span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;Canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPipe</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> pipe <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            pipe<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">*</span> deltaTime<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span>pipe<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvasUI<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvasUI<span class="token punctuation">.</span>anchorX <span class="token operator">-</span> <span class="token number">150</span> <span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// 生成一个新的节点</span></span>
<span class="line">                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createPipe</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span>  </span>
<span class="line"></span>
<span class="line">                <span class="token comment">// 旧节点给删掉</span></span>
<span class="line">                pipe<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token function">createPipe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> newPipe <span class="token operator">=</span> <span class="token function">instantiate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nextPipe<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// // 获取自身的碰撞体</span></span>
<span class="line">        <span class="token keyword">let</span> newPipeColliderBox <span class="token operator">=</span> newPipe<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>BoxCollider2D<span class="token punctuation">)</span><span class="token punctuation">;</span>        </span>
<span class="line"></span>
<span class="line">        <span class="token comment">// // 获取两个子节点</span></span>
<span class="line">        <span class="token keyword">let</span> downPipe <span class="token operator">=</span>  newPipe<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">let</span> downPipeUI <span class="token operator">=</span>  downPipe<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// // 上半部分能移动的最大距离</span></span>
<span class="line">        downPipe<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">200</span> <span class="token operator">+</span> <span class="token number">150</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// 中间的传感器部分 300-500 以内</span></span>
<span class="line">        <span class="token keyword">let</span> colliderBoxHeight  <span class="token operator">=</span> <span class="token number">320</span> <span class="token operator">+</span> <span class="token number">50</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> </span>
<span class="line">        <span class="token keyword">let</span> colliderBoxWidth <span class="token operator">=</span> newPipeColliderBox<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">;</span></span>
<span class="line">        newPipeColliderBox<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Size</span><span class="token punctuation">(</span>colliderBoxWidth<span class="token punctuation">,</span> colliderBoxHeight<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 下半部分的点位</span></span>
<span class="line">        <span class="token keyword">let</span> upPipe <span class="token operator">=</span> newPipe<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token keyword">let</span> upPipeUI <span class="token operator">=</span>  upPipe<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>UITransform<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        upPipe<span class="token punctuation">.</span>y <span class="token operator">=</span> downPipe<span class="token punctuation">.</span>y <span class="token operator">-</span> newPipeColliderBox<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height </span>
<span class="line">                    <span class="token operator">-</span>  upPipeUI<span class="token punctuation">.</span>height <span class="token operator">*</span> upPipeUI<span class="token punctuation">.</span>anchorY <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 确认 X 点位 图的宽度是 288 + 52 + (100 内的随机数)</span></span>
<span class="line">        newPipe<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvasUI<span class="token punctuation">.</span>width <span class="token operator">+</span> downPipeUI<span class="token punctuation">.</span>width <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>newPipe<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>运行结果</p><p><img src="`+rn+`" alt=""></p></li></ul></li><li><p>碰撞调用</p><ul><li>小鸟脚本修改 BirdControl.ts</li></ul><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Animation<span class="token punctuation">,</span> RigidBody2D<span class="token punctuation">,</span> Vec2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Contact2DType<span class="token punctuation">,</span>BoxCollider2D<span class="token punctuation">,</span>Collider2D<span class="token punctuation">,</span>IPhysics2DContact<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;birdControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">birdControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> ani <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Animation<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 播放</span></span>
<span class="line">        ani<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 获取碰撞体组件</span></span>
<span class="line">        <span class="token keyword">let</span> collider <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Collider2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        collider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>Contact2DType<span class="token punctuation">.</span><span class="token constant">BEGIN_CONTACT</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onBeginContact<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 飞</span></span>
<span class="line">    <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> RigidBody <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>RigidBody2D<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// 设置向上的除速度</span></span>
<span class="line">        RigidBody<span class="token punctuation">.</span>linearVelocity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vec2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">onBeginContact</span><span class="token punctuation">(</span>self<span class="token operator">:</span> Collider2D<span class="token punctuation">,</span> other<span class="token operator">:</span> Collider2D<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;加分&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;死亡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>运行结果</p><p><img src="`+dn+'" alt=""></p></li></ul></li></ol><h2 id="_3-7-自定义动画脚本" tabindex="-1"><a class="header-anchor" href="#_3-7-自定义动画脚本"><span>3.7 自定义动画脚本</span></a></h2><ol><li><p>界面</p><p><img src="'+mn+`" alt=""></p></li><li><p>脚本</p><ul><li><p>SelfAnimation.ts</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component<span class="token punctuation">,</span> Node<span class="token punctuation">,</span> Sprite<span class="token punctuation">,</span> SpriteFrame <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;SelfAnimation&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SelfAnimation</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 每秒播放速度</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    speed<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 播放帧数组</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span>SpriteFrame<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    sprites<span class="token operator">:</span> SpriteFrame<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 是否播放动画</span></span>
<span class="line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span></span>
<span class="line">    isPlay<span class="token operator">:</span><span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 当前播放帧</span></span>
<span class="line">    index<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 计时器</span></span>
<span class="line">    timer<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>isPlay <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>isPlay <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlay<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 播放动画</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// 计时器增加</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">+=</span> deltaTime<span class="token punctuation">;</span></span>
<span class="line">            <span class="token comment">// 大于当前播放间隔 开始执行</span></span>
<span class="line">            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token comment">// 切换帧 0 1 2 0 1 2</span></span>
<span class="line">                <span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sprites<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                    <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">.</span>spriteFrame <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sprites<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>SelfControl.ts</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> _decorator<span class="token punctuation">,</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;cc&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> SelfAnimation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./SelfAnimation&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> ccclass<span class="token punctuation">,</span> property <span class="token punctuation">}</span> <span class="token operator">=</span> _decorator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token decorator"><span class="token at operator">@</span><span class="token function">ccclass</span></span><span class="token punctuation">(</span><span class="token string">&#39;SelfControl&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SelfControl</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 调用脚本中的方法</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span>SelfAnimation<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">update</span><span class="token punctuation">(</span>deltaTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>运行结果</p><p><img src="`+vn+'" alt=""></p></li></ol>',34)]))}const fn=s(bn,[["render",yn]]),wn=JSON.parse('{"path":"/application/cocos/base/03.html","title":"三、cocos creator 进阶","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1754285665000,"contributors":[{"name":"zhao-farmer","username":"zhao-farmer","email":"857899180@qq.com","commits":1,"url":"https://github.com/zhao-farmer"}],"changelog":[{"hash":"bf54d5db5209f06fb3d25687934eecf69571d546","time":1754285665000,"email":"857899180@qq.com","author":"zhao-farmer","message":"2025年8月"}]},"filePathRelative":"application/cocos/base/03.md"}');export{fn as comp,wn as data};
