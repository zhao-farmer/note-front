import{aq as s,ar as a,as as e,at as l}from"./app-Cok9BT0p.js";const t={};function p(i,n){return l(),a("div",null,n[0]||(n[0]=[e(`<h3 id="_5-2-4-模板装饰器" tabindex="-1"><a class="header-anchor" href="#_5-2-4-模板装饰器"><span>5.2.4 模板装饰器</span></a></h3><p><code>@defer</code> 是 Angular 16 引入的全新模板装饰器，用于实现组件的条件延迟加载，可以显著提升应用初始加载性能。</p><ol><li><p>基本语法结构</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line">@defer (when condition) {</span>
<span class="line">    <span class="token comment">&lt;!-- 延迟加载的内容 --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heavy-component</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">} @placeholder (minimum 500ms) {</span>
<span class="line">    <span class="token comment">&lt;!-- 加载前的占位内容 --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">} @loading {</span>
<span class="line">    <span class="token comment">&lt;!-- 加载过程中显示 --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spinner-component</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">} @error {</span>
<span class="line">    <span class="token comment">&lt;!-- 加载失败时显示 --&gt;</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Failed to load component<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>触发条件（When Conditions）</p><ul><li><p>基于布尔条件</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line">@defer (when isVisible) {</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-heavy-component</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>基于视图端口可见性</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line">@defer (on viewport) {</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-image-gallery</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">} @placeholder {</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>placeholder<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Scroll to see gallery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>基于交互事件</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">#trigger</span><span class="token punctuation">&gt;</span></span>Load Chart<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">@defer (on interaction(trigger)) {</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-data-chart</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>基于定时器</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line">@defer (on timer(5s)) {</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-recommendations</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>组合条件</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line">@defer (when shouldLoad; on viewport; prefetch on hover) {</span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-heavy-component</span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol>`,3)]))}const o=s(t,[["render",p]]),d=JSON.parse('{"path":"/framework/angular/base20/05.html","title":"","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1756103336000,"contributors":[{"name":"zhao-farmer","username":"zhao-farmer","email":"857899180@qq.com","commits":1,"url":"https://github.com/zhao-farmer"}],"changelog":[{"hash":"20f6913b2d2473e2422a33fde2d9aa7c6833f328","time":1756103336000,"email":"857899180@qq.com","author":"zhao-farmer","message":"8月提交代码"}]},"filePathRelative":"framework/angular/base20/05.md"}');export{o as comp,d as data};
