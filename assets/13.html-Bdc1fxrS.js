import{aq as s,ar as a,as as e,at as t}from"./app-Cok9BT0p.js";const p={};function c(i,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h1 id="十三、ticker" tabindex="-1"><a class="header-anchor" href="#十三、ticker"><span>十三、ticker</span></a></h1><p>PixiJS中的 <code>Ticker</code> 类为在每个动画帧上执行回调提供了强大而灵活的机制。这对于管理游戏循环、动画和任何基于时间的更新都很有用。</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Ticker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pixi.js&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> ticker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ticker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ticker<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Delta Time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>ticker<span class="token punctuation">.</span>deltaTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Start the ticker</span></span>
<span class="line">ticker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-1-添加和删除侦听器" tabindex="-1"><a class="header-anchor" href="#_13-1-添加和删除侦听器"><span>13.1 添加和删除侦听器</span></a></h2><p><code>Ticker</code> 类允许您添加将在每一帧上调用的多个侦听器。您还可以为回调指定上下文，这对于维护正确的 <code>this</code> 引用很有用。</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line">ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myFunction<span class="token punctuation">,</span> myContext<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ticker<span class="token punctuation">.</span><span class="token function">addOnce</span><span class="token punctuation">(</span>myFunction<span class="token punctuation">,</span> myContext<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ticker<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>myFunction<span class="token punctuation">,</span> myContext<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-2-控制股票行情" tabindex="-1"><a class="header-anchor" href="#_13-2-控制股票行情"><span>13.2 控制股票行情</span></a></h2><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line">ticker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开始每帧调用侦听器</span></span>
<span class="line">ticker<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 暂停自动收报机并取消动画帧</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>要在添加监听器时自动启动定时器，请启用 <code>autoStart</code> ：</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line">ticker<span class="token punctuation">.</span>autoStart <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_13-3-优先考虑听众" tabindex="-1"><a class="header-anchor" href="#_13-3-优先考虑听众"><span>13.3 优先考虑听众</span></a></h2><p>可以为侦听器分配优先级。更高的值运行得更早。</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">UPDATE_PRIORITY</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pixi.js&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fnA<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token constant">UPDATE_PRIORITY</span><span class="token punctuation">.</span><span class="token constant">HIGH</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// runs before...</span></span>
<span class="line">ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fnB<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token constant">UPDATE_PRIORITY</span><span class="token punctuation">.</span><span class="token constant">NORMAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ...this</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可用的常量包括：</p><ul><li><code>UPDATE_PRIORITY.HIGH = 50</code></li><li><code>UPDATE_PRIORITY.NORMAL = 0</code></li><li><code>UPDATE_PRIORITY.LOW = -50</code></li></ul><h2 id="_13-4-配置帧" tabindex="-1"><a class="header-anchor" href="#_13-4-配置帧"><span>13.4 配置帧</span></a></h2><p>Tickers允许FPS限制来控制更新速率。</p><h3 id="_13-4-1-minfps" tabindex="-1"><a class="header-anchor" href="#_13-4-1-minfps"><span>13.4.1 <code>minFPS</code></span></a></h3><p>限制允许的帧速度。用于夹紧 <code>deltaTime</code> ；</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line">ticker<span class="token punctuation">.</span>minFPS <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment">// deltaTime will never act as if below 30 FPS</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_13-4-2-maxfps" tabindex="-1"><a class="header-anchor" href="#_13-4-2-maxfps"><span>13.4.2 <code>maxFPS</code></span></a></h3><p>限制自动报价器运行的速度。有用的节省CPU/GPU：</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line">ticker<span class="token punctuation">.</span>maxFPS <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span> <span class="token comment">// will not tick faster than 60fps</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>设置为 <code>0</code> 允许无限帧数：</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line">ticker<span class="token punctuation">.</span>maxFPS <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,25)]))}const l=s(p,[["render",c]]),u=JSON.parse('{"path":"/animation/pixi/official/13.html","title":"十三、ticker","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1752490925000,"contributors":[{"name":"zhao-farmer","username":"zhao-farmer","email":"857899180@qq.com","commits":1,"url":"https://github.com/zhao-farmer"}],"changelog":[{"hash":"08d014805d6447d2221b34fe03fdc2ca18411d66","time":1752490925000,"email":"857899180@qq.com","author":"zhao-farmer","message":"2025年7月更新"}]},"filePathRelative":"animation/pixi/official/13.md"}');export{l as comp,u as data};
