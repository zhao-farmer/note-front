# äº”ã€wxml è¯­æ³•

## 5.1 æ¨¡æ¿è¯­æ³•

1. ä»‹ç»
    å°ç¨‹åºé¡µé¢ä¸­ä½¿ç”¨çš„æ•°æ®å‡éœ€è¦åœ¨ `Page()`æ–¹æ³•çš„ `data` å¯¹è±¡ä¸­è¿›è¡Œå£°æ˜å®šä¹‰åœ¨å°†æ•°æ®å£°æ˜å¥½ä»¥åï¼Œåœ¨ WXML ä½¿ç”¨ `Mustache è¯­æ³•(åŒå¤§æ‹¬å·{{}})`å°†å˜é‡åŒ…èµ·æ¥ï¼Œä»è€Œå°†æ•°æ®ç»‘å®š


    åœ¨`{{ }}`å†…éƒ¨å¯ä»¥åšä¸€äº›ç®€å•çš„è¿ç®—ï¼Œæ”¯æŒå¦‚ä¸‹å‡ ç§æ–¹å¼:

    1. ç®—æ•°è¿ç®—
    2. ä¸‰å…ƒè¿ç®—
    3. é€»è¾‘åˆ¤æ–­
    4. å…¶ä»–...

2. ä»£ç é¢œè‰²

    - ä»£ç 

    index.wxml

    ```xml
    <!-- å¦‚æœéœ€è¦å±•ç¤ºæ•°æ®ï¼Œåœ¨wxmlä¸­éœ€è¦ä½¿ç”¨åŒå¤§æ‹¬å·å†™æ³• -->

    <!-- å±•ç¤ºå†…å®¹ -->
    <view>{{school}}</view>
    <view>{{obj.name}}</view>

    <!-- ç»‘å®šå±æ€§å€¼ï¼Œå¦‚æœéœ€è¦åŠ¨æ€ç»‘å®šä¸€ä¸ªå˜é‡ï¼Œå±æ€§å€¼ä¹Ÿéœ€è¦å¤§æ‹¬å·åŒ…è£¹èµ·æ¥ -->
    <view id="{{id}}">ç»‘å®šå±æ€§å€¼</view>

    <!-- å¦‚æœå±æ€§å€¼æ˜¯å¸ƒå°”å€¼ï¼Œä¹Ÿéœ€è¦éœ€è¦ä½¿ç”¨åŒå¤§æ‹¬å·åŒ…è£¹èµ·æ¥ -->
    <checkbox checked="{{ isChecked }}"/>


    <!-- ç®—æœ¯è¿ç®— -->
    <view>{{ id + 1 }}</view>
    <view>{{ id - 1 }}</view>

    <!-- ä¸‰å…ƒè¿ç®— -->
    <view>{{ id === 1 ? 'ç­‰äº':'ä¸ç­‰äº'}}</view>

    <!-- é€»è¾‘åˆ¤æ–­ -->
    <view>{{ id === 1 }}</view>

    <!-- åœ¨åŒå¤§æ‹¬å·å†…éƒ¨ï¼Œåªèƒ½å†™è¡¨è¾¾å¼ï¼Œä¸èƒ½å†™è¯­å¥ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨jsçš„æ–¹æ³• -->
    <!-- <view>{{ if(id === 1){} }}</view> -->
    <!-- <view>{{ for(const i = 0;i<=10;i++){} }}</view> -->

    <view>{{obj.name.toUppercase()}}</view>
    ```

    index.js

    ```js
    // index.js
    Page({
        // åœ¨å°ç¨‹åºé¡µé¢ä¸­æ‰€éœ€è¦ä½¿ç”¨çš„æ•°æ®å‡æ¥è‡ªäº data
        data:{
            id:1,
            isChecked:true,
            school:'å°šç¡…è°·',
            obj:{
            name:"tom"
            }
        }

    })

    ```

    - è¿è¡Œç»“æœ

    ![](/application/weixin/base/066.png)


3. æ³¨æ„äº‹é¡¹

åœ¨`{{}}`è¯­æ³•ä¸­ï¼Œåªèƒ½å†™è¡¨è¾¾å¼ï¼Œä¸èƒ½å†™è¯­å¥ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨js ç›¸å…³çš„æ–¹æ³•


## 5.2 setDataä¿®æ”¹æ•°æ®



å°ç¨‹åºä¸­ä¿®æ”¹æ•°æ®ä¸æ¨èé€šè¿‡èµ‹å€¼çš„æ–¹å¼è¿›è¡Œä¿®æ”¹ï¼Œé€šè¿‡èµ‹å€¼çš„æ–¹å¼ä¿®æ”¹æ•°æ®æ— æ³•æ”¹å˜é¡µé¢çš„æ•°æ®è€Œæ˜¯è¦é€šè¿‡è°ƒç”¨ `setData()`æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œ`setData()`æ–¹æ³•æ¥æ”¶å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œkey æ˜¯éœ€è¦ä¿®æ”¹çš„æ•°æ®ï¼Œvalue æ˜¯æœ€æ–°çš„å€¼

`setData()`æ–¹æ³•æœ‰ä¸¤ä¸ªä½œç”¨:

1. æ›´æ–°æ•°æ®
2. é©±åŠ¨è§†å›¾æ›´æ–°


### 5.2.1 ä¿®æ”¹åŸºç¡€æ•°æ®


- ä»£ç 

cate.wxml

```xml
<view>{{num}}</view>
<button bind:tap="updateNum">æ›´æ–° num</button>
```

cate.js

```js
// pages/cate/cate.js
Page({
data:{
    num:1
},

// æ›´æ–°num
updateNum(){
    // é€šè¿‡èµ‹å€¼çš„æ–¹å¼ç›´æ¥ä¿®æ”¹æ•°æ®
    // èƒ½å¤Ÿä¿®æ”¹æ•°æ®ï¼Œä¸èƒ½æ”¹å˜é¡µé¢ä¸Šçš„æ•°æ®
    // this.data.num += 1

    // this.setData ä¸¤ä¸ªä½œç”¨
    // 1. æ›´æ–°æ•°æ®
    // 2. é©±åŠ¨è§†å›¾ï¼ˆé¡µé¢ï¼‰æ›´æ–°
    this.setData({
    // keyï¼š æ˜¯éœ€è¦æ›´æ–°çš„æ•°æ®
    // valueï¼šæ˜¯æœ€æ–°çš„å€¼
    num: this.data.num + 1
    })


    // è·å–æ•°æ®
    console.log(this.data.num);
}

})
```

- è¿è¡Œç»“æœ

![](/application/weixin/base/067.gif)

### 5.2.2 ä¿®æ”¹å¯¹è±¡æ•°æ®


- ä»£ç 

cate.wxml

```xml
<view>æ–°å¢->  å§“åï¼š{{ userInfo1.name }} å¹´é¾„ï¼š{{ userInfo1.age }}</view>
<view>ç›´æ¥ä¿®æ”¹->  å§“åï¼š{{ userInfo2.name }} å¹´é¾„ï¼š{{ userInfo2.age }}</view>
<view>å±•å¼€è¿ç®—ç¬¦->  å§“åï¼š{{ userInfo3.name }} å¹´é¾„ï¼š{{ userInfo3.age }}</view>
<view>Object.assign()->  å§“åï¼š{{ userInfo4.name }} å¹´é¾„ï¼š{{ userInfo4.age }}</view>

<view>åˆ é™¤å•å±æ€§ ->  å§“åï¼š{{ userInfo5.name }} å¹´é¾„ï¼š{{ userInfo5.age }}</view>
<view>åˆ é™¤å¤šå±æ€§ ->  å§“åï¼š{{ userInfo6.name }} å¹´é¾„ï¼š{{ userInfo6.age }}</view>


<button type="warn" bind:tap="updateUserInfo">ä¿®æ”¹å¯¹è±¡ç±»å‹æ•°æ®</button>
```

cate.js

```js
// pages/cate/cate.js
Page({
  data:{
    userInfo1:{
    
    },
    userInfo2:{
      name:"å¼ ä¸‰",
      age:18
    },
    userInfo3:{
      name:"å¼ ä¸‰",
      age:18
    },
    userInfo4:{
      name:"å¼ ä¸‰",
      age:18
    },
    userInfo5:{
      name:"å¼ ä¸‰",
      age:18
    },
    userInfo6:{
      name:"å¼ ä¸‰",
      age:18
    },
  },
  // æ›´æ–° userInfo
  updateUserInfo(){
    // æ–°å¢å•ä¸ª / å¤šä¸ª å±æ€§
    this.setData({
      // å¦‚æœç»™å¯¹è±¡æ–°å¢å±æ€§ï¼Œå¯ä»¥å°†keyå†™æˆæ•°æ®è·¯å¾„çš„æ–¹å¼ a.b.c
      "userInfo1.name":"tom",
      "userInfo1.age":"10"
    })

    // ä¿®æ”¹å•ä¸ª / å¤šä¸ª å±æ€§
    this.setData({
      // å¦‚æœéœ€è¦ä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œä¹Ÿå¯ä»¥å°†keyå†™æˆæ•°æ®è·¯å¾„çš„æ–¹å¼ a.b.c
      "userInfo2.name":"jerry",
      "userInfo2.age":"18"
    })

    // ç›®å‰è¿›è¡Œæ–°å¢å’Œä¿®æ”¹éƒ½æ˜¯ä½¿ç”¨æ•°æ®è·¯å¾„ï¼Œå¦‚æœæ–°å¢å’Œä¿®æ”¹çš„æ•°æ®é‡æ¯”è¾ƒå°ï¼Œè¿˜å¯ä»¥;
    // å¦‚æœä¿®æ”¹çš„æ•°æ®å¾ˆå¤šï¼Œæ¯æ¬¡éƒ½å†™æ•°æ®è·¯å¾„ï¼Œå°±å¤ªéº»çƒ¦äº†
    // å¯ä»¥ä½¿ç”¨ ES6 æä¾›çš„ å±•å¼€è¿ç®—ç¬¦ å’Œ Object.assign()
    
    // ES6 æä¾›çš„å±•å¼€è¿ç®—ç¬¦
    // é€šè¿‡å±•å¼€è¿ç®—ç¬¦èƒ½å¤Ÿå°†å¯¹è±¡çš„å±æ€§å¤åˆ¶ç»™å¦ä¸€ä¸ªå¯¹è±¡
    // åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§
    const userInfo3 = {
      ...this.data.userInfo3,
      name:'Mia',
      age:20
    }

    this.setData({
      userInfo3
    })

    // Object.assign() å°†å¤šä¸ªå¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªå¯¹è±¡
    const userInfo4 = Object.assign(this.data.userInfo4,{name:'mary'},{age:26})

    this.setData({
      userInfo4
    })

    // åˆ é™¤å•ä¸ªå±æ€§
    delete this.data.userInfo5.age
    this.setData({
      userInfo5: this.data.userInfo5
    })

    // åˆ é™¤å¤šä¸ªå±æ€§
    const {age,name,...rest} = this.data.userInfo6

    this.setData({
      userInfo6:rest
    })
  }
})
```

- è¿è¡Œç»“æœ

![](/application/weixin/base/068.gif)



### 5.2.3 ä¿®æ”¹æ•°ç»„æ•°æ®


- ä»£ç 

cate.wxml

```xml
<view>
  åŸºç¡€æ–°å¢
  <text wx:for="{{list1}}" wx:key="index"> {{item}}</text>
</view>
<view>
  è¿æ¥åˆ é™¤
  <text wx:for="{{list2}}" wx:key="index"> {{item}}</text>
</view>
<view>
  å±•å¼€æ–°å¢
  <text wx:for="{{list3}}" wx:key="index"> {{item}}</text>
</view>
<view>
  åŸºç¡€ä¿®æ”¹
  <text wx:for="{{list4}}" wx:key="index"> {{item}}</text>
</view>
<view>
  æ•°ç»„å¯¹è±¡ä¿®æ”¹
  <text> {{list5[0].name}}</text>
</view>
<view>
  åˆ é™¤æ–¹å¼ä¸€
  <text wx:for="{{list6}}" wx:key="index"> {{item}}</text>
</view>
<view>
  åˆ é™¤æ–¹å¼äºŒ
  <text wx:for="{{list6}}" wx:key="index"> {{item}}</text>
</view>

<button type="primary" bind:tap="updateList">ä¿®æ”¹æ•°ç»„ç±»å‹æ•°æ®</button>
```

cate.js

```js
// pages/cate/cate.js
Page({
  data:{
    list1:[1,2,3],
    list2:[1,2,3],
    list3:[1,2,3],
    list4:[1,2,3],
    list5:[
      {id:1,name:"tom"}
    ],
    list6:[1,2,3],
    list7:[1,2,3],
  },

  // æ›´æ–° list
  updateList(){
    // æ–°å¢æ•°ç»„å…ƒç´ 
    // å¦‚æœç›´æ¥ä½¿ç”¨ push æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æ›´æ–° data , ä½†æ˜¯ä¸èƒ½æ›´æ–° é¡µé¢ä¸­çš„æ•°æ®
    // this.data.list.push(4)

    // ç¬¬ä¸€ç§
    this.data.list1.push(4)
    this.setData({
      list1: this.data.list1
    })

    // ç¬¬äºŒç§
    const newList1 =  this.data.list2.concat(5)
    this.setData({
      list2:newList1
    })

    // ç¬¬ä¸‰ç§
    const newList2 = [...this.data.list3,6]
    this.setData({
      list3:newList2
    })

    // ä¿®æ”¹æ•°ç»„å…ƒç´ 
    this.setData({
      'list4[1]':7,
      'list5[0].name':'jerry'
    })


    // åˆ é™¤æ•°ç»„å…ƒç´ 

    // ç¬¬ä¸€ç§
    this.data.list6.splice(1,1)
    this.setData({
      list6: this.data.list6
    })

    // ç¬¬äºŒç§
    const newList3 = this.data.list7.filter(item=> item!==2)
    this.setData({
      list7: newList3
    })
  }
})
```

- è¿è¡Œç»“æœ

![](/application/weixin/base/069.gif)


## 5.2 ç®€æ˜“åŒå‘ç»‘å®š

1. ä»‹ç»

    åœ¨ WXML ä¸­ï¼Œæ™®é€šå±æ€§çš„ç»‘å®šæ˜¯å•å‘çš„ï¼Œä¾‹å¦‚:`<input value="{{value}}"/>`å¦‚æœå¸Œæœ›ç”¨æˆ·è¾“å…¥æ•°æ®çš„åŒæ—¶æ”¹å˜ data ä¸­çš„æ•°æ®ï¼Œå¯ä»¥å€ŸåŠ©ç®€æ˜“åŒå‘ç»‘å®šæœºåˆ¶ã€‚åœ¨å¯¹åº”å±æ€§ä¹‹å‰æ·»åŠ  `model:` å‰ç¼€å³å¯:ä¾‹`<input model:value="{{value}}"` />

2. ä»£ç ç¤ºä¾‹


    - ä»£ç 

    cart.wxml

    ```xml
    <!-- å•å‘ç»‘å®šï¼šæ•°æ®å½±å“é¡µé¢ï¼Œä½†æ˜¯é¡µé¢æ›´æ–°ä¸ä¼šå½±å“åˆ°æ•°æ® -->
    <text>å•å‘æ•°æ®ç»‘å®š valueå€¼: {{value1}}</text>
    <input type="text" value="{{ value1 }}"/>

    <!-- åŒå‘ç»‘å®šï¼šæ•°æ®èƒ½å½±å“é¡µé¢ï¼Œé¡µé¢æ›´æ–°ä¹Ÿèƒ½å½±å“æ•°æ® -->
    <!-- å¦‚æœæƒ³å®ç°ç®€æ˜“åŒå‘ç»‘å®šï¼Œéœ€è¦åœ¨å¯¹åº”å±æ€§ä¹‹å‰æ·»åŠ  model: -->
    <text>åŒå‘æ•°æ®ç»‘å®š valueå€¼: {{value2}}</text>
    <input type="text" model:value="{{ value2 }}"/>

    <!-- å¦‚æœéœ€è¦è·å–å¤é€‰æ¡†çš„é€‰ä¸­æ•ˆæœï¼Œéœ€è¦ç»™checked æ·»åŠ modelæ‰å¯ä»¥ -->
    <text>checkedå€¼ï¼š{{isChecked}}</text>
    <view>
      <checkbox model:checked="{{ isChecked }}"/> ç»‘å®šå¤é€‰æ¡†
    </view>


    <!-- æ³¨æ„äº‹é¡¹1ï¼šå±æ€§å€¼åªèƒ½æ˜¯ä¸€ä¸ªå•ä¸€å­—æ®µçš„ç»‘å®š -->
    <text>æµ‹è¯•å•ä¸€å­—æ®µ valueå€¼: {{value3}}</text>
    <input type="text" model:value="å€¼ä¸º {{value3}}"/>


    <!-- æ³¨æ„äº‹é¡¹2ï¼šå±æ€§å€¼ä¸èƒ½å†™æ•°æ®è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ä¸æ”¯æŒå¯¹è±¡å’Œæ•°ç»„ -->
    <text>æµ‹è¯•å¯¹è±¡å±æ€§å€¼ valueå€¼: {{obj.value}}</text>
    <input type="text" model:value="{{obj.value}}"/>
    ```

    cart.js

    ```js
    // pages/cart/cart.js
    Page({
      data:{
        value1:123,
        value2:123,
        value3:123,
        isChecked:false,
        obj:{
          id:"1",
          value:123
        }
      }
    })
    ```

    - è¿è¡Œç»“æœ

    ![](/application/weixin/base/070.gif)




3. æ³¨æ„äº‹é¡¹:ç®€æ˜“åŒå‘ç»‘å®šçš„å±æ€§å€¼å¦‚ä¸‹é™åˆ¶:


    1. åªèƒ½æ˜¯ä¸€ä¸ªå•ä¸€å­—æ®µçš„ç»‘å®šï¼Œä¾‹å¦‚:é”™è¯¯ç”¨æ³•:`<input model:value="å€¼ä¸ºã€Š{value}}"/>`
    2. å°šä¸èƒ½å†™ data è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ä¸æ”¯æŒæ•°ç»„å’Œå¯¹è±¡ï¼Œä¾‹å¦‚:é”™è¯¯ç”¨æ³•:`<input model:value="{{a.b}}" />`

## 5.3 åˆ—è¡¨æ¸²æŸ“

åˆ—è¡¨æ¸²æŸ“ å°±æ˜¯æŒ‡é€šè¿‡å¾ªç¯éå†ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡ï¼Œå°†å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ æ¸²æŸ“åˆ°é¡µé¢ä¸Š


### 5.3.1 åŸºæœ¬ä½¿ç”¨

1. ä»‹ç»

    åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ wx:for å±æ€§ç»‘å®šä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡ï¼Œæ—¢å¯ä½¿ç”¨æ¯ä¸€é¡¹æ•°æ®é‡å¤æ¸²æŸ“å½“å‰ç»„ä»¶
    æ¯ä¸€é¡¹çš„å˜é‡åé»˜è®¤ä¸º itemï¼Œä¸‹æ ‡å˜é‡åé»˜è®¤ä¸º index

    åœ¨ä½¿ç”¨ wx:for è¿›è¡Œéå†çš„æ—¶å€™ï¼Œ`å»ºè®®åŠ ä¸Š wx:key å±æ€§`ï¼Œ wx:key çš„å€¼ä»¥ä¸¤ç§å½¢å¼æä¾›:

    1. å­—ç¬¦ä¸²:ä»£è¡¨éœ€è¦éå†çš„ array ä¸­item çš„æŸä¸ªå±æ€§ï¼Œè¯¥å±æ€§çš„å€¼éœ€è¦æ˜¯åˆ—è¡¨ä¸­å”¯ä¸€çš„å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œä¸”ä¸èƒ½åŠ¨æ€æ”¹å˜
    2. ä¿ç•™å…³é”®å­— *this ä»£è¡¨åœ¨ for å¾ªç¯ä¸­çš„ item æœ¬èº«ï¼Œå½“ item æœ¬èº«æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ—¶å¯ä»¥ä½¿ç”¨

2. ä»£ç ç¤ºä¾‹

    - ä»£ç 

    cart.wxml

    ```xml
    <!-- å¦‚æœéœ€è¦è¿›è¡Œåˆ—è¡¨æ¸²æŸ“ï¼Œéœ€è¦ä½¿ç”¨ wx:for å±æ€§ -->
    <!-- å±æ€§éœ€è¦ä½¿ç”¨åŒå¤§æ‹¬å·è¿›è¡ŒåŒ…è£¹ -->
    <!-- æ¯ä¸€é¡¹çš„å˜é‡é»˜è®¤æ˜¯ item -->
    <!-- æ¯ä¸€é¡¹ä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰çš„å˜é‡åé»˜è®¤æ˜¯ intex -->

    <!-- å¦‚æœæ¸²æŸ“çš„æ˜¯æ•°ç»„ item: æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œindex: ä¸‹æ ‡-->
    <view wx:for="{{ numList }}">{{ item }} - {{ index }}</view>

    <!-- å¦‚æœæ¸²æŸ“çš„æ˜¯æ•°ç»„ item: å¯¹è±¡å±æ€§çš„å€¼ï¼Œindex: å¯¹è±¡å±æ€§-->
    <view wx:for="{{ obj }}">{{ item }} - {{ index }}</view>

    <!-- wx:key æå‡æ€§èƒ½ -->
    <!-- wx:key å±æ€§å€¼æœ‰ä¸¤ç§æ·»åŠ å½¢å¼ -->
    <!-- 1. å­—ç¬¦ä¸²ï¼Œéœ€è¦æ˜¯éå†çš„æ•°ç»„ç§ item çš„æŸä¸ªå±æ€§ï¼Œè¦æ±‚è¯¥å±æ€§æ˜¯åˆ—è¡¨ç§å”¯ä¸€çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œä¸èƒ½è¿›è¡ŒåŠ¨æ€å˜æ¢ -->
    <!-- 2. ä¿ç•™å…³é”®å­— *this, *this ä»£è¡¨æ˜¯ item æœ¬èº«ï¼Œitem æœ¬èº«æ˜¯å”¯ä¸€çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å­— -->

    <!-- wx:key çš„å±æ€§å€¼ä¸éœ€è¦ä½¿ç”¨åŒå¤§æ‹¬å·è¿›è¡ŒåŒ…è£¹ï¼Œç›´æ¥å†™éå†çš„æ•°ç»„ä¸­ item çš„æŸä¸ªå±æ€§ -->
    <text wx:for="{{ fruitList }}" wx:key="id">{{ item.name }}</text>

    <text wx:for="{{ fruitList }}" wx:key="index">{{ item.name }}</text>

    <text wx:for="{{ numList }}" wx:key="index">{{ item }}</text>
    ```

    cart.js

    ```js
    // pages/profile/profile.js
    Page({
      data:{
        numList:[1,2,3],
        fruitList:[
          { id:1, name:"ğŸ" },
          { id:2, name:"ğŸ‹" },
          { id:3, name:"ğŸ…" },
        ],
        obj:{
          name:"tom",
          age:18
        }
      }
    })
    ```

    - è¿è¡Œç»“æœ

    ![](/application/weixin/base/071.png)

3. æ³¨æ„äº‹é¡¹:

    1. å¦‚æœä¸åŠ  wx:keyï¼Œä¼šæŠ¥ä¸€ä¸ª warningï¼Œå¦‚æœæ˜ç¡®çŸ¥é“è¯¥åˆ—è¡¨æ˜¯é™æ€ï¼Œå³ä»¥åæ•°æ®ä¸ä¼šæ”¹å˜ï¼Œæˆ–è€…ä¸å¿…å…³æ³¨å…¶é¡ºåºï¼Œå¯ä»¥é€‰æ‹©å¿½ç•¥ã€‚
    2. åœ¨ç»™ wx:key æ·»åŠ å±æ€§å€¼çš„æ—¶å€™ï¼Œä¸éœ€è¦ä½¿ç”¨åŒå¤§æ‹¬å·è¯­æ³•ï¼Œç›´æ¥ä½¿ç”¨éå†çš„ array ä¸­ item çš„æŸä¸ªå±æ€§


### 5.3.2 è¿›é˜¶ç”¨æ³•

1. ä»‹ç»

    1. å¦‚æœéœ€è¦å¯¹é»˜è®¤çš„å˜é‡åå’Œä¸‹æ ‡è¿›è¡Œä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨wx:for-itemå’Œ wx:for-index
        - ä½¿ç”¨ wx:for-item å¯ä»¥æŒ‡å®šæ•°ç»„å½“å‰å…ƒç´ çš„å˜é‡å
        - ä½¿ç”¨ wx:for-index å¯ä»¥æŒ‡å®šæ•°ç»„å½“å‰ä¸‹æ ‡çš„å˜é‡å


    2. å°† wx:for ç”¨åœ¨`<block />`æ ‡ç­¾ä¸Šï¼Œä»¥æ¸²æŸ“ä¸€ä¸ªåŒ…å«å¤šä¸ªèŠ‚ç‚¹çš„ç»“æ„å—
        - `<block />`å¹¶ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªåŒ…è£…å…ƒç´ ï¼Œä¸ä¼šåœ¨é¡µé¢ä¸­åšä»»ä½•æ¸²æŸ“ï¼Œåªæ¥å—æ§åˆ¶å±æ€§
        - `<block />`æ ‡ç­¾åœ¨ wxmlä¸­å¯ä»¥ç”¨äºç»„ç»‡ä»£ç ç»“æ„ï¼Œæ”¯æŒåˆ—è¡¨æ¸²æŸ“ã€æ¡ä»¶æ¸²æŸ“ç­‰

2. ä»£ç ç¤ºä¾‹


    - ä»£ç 
    cart.wxml

    ```xml
    <!-- å¦‚æœéœ€è¦ä¿®æ”¹é»˜è®¤çš„å˜é‡åï¼Œéœ€è¦ä½¿ç”¨ wx:for-item å±æ€§ -->
    <!-- å¦‚æœéœ€è¦ä¿®æ”¹é»˜è®¤çš„ä¸‹æ ‡å˜é‡åï¼Œéœ€è¦ä½¿ç”¨ wx:for-index å±æ€§ -->
    <!-- ä¸¤ä¸ªå±æ€§éœ€è¦å’Œ wx:for å¸è½½åŒä¸€ä¸ªç»„ä»¶ä¸Š -->
    <!-- å†é‡å‘½åã€ä¿®æ”¹ä»¥åï¼Œéœ€è¦ä½¿ç”¨æœ€æ–°çš„å˜é‡å -->

    <!-- æ•°ç»„ -->
    <view wx:for="{{ fruitList }}" wx:key="id" wx:for-item="fruitItem" wx:for-index="i">
      {{ fruitItem.name }}
    </view>

    <!-- å¯¹è±¡ -->
    <view wx:for="{{ obj }}" wx:key="index" wx:for-item="value" wx:for-index="key">
      {{ key }} - {{value}}
    </view>


    <!-- block ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œåªæ˜¯æ¸²æŸ“å…ƒç´  -->
    <!-- ä¹Ÿå°±æ˜¯åªæ˜¯åŒ…è£…å…ƒç´ ï¼Œå¯ä»¥ç»„ç»‡ä»£ç ç»“æ„ï¼Œæ”¯æŒåˆ—è¡¨æ¸²æŸ“ -->
    <!-- block ä¸ä¼šåœ¨é¡µé¢ä¸­åšä»»ä½•æ¸²æŸ“ï¼Œåªæ¥å—æ§åˆ¶å±æ€§ -->
    <block wx:for="{{ fruitList }}" wx:key="id" wx:for-item="fruitItem" wx:for-index="i">
      <view>åå­—ï¼š{{ fruitItem.name }}</view>
      <view>ä»·æ ¼ï¼š{{ fruitItem.price }}</view>
    </block>
    ```

    cart.js

    ```js
    // pages/profile/profile.js
    Page({
      data:{
        numList:[1,2,3],
        fruitList:[
          { id:1, name:"ğŸ" , price: 66},
          { id:2, name:"ğŸ‹" , price: 77},
          { id:3, name:"ğŸ…" , price: 88},
        ],
        obj:{
          name:"tom",
          age:18
        }
      }
    })
    ```

    - è¿è¡Œç»“æœ

    ![](/application/weixin/base/072.png)

## 5.4 æ¡ä»¶æ¸²æŸ“

1. ä»‹ç»

    - æ¡ä»¶æ¸²æŸ“ä¸»è¦ç”¨æ¥æ§åˆ¶é¡µé¢ç»“æ„çš„å±•ç¤ºå’Œéšè—ï¼Œåœ¨å¾®ä¿¡å°ç¨‹åºä¸­å®ç°æ¡ä»¶æ¸²æŸ“æœ‰ä¸¤ç§æ–¹å¼:
        1. ä½¿ç”¨ `wx:if`ã€`wx:elif`ã€`wx:else` å±æ€§ç»„
        2. ä½¿ç”¨ `hidden` å±æ€§

    - `wx:if` å’Œ `hidden` äºŒè€…çš„åŒºåˆ«:
        1. `wx:if`:å½“æ¡ä»¶ä¸º true æ—¶å°†ç»“æ„å±•ç¤ºå‡ºæ¥ï¼Œå¦åˆ™ç»“æ„ä¸ä¼šè¿›è¡Œå±•ç¤ºï¼Œé€šè¿‡ ç§»é™¤æ–°å¢èŠ‚ç‚¹ çš„æ–¹å¼æ¥å®ç°
        2. `hidden` :å½“æ¡ä»¶ä¸º true æ—¶ä¼šå°†ç»“æ„éšè—ï¼Œå¦åˆ™ç»“æ„ä¼šå±•ç¤ºå‡ºæ¥ï¼Œé€šè¿‡ display æ ·å¼å±æ€§ æ¥å®ç°çš„


2. `wx:if`ä»£ç ç¤ºä¾‹

    - ä»£ç 

    market.wxml

    ```xml
    <!-- wx:if å±æ€§ç»„ -->
    <!-- wx:if wx:elif wx:else -->
    <!-- åªæœ‰å¯¹åº”çš„æ¡ä»¶æˆç«‹ï¼Œå±æ€§æ‰€åœ¨çš„ç»„ä»¶æ‰ä¼šè¿›è¡Œå±•ç¤º -->
    <!-- wx:elif wx:else ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¿…é¡»ç»“åˆ wx:if æ¥ä½¿ç”¨ -->
    <!-- ä½¿ç”¨äº† wx:if å±æ€§ç»„çš„ç»„ä»¶ä¸èƒ½è¢«æ‰“æ–­ï¼Œç»„ä»¶å¿…é¡»è¿è´¯æ‰å¯ä»¥ -->
    <view wx:if="{{ num === 1 }}">num ç­‰äº {{num}}</view>
    <view wx:elif="{{ num === 2 }}">num ç­‰äº {{num}}</view>
    <view wx:else>num å¤§äº 2ï¼Œç›®å‰ num ç­‰äº  {{num}}</view>


    <button type="warn" bind:tap="updateNum">æ›´æ–° num</button>
    ```

    market.js
    ```js
    // pages/market/market.js
    Page({
      data:{
        num:1
      },
      
      // æ›´æ–° num
      updateNum(){
        this.setData({
          num:this.data.num + 1
        })
      }
    })
    ```


    - è¿è¡Œç»“æœ

    ![](/application/weixin/base/073.gif)

3. `hidden`ä»£ç ç¤ºä¾‹
    - ä»£ç 

    market.wxml

    ```xml
    <!-- hidden å±æ€§ -->
    <!-- hidden å±æ€§å€¼ å¦‚æœæ˜¯ true,å°±ä¼šéšè—ç»“æ„ï¼Œå¦‚æœæ˜¯false,æ‰ä¼šå±•ç¤ºç»“æœ -->
    <view hidden="{{ isFlag }}">å¦‚æœisFlag å¦‚æœæ˜¯ true,å°±ä¼šéšè—ç»“æ„ï¼Œå¦‚æœæ˜¯false,æ‰ä¼šå±•ç¤ºç»“æœ</view>

    <button type="primary" bind:tap="handler">hiddenæµ‹è¯•</button>
    ```

    market.js
    ```js
    // pages/market/market.js
    Page({
      data:{
        isFlag:false
      },

      handler(){
        this.setData({
          isFlag:!this.data.isFlag
        })
      }
    })
    ```

    - è¿è¡Œç»“æœ

    ![](/application/weixin/base/074.gif)

