# 四、npx

## 4.1 npx是什么
npx 是一个 npm 包执行器，它随 npm 5.2.0 版本一起引入。npx 的主要用途是方便开发者执行安装在项目本地 `node_modules/.bin` 目录或全局安装的 npm 包的命令。它特别有用于执行那些仅偶尔使用的、不希望全局安装的 npm 包。

## 4.2 npx 的主要特点和用途


1. 临时安装并运行包：

使用 npx 可以执行未全局安装的包，npx 会临时安装这些包并运行它们，执行完毕后不会保留这些包。

2. 运行项目本地安装的包：

项目中经常会安装一些命令行工具作为开发依赖，例如 eslint、webpack 等。通常情况下，如果想要运行这些工具，需要在项目的脚本中定义它们或者通过项目的 `node_modules/.bin` 路径来运行。npx 简化了这个过程，允许直接在命令行中输入命令来执行。

3. 避免全局安装包：

有时全局安装 npm 包可能会导致版本冲突或其他问题。npx 允许我们执行包而无需全局安装，减少了全局空间的污染。

4. 执行不同版本的命令：

使用 npx 可以非常容易地测试或运行不同版本的命令行工具，只需指定包名和版本号。

5. 执行 GitHub 上的包：

npx 还可以直接执行存储在 GitHub 等代码托管服务上的包，这对于试运行开源项目中的示例脚本或工具非常方便。

6. 增强的可执行性：

即使某些 npm 包不在 PATH 环境变量中，npx 也能找到并执行它们，因为它默认会在本地 node_modules/.bin 目录下寻找。

## 4.3 使用例子


1. 运行本地安装的 webpack：

```sh
npx webpack --config webpack.config.js
```

2. 运行特定版本的某个包：

```sh
npx typescript@3.9.5 --version
```

3. 临时安装并运行一个可执行的包（例如创建 React 应用的 create-react-app）：

```sh
npx create-react-app my-app
```

npx 提供了更灵活的包管理选项，特别是对于那些我们不想永久安装在开发环境中的工具。它是现代 JavaScript 开发工具链中的一个重要工具。


## 4.4 npm 和 npx 区别

- npx侧重于执行命令的，执行某个模块命令。虽然会自动安装模块，但是重在执行某个命令

- npm侧重于安装或者卸载某个模块的。重在安装，并不具备执行某个模块的功能。

## 4.5 创建react脚手架

- 如何查看我当前全局安装了哪些可执行文件

`npm ls -g`，没有加-g的话就是看当前项目有哪些可执行文件，加-g就是全局

我们使用命令：npm install -g create-react-app，就全局安装了react的脚手架

这时候，我们再使用npm ls -g命令就能够看到create-react-app@具体版本号了



- 在传统的情况下，我们可以直接执行create-react-app直接运行，但这样是有缺点的
    - 版本直接就锁定不变了，如果更新了新版本，我们也只会停留在原地
    - 占据磁盘的空间
- 那npx就可以完美解决这个问题
    - 那在进行前，我们通过npm uninstall -g create-react-app全局卸载这个包
    - 我们换npx create-react-app来执行，一样是可以执行的，并且是最新版本。包括react中文网也是这样推荐的，很多其他的框架也是这样推荐的


## 4.6 运行vite

当全局和局部项目都不存在vite命令的时候，而我又想要运行，这怎么办？


1. 我们首先使用`npm i vite -D`，注意这个-D表示在局部下载，也就是说只在开发环境(Dev)下存在，全局是不存在的。
2. 此时如果我们直接执行vite命令，就会报错了，因为我们本地的目录没有在环境变量中配置，只有在环境变量中配置才会是全局的
3. 这时候我们就可以通过npx vite执行，会自动去找当前目录下的node_modules里bin下的vite命令进行执行，而且非常快

