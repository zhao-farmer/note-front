
# ä¸‰ã€æŒ‡ä»¤

## 3.1 ç»“æ„æŒ‡ä»¤

### 3.3.1 *ngForæŒ‡ä»¤

1. æŒ‡ä»¤ä»‹ç»

    - åŸºç¡€ä½¿ç”¨

        ```html
        <ul>
            <li *ngFor="let item of items; let i = index">
                {{ i + 1 }}. {{ item }}
            </li>
        </ul>
        ```
    - é€šè¿‡ trackBy è®¾ç½®ç´¢å¼•

        ```ts
        // ç»„ä»¶ä¸­å®šä¹‰trackByå‡½æ•°
        trackById(index: number, item: any): number {
            return item.id; // è¿”å›å”¯ä¸€æ ‡è¯†ç¬¦
        }
        ```

        ```html
        <ul>
            <li *ngFor="let item of items; trackBy: trackById">
                {{ item.name }}
            </li>
        </ul>
        ```
    - ä¸å¼‚æ­¥æ•°æ®ç»“åˆ

        ```html
        <ul>
        <li *ngFor="let item of items$ | async">
            {{ item }}
        </li>
        </ul>
        ```
2. é¡¹ç›®æ–‡ä»¶ 

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'structure-01',
        template: `
            <h2>äº§å“åˆ—è¡¨</h2>
            <ul>
            <li *ngFor="let product of products; let i = index">
                {{ i + 1 }}. {{ product.name }} - {{ product.price }}
            </li>
            </ul>

            <h2>å¸¦æ¡ä»¶çš„åˆ—è¡¨</h2>
            <div *ngFor="let user of users">
            <div *ngIf="user.active" class="user-card">
                {{ user.name }} ({{ user.email }})
            </div>
            </div>
        `,
        styles: [
            `
            .user-card {
                padding: 10px;
                margin: 5px;
                border: 1px solid #ddd;
            }
            `,
        ],
    })
    export class Structure01Component {
        products = [
            { name: 'ç¬”è®°æœ¬ç”µè„‘', price: 5999 },
            { name: 'æ™ºèƒ½æ‰‹æœº', price: 2999 },
            { name: 'å¹³æ¿ç”µè„‘', price: 1999 },
        ];

        users = [
            { name: 'å¼ ä¸‰', email: 'zhang@example.com', active: true },
            { name: 'æå››', email: 'li@example.com', active: false },
            { name: 'ç‹äº”', email: 'wang@example.com', active: true },
        ];
    }
    ```
3. è·¯ç”±é…ç½®

    ```ts
    {
        path: 'data',
        children: [
           {
                path: '01',
                component: Data01Component,
                title: 'æ’å€¼è¡¨è¾¾å¼',
            },
            {
                path: '02',
                component: Data02Component,
                title: '*ngforå¾ªç¯',
            },
        ],
    },
    ```
4. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/010.png)

### 3.3.2 *ngIfæŒ‡ä»¤

1. æŒ‡ä»¤è¯¦è§£

    - æ¡ä»¶è¡¨è¾¾å¼ç¤ºä¾‹

        ```html
        <!-- å¸ƒå°”å€¼ -->
        <div *ngIf="isLoggedIn">æ¬¢è¿å›æ¥ï¼</div>

        <!-- æ¯”è¾ƒè¿ç®— -->
        <div *ngIf="score > 60">åŠæ ¼</div>

        <!-- é€»è¾‘è¿ç®— -->
        <div *ngIf="isAdmin && hasPermission">ç®¡ç†å‘˜é¢æ¿</div>

        <!-- éç©ºæ£€æŸ¥ -->
        <div *ngIf="user">ç”¨æˆ·å: {{user.name}}</div>
        ```
    - ç»“åˆ else ä½¿ç”¨

        Angular æä¾›äº† else è¯­æ³•æ¥æ˜¾ç¤ºæ¡ä»¶ä¸æ»¡è¶³æ—¶çš„å†…å®¹ï¼š

        ```html
        <div *ngIf="condition; else elseBlock">
            æ¡ä»¶ä¸ºçœŸæ—¶æ˜¾ç¤º
        </div>

        <ng-template #elseBlock>
            <div>æ¡ä»¶ä¸ºå‡æ—¶æ˜¾ç¤º</div>
        </ng-template>
        ```
    - ä½¿ç”¨ then/else è¯­æ³•
        ```html
        <ng-container *ngIf="condition; then thenBlock; else elseBlock"></ng-container>

        <ng-template #thenBlock>
        <div>æ¡ä»¶ä¸ºçœŸæ—¶æ˜¾ç¤º</div>
        </ng-template>

        <ng-template #elseBlock>
        <div>æ¡ä»¶ä¸ºå‡æ—¶æ˜¾ç¤º</div>
        </ng-template>
        ```
    - ä¸å¼‚æ­¥æ•°æ®ç»“åˆ ä½¿ç”¨ async ç®¡é“

        ```html
        <div *ngIf="data$ | async as data; else loading">
        æ•°æ®åŠ è½½å®Œæˆ: {{ data }}
        </div>

        <ng-template #loading>
            <div>åŠ è½½ä¸­...</div>
        </ng-template>
        ```
2. é¡¹ç›®æ–‡ä»¶ 

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'structure-02',
        template: `
            <div *ngIf="isLoggedIn; else loginPrompt">
                <p>æ¬¢è¿å›æ¥, {{ userName }}!</p>
                <button (click)="logout()">é€€å‡ºç™»å½•</button>
            </div>

            <ng-template #loginPrompt>
                <p>è¯·ç™»å½•ä»¥æŸ¥çœ‹å†…å®¹</p>
                <button (click)="login()">ç™»å½•</button>
            </ng-template>

            <div [hidden]="!hasMessages">
                <h3>æ‚¨çš„æ¶ˆæ¯</h3>
                <p>{{ message }}</p>
            </div>
        `
    })
    export class Structure03Component {
        isLoggedIn = false;
        userName = 'å¼ ä¸‰';
        hasMessages = true;
        message = 'æ‚¨æœ‰3æ¡æœªè¯»æ¶ˆæ¯';

        login() {
            this.isLoggedIn = true;
        }

        logout() {
            this.isLoggedIn = false;
        }
    }
    ```

3. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/011.gif)

### 3.3.3 ngSwitchæŒ‡ä»¤

1. æŒ‡ä»¤è¯¦è§£ (å¤šæ¡ä»¶æ¸²æŸ“)

    ```html
    <div [ngSwitch]="status">
        <span *ngSwitchCase="'success'">æˆåŠŸ</span>
        <span *ngSwitchDefault>é»˜è®¤</span>
    </div>
    ```
2. é¡¹ç›®æ–‡ä»¶ 

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'switch-01',
        template: `
            <h3>ç”¨æˆ·çŠ¶æ€æ˜¾ç¤º</h3>

            <select [(ngModel)]="userStatus">
                <option value="active">æ´»è·ƒ</option>
                <option value="inactive">éæ´»è·ƒ</option>
                <option value="pending">å¾…å®¡æ ¸</option>
            </select>

            <div [ngSwitch]="userStatus">
                <div *ngSwitchCase="'active'">âœ… ç”¨æˆ·å¤„äºæ´»è·ƒçŠ¶æ€</div>
                <div *ngSwitchCase="'inactive'">â¸ï¸ ç”¨æˆ·éæ´»è·ƒ</div>
                <div *ngSwitchCase="'pending'">â³ ç”¨æˆ·ç­‰å¾…å®¡æ ¸ä¸­</div>
                <div *ngSwitchDefault>â“ æœªçŸ¥çŠ¶æ€</div>
            </div>

            <h4>æ¶ˆæ¯ç±»å‹</h4>
                <div [ngSwitch]="messageType">
                <div *ngSwitchCase="'success'">ğŸ‰ æ“ä½œæˆåŠŸï¼</div>
                <div *ngSwitchCase="'error'">â— å‘ç”Ÿé”™è¯¯</div>
                <div *ngSwitchDefault>â„¹ï¸ æ™®é€šä¿¡æ¯</div>
            </div>
        `
    })
    export class Switch01Component {
        userStatus = 'active';
        messageType = 'info';
    }

    ```

3. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/074.gif)

## 3.2 ç»„ä»¶æŒ‡ä»¤(çˆ¶å­ç»„ä»¶)

### 3.2.1 åŸºç¡€è®¤è¯†

ç»„ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¸¦æœ‰æ¨¡æ¿çš„æŒ‡ä»¤ï¼Œæ˜¯æœ€å¸¸è§çš„æŒ‡ä»¤ç±»å‹

1. ä»£ç 

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'app-child-01',
        template: `<h1>Hello, {{name}}!</h1>`,
        styles: [`h1 { color: blue; }`]
    })
    export class Child01Component  {
        name = 'æˆ‘æ˜¯å­ç»„ä»¶';
    }


    @Component({
    selector: 'app-parent-02',
        // ä½¿ç”¨ç»„ä»¶æŒ‡ä»¤ app-child-01 è°ƒç”¨äº†å…¶ä»–ç»„ä»¶
        template: `
            <h2>{{name}}</h2>
            <app-child-01></app-child-01>
        `
    })
    export class Parent01Component {
        name = 'çˆ¶ç»„ä»¶';
    }
    ```
2. ç»„ä»¶æ³¨å†Œ

    ```ts
     declarations: [Child01Component,Parent01Component]
    ```
3. è·¯ç”±é…ç½®

    ```ts
    {
        path: 'component',
        children: [
            { path: '01',component: Parent01Component, title: 'ç»„ä»¶æŒ‡ä»¤' },
        ],
    },
    ```
4. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/012.png)

### 3.2.2 çˆ¶ä¼ å­ï¼ˆ@Inputï¼‰

1. ä»£ç 

    ```ts
    import { Component, Input } from '@angular/core';

    @Component({
    selector: 'app-child-02',
        template: `
            <h3>å­ç»„ä»¶</h3>
            <p>æ¥è‡ªçˆ¶ç»„ä»¶çš„æ¶ˆæ¯: {{ messageFromParent }}</p>
            <p>ç”¨æˆ·å¹´é¾„: {{ user.age }}</p>
        `
    })
    export class Child02Component {
        // ä½¿ç”¨inputæ¥æ”¶çˆ¶ç»„ä»¶çš„æ¶ˆæ¯
        @Input() messageFromParent: string = '';
        @Input() user: any = {};
    }

    @Component({
        selector: 'app-parent-02',
        template: `
            <h2>çˆ¶ç»„ä»¶</h2>
            <app-child-02
            [messageFromParent]="parentMessage"
            [user]="currentUser">
            </app-child-02>
        `
    })
    export class Parent02Component {
        parentMessage = 'ä½ å¥½ï¼Œå­ç»„ä»¶ï¼';
        currentUser = { name: 'å¼ ä¸‰', age: 30 };
    }

    ```
2. ç»„ä»¶æ³¨å†Œ

    ```ts
     declarations: [Child02Component,Parent02Component]
    ```
3. è·¯ç”±é…ç½®

    ```ts
    {
        path: 'component',
        children: [
            { path: '01',component: Parent01Component, title: 'ç»„ä»¶æŒ‡ä»¤' },
            { path: '02',component: Parent02Component, title: 'çˆ¶ä¼ å­' },
        ],
    },
    ```
4. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/013.png)


### 3.2.3 å­ä¼ çˆ¶ï¼ˆ@outputï¼‰

1. ä»£ç 

    ```ts
    import { Component, Output, EventEmitter } from '@angular/core';

    // å­ç»„ä»¶
    @Component({
        selector: 'app-child-03',
        template: `
            <button (click)="sendMessage()">å‘é€æ¶ˆæ¯ç»™çˆ¶ç»„ä»¶</button>
            <button (click)="updateCount()">å¢åŠ è®¡æ•°</button>
        `
    })
    export class Child03Component {
        // ç»‘å®šçˆ¶ç»„ä»¶çš„æ–¹æ³•
        @Output() messageEvent = new EventEmitter<string>();
        @Output() countChanged = new EventEmitter<number>();

        private count = 0;

        sendMessage() {
            // é€šè¿‡emitä¼ é€’
            this.messageEvent.emit('æ¥è‡ªå­ç»„ä»¶çš„é—®å€™!');
        }

        updateCount() {
            this.count++;
            this.countChanged.emit(this.count);
        }
    }

    // çˆ¶ç»„ä»¶
    @Component({
        selector: 'app-parent-03',
        template: `
            <h2>çˆ¶ç»„ä»¶</h2>
            <p>æ¥è‡ªå­ç»„ä»¶çš„æ¶ˆæ¯: {{ childMessage }}</p>
            <p>å­ç»„ä»¶è®¡æ•°: {{ childCount }}</p>

            <app-child-03
            (messageEvent)="receiveMessage($event)"
            (countChanged)="handleCountChange($event)">
            </app-child-03>
        `
    })
    export class Parent03Component {
        childMessage = '';
        childCount = 0;

        receiveMessage(message: string) {
            this.childMessage = message;
        }

        handleCountChange(count: number) {
            this.childCount = count;
        }
    }
    ```

2. ç»„ä»¶æ³¨å†Œ

    ```ts
     declarations: [Child03Component,Parent03Component]
    ```
3. è·¯ç”±é…ç½®

    ```ts
    {
        path: 'component',
        children: [
            { path: '01',component: Parent01Component, title: 'ç»„ä»¶æŒ‡ä»¤' },
            { path: '02',component: Parent02Component, title: 'çˆ¶ä¼ å­' },
            { path: '03',component: Parent03Component, title: 'å­ä¼ çˆ¶' },
        ],
    },
    ```
4. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/014.gif)

### 3.2.4 æ¨¡æ¿å˜é‡ref

1. ä»£ç 

    ```ts
    import { Component, ViewChild } from '@angular/core';

    // å­ç»„ä»¶
    @Component({
        selector: 'app-child-04',
        template: `<p>å­ç»„ä»¶å†…å®¹</p>`
    })
    export class Child04Component {
        childStatus = 'æ´»è·ƒ';

        doSomething() {
            console.log('å­ç»„ä»¶æ–¹æ³•è¢«è°ƒç”¨');
            this.childStatus = 'å¤„ç†ä¸­...';
        }
    }

    // çˆ¶ç»„ä»¶
    @Component({
        selector: 'app-parent-04',
        template: `
            <app-child-04 #childRef></app-child-04>
            <button (click)="callChildMethod()">è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</button>
            <p>å­ç»„ä»¶çŠ¶æ€: {{ childRef.childStatus }}</p>
        `
    })
    export class Parent04Component {
        @ViewChild('childRef') childComponent!: Child04Component;

        callChildMethod() {
            this.childComponent.doSomething();
        }
    }
    ```
 
2. ç»„ä»¶æ³¨å†Œ

    ```ts
     declarations: [Child04Component,Parent04Component]
    ```
3. è·¯ç”±é…ç½®

    ```ts
    {
        path: 'component',
        children: [
            { path: '01',component: Parent01Component, title: 'ç»„ä»¶æŒ‡ä»¤' },
            { path: '02',component: Parent02Component, title: 'çˆ¶ä¼ å­' },
            { path: '03',component: Parent03Component, title: 'å­ä¼ çˆ¶' },
            { path: '04',component: Parent04Component, title: 'ä½¿ç”¨ref' },
        ],
    },
    ```
4. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/015.gif)

### 3.2.5 é€šè¿‡æœåŠ¡å‘é€

1. è®¾ç½®æœåŠ¡

    ```ts
    // data.service.ts
    import { Injectable } from '@angular/core';
    import { Subject } from 'rxjs';

    @Injectable({ providedIn: 'root' })
    export class DataService {
        private parentToChild = new Subject<string>();
        private childToParent = new Subject<number>();

        parentToChild$ = this.parentToChild.asObservable();
        childToParent$ = this.childToParent.asObservable();

        sendToChild(message: string) {
            this.parentToChild.next(message);
        }

        sendToParent(count: number) {
            this.childToParent.next(count);
        }
    }
    ```
2. ä»£ç 

    ```ts
    import { Component } from '@angular/core';
    import { DataService } from '../data.service';

    // å­ç»„ä»¶
    @Component({
        selector: 'app-child-05',
        template: `
            <p>æ¥è‡ªæœåŠ¡çš„æ¶ˆæ¯: {{ serviceMessage }}</p>
            <button (click)="sendCount()">é€šè¿‡æœåŠ¡å‘é€è®¡æ•°</button>
        `
    })
    export class Child05Component {
        serviceMessage = '';

        constructor(private dataService: DataService) {
            this.dataService.parentToChild$.subscribe(msg => {
            this.serviceMessage = msg;
            });
        }

        sendCount() {
            this.dataService.sendToParent(Math.floor(Math.random() * 100));
        }
    }

    // çˆ¶ç»„ä»¶
    @Component({
        selector: 'app-parent-05',
        template: `
            <button (click)="sendMessage()">é€šè¿‡æœåŠ¡å‘é€</button>
            <app-child-05></app-child-05>
            <p>æ¥è‡ªæœåŠ¡çš„è®¡æ•°: {{ serviceCount }}</p>
        `
    })
    export class Parent05Component {
        serviceCount = 0;

        constructor(private dataService: DataService) {
            this.dataService.childToParent$.subscribe(count => {
            this.serviceCount = count;
            });
        }

        sendMessage() {
            this.dataService.sendToChild('é€šè¿‡æœåŠ¡ä¼ é€’çš„æ¶ˆæ¯');
        }
    }
    ```
3. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/016.gif)

## 3.3 å±æ€§æŒ‡ä»¤-è‡ªå®šä¹‰æŒ‡ä»¤

### 3.3.1 åŸºç¡€å±æ€§æŒ‡ä»¤å®ç°

1. è‡ªå®šä¹‰æŒ‡ä»¤ directive/focus.directive.ts

    ```ts
    import { Directive, ElementRef, AfterViewInit } from '@angular/core';

    @Directive({
        selector: '[appAutoFocus]'
    })
    export class AutoFocusDirective implements AfterViewInit {
        constructor(private el: ElementRef) {}

        ngAfterViewInit() {
            this.el.nativeElement.focus();
        }
    }
    ```
2. ä½¿ç”¨ è‡ªå®šä¹‰æŒ‡ä»¤çš„ä»£ç 

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'attr-01',
        template: `
            <input appAutoFocus placeholder="è‡ªåŠ¨è·å–ç„¦ç‚¹">
        `,
    })
    export class Attr01Component {}
    ```
3. ä½¿ç”¨ app.module æ³¨å†Œ

    ```ts
    declarations[AutoFocusDirective,Attr01Component]
    ```
4. è·¯ç”±

    ```ts
    {
        path: 'attr',
        children: [
            { path: '01',component: Attr01Component, title: 'åŸºç¡€å±æ€§æŒ‡ä»¤' },
        ],
    },
    ```

5. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/017.gif)

### 3.3.2 å¸¦è¾“å…¥å‚æ•°çš„æŒ‡ä»¤


1. è‡ªå®šä¹‰æŒ‡ä»¤ directive/focus.directive.ts

    ```ts
    import { Directive, Input, HostBinding } from '@angular/core';

    @Directive({
        selector: '[appDynamicBorder]'
    })
    export class DynamicBorderDirective {
        @Input() borderColorOther: string = '1px solid';
        @Input() borderColor: string = '#ccc';

        // get borderStyle() ç­‰äºæ˜¯ä¸€ä¸ªç»„åˆçš„å‚æ•°
        @HostBinding('style.border') get borderStyle() {
            return `${this.borderColor} ${this.borderColorOther}`;
        }

        @HostBinding('style.padding') padding = '10px';
    }

    ```
2. ä½¿ç”¨ è‡ªå®šä¹‰æŒ‡ä»¤çš„ä»£ç 

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'attr-02',
        template: `
            <div appDynamicBorder borderColor="#ff0">çº¢è‰²è¾¹æ¡†</div>
        `,
    })
    export class Attr02Component {}

    ```
3. ä½¿ç”¨ app.module æ³¨å†Œ

    ```ts
    declarations[AutoFocusDirective,Attr01Component]
    ```
4. è·¯ç”±

    ```ts
    {
        path: 'attr',
        children: [
            { path: '01',component: Attr01Component, title: 'åŸºç¡€å±æ€§æŒ‡ä»¤' },
            { path: '02',component: Attr02Component, title: 'å¸¦å‚æ•°æŒ‡ä»¤' },
        ],
    },
    ```
5. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/018.png)


### 3.3.3 å“åº”å¼æŒ‡ä»¤

1. è‡ªå®šä¹‰æŒ‡ä»¤ directive/focus.directive.ts

    ```ts
    import { Directive, ElementRef, Input, OnDestroy, OnInit, Renderer2 } from '@angular/core';
    import { fromEvent, Subscription } from 'rxjs';
    import { debounceTime } from 'rxjs/operators';

    @Directive({
        selector: '[appResponsiveSize]',
    })
    export class ResponsiveSizeDirective implements OnInit, OnDestroy {
        @Input() appResponsiveSize: { sm: string; md: string; lg: string } = {
            sm: '12px',
            md: '16px',
            lg: '20px'
        };

        private resizeSubscription!: Subscription;

        constructor(private el: ElementRef, private renderer: Renderer2) {}

        ngOnInit() {
            this.updateFontSize();
            this.resizeSubscription = fromEvent(window, 'resize')
            .pipe(debounceTime(100))
            .subscribe(() => this.updateFontSize());
        }

        ngOnDestroy() {
            if (this.resizeSubscription) {
            this.resizeSubscription.unsubscribe();
            }
        }

        private updateFontSize() {
            const width = window.innerWidth;
            let size: string;

            if (width < 576) {
                size = this.appResponsiveSize.sm;
            } else if (width >= 576 && width < 992) {
                size = this.appResponsiveSize.md;
            } else {
                size = this.appResponsiveSize.lg;
            }

            this.renderer.setStyle(this.el.nativeElement, 'font-size', size);
        }
    }

    ```
2. ä½¿ç”¨ è‡ªå®šä¹‰æŒ‡ä»¤çš„ä»£ç 

    ```ts
   import { Component } from '@angular/core';

    @Component({
        selector: 'attr-03',
        template: `
            <p [appResponsiveSize]="{ sm: '14px', md: '18px', lg: '22px' }">
            æˆ‘çš„å­—å·ä¼šæ ¹æ®å±å¹•å¤§å°å˜åŒ–
            </p>
        `,
    })
    export class Attr03Component {}
    ```

3. ä½¿ç”¨ app.module æ³¨å†Œ

    ```ts
    declarations[ResponsiveSizeDirective,Attr03Component]
    ```
4. è·¯ç”±

    ```ts
    {
        path: 'attr',
        children: [
            { path: '01',component: Attr01Component, title: 'åŸºç¡€å±æ€§æŒ‡ä»¤' },
            { path: '02',component: Attr02Component, title: 'å¸¦å‚æ•°æŒ‡ä»¤' },
            { path: '03',component: Attr03Component, title: 'å“åº”å¼å±æ€§æŒ‡ä»¤' },
        ],
    },
    ```
5. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/019.gif)



## 3.4 å†…ç½®å±æ€§æŒ‡ä»¤-æ ·å¼

### 3.4.1 style æ ·å¼ç»‘å®šæŒ‡ä»¤

1. `[style.property]` - å•ä¸€æ ·å¼ç»‘å®š

    - ç»„ä»¶

        ```ts
        @Component({
            selector: 'style-01',
            template: `
                <div [style.color]="textColor">è¿™æ®µæ–‡å­—çš„é¢œè‰²ä¼šå˜åŒ–</div>
                <div [style.font-size.px]="fontSize">å­—ä½“å¤§å°å¯è°ƒèŠ‚</div>
                <button (click) = "increaseFont()">å­—ä½“å¢å¤§</button>
            `,
        })
        export class Sytel01Component {
            textColor = 'red';
            fontSize = 16;

            increaseFont() {
                this.fontSize += 2;
            }
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/055.gif)

2. `[style]` - å¤šæ ·å¼ç»‘å®š

    - ç»„ä»¶
    
        ```ts
        @Component({
            selector: 'style-02',
            template: `
                <!-- ç»‘å®šå¤šä¸ªæ ·å¼å±æ€§ -->
                <div [style]="currentStyles">è¿™ä¸ªdivçš„æ ·å¼ä¼šåŠ¨æ€å˜åŒ–</div>
                <button (click) = "updateStyles()">æ›´æ–°æ ·å¼</button>
            `,
        })
        export class Sytel02Component {

            currentStyles = {
                'font-style': 'italic',
                'font-weight': 'bold',
                'background-color': '#f0f0f0'
            };

            updateStyles() {
                this.currentStyles = {
                ...this.currentStyles,
                'background-color':'#ff00ff'
                };
            }
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/056.gif)

3. å¸¦å•ä½çš„æ ·å¼ç»‘å®š

    - ç»„ä»¶

        ```ts   
        @Component({
            selector: 'style-03',
            template: `
                <!-- ç»‘å®šå¤šä¸ªæ ·å¼å±æ€§ -->
                <div [style.height.px]="width" [style.width.%]="height">1</div>
                <div [style.margin.rem]="margin">2</div>
            `,
            styles:[`
                div{
                background-color: pink;
                }
            `]
        })
        export class Sytel03Component {
            width = 200;
            height = 10;
            margin = 5;
        }

        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/057.png)

### 3.4.2 ngStyle åŠ¨æ€å†…è”æ ·å¼

>æ³¨æ„ï¼šå¿…é¡»åœ¨è·Ÿç»„ä»¶ä¸­æ³¨å†Œ

1. å¯¹è±¡è¯­æ³•

    - ç»„ä»¶

        ```ts
        @Component({
            selector: 'ngstyle-01',
            template: `
                <div [ngStyle]="{'color': textColor, 'font-size.px': fontSize}">
                è¿™æ®µæ–‡å­—çš„é¢œè‰²ä¼šå˜åŒ–
                </div>
                <button (click) = "increaseFont()">å­—ä½“å¢å¤§</button>
            `,
        })
        export class NgSytel01Component {
            textColor = 'red';
            fontSize = 16;

            increaseFont() {
                this.fontSize += 2;
            }
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/058.gif)

2. æ ¹æ®æ¡ä»¶è®¾ç½®æ ·å¼

    - ç»„ä»¶
    
        ```ts
        @Component({
            selector: 'style-02',
            template: `
                <!-- ç»‘å®šå¤šä¸ªæ ·å¼å±æ€§ -->
                <div [style]="currentStyles">è¿™ä¸ªdivçš„æ ·å¼ä¼šåŠ¨æ€å˜åŒ–</div>
                <button (click) = "updateStyles()">æ›´æ–°æ ·å¼</button>
            `,
        })
        export class Sytel02Component {

            currentStyles = {
                'font-style': 'italic',
                'font-weight': 'bold',
                'background-color': '#f0f0f0'
            };

            updateStyles() {
                this.currentStyles = {
                ...this.currentStyles,
                'background-color':'#ff00ff'
                };
            }
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/059.png)

3. ä½¿ç”¨ç»„ä»¶æ–¹æ³•è¿”å›æ ·å¼å¯¹è±¡

    - ç»„ä»¶

        ```ts   
        @Component({
            selector: 'style-03',
            template: `
                <!-- ç»‘å®šå¤šä¸ªæ ·å¼å±æ€§ -->
                <div [style.height.px]="width" [style.width.%]="height">1</div>
                <div [style.margin.rem]="margin">2</div>
            `,
            styles:[`
                div{
                background-color: pink;
                }
            `]
        })
        export class Sytel03Component {
            width = 200;
            height = 10;
            margin = 5;
        }

        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/060.png)


### 3.4.3 ç±»ç»‘å®šæŒ‡ä»¤ class

- ç»„ä»¶

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'class-01',
        template: `
            <p [class.active]="showType">è¢«æ”¹å˜æ ·å¼çš„æ–‡å­—</p>
            <button (click)="changeColor()">ç‚¹å‡»åæ”¹å˜é¢œè‰²</button>
        `,
        styles:[`
            .active {
            font-weight: bold;
            color: red;
            font-size:20px;
            }
        `]
    })
    export class Class01Component {
        showType = false
        changeColor(){
            this.showType = !this.showType
        }
    }
    ```
- è¿è¡Œç»“æœ

    ![](/framework/angular/base16/061.gif)

### 3.4.4 ngClass åŠ è½½åŠ¨æ€æ ·å¼

1. å¯¹è±¡è¯­æ³•

    - ç»„ä»¶

        ```ts
        import { Component } from '@angular/core';

        @Component({
            selector: 'ngClass-01',
            template: `
                <!-- æ ¹æ®æ¡ä»¶æ·»åŠ ç±» -->
                <div [ngClass]="{ 'active': isActive, 'error': hasError }">
                å¯¹è±¡è¯­æ³•ç¤ºä¾‹
                </div>

                <!-- ä½¿ç”¨ç»„ä»¶å±æ€§ -->
                <button [ngClass]="buttonClasses">ç‚¹å‡»æˆ‘</button>

                <!-- åŠ¨æ€è®¡ç®— -->
                <div [ngClass]="{
                'text-success': score >= 80,
                'text-warning': score >= 60 && score < 80,
                'text-danger': score < 60
                }">
                åˆ†æ•°: {{ score }}
                </div>
            `,
            styles:[`
                /* çŠ¶æ€æ ·å¼ */
                .active { background-color: #e3f2fd; }
                .error { border-color: red; color: red; }

                /* æŒ‰é’®æ ·å¼ */
                .btn { padding: 8px 16px; border: none; cursor: pointer; }
                .btn-primary { background: blue; color: white; }
                .btn-disabled { opacity: 0.5; cursor: not-allowed; }

                /* æ–‡æœ¬æ ·å¼ */
                .text-success { color: green; }
                .text-warning { color: orange; }
                .text-danger { color: red; }
            `]
        })
        export class NgClass01Component {
            isActive = true;
            hasError = false;
            score = 75;

            buttonClasses = {
                'btn': true,
                'btn-primary': true,
                'btn-disabled': false
            };
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/062.png)

2. æ•°ç»„è¯­æ³•

    - ç»„ä»¶
    
        ```ts
        @Component({
            selector: 'ngClass-02',
            template: `
                <!-- é™æ€ç±»æ•°ç»„ -->
                <div [ngClass]="['base-class', 'additional-class']">
                    é™æ€ç±»æ•°ç»„
                </div>

                <!-- æ··åˆé™æ€å’ŒåŠ¨æ€ç±» -->
                <div [ngClass]="['card', isFeatured ? 'featured' : '']">
                    å¡ç‰‡å†…å®¹
                </div>

                <!-- ä½¿ç”¨ç»„ä»¶æ–¹æ³•è¿”å›æ•°ç»„ -->
                <div [ngClass]="getClasses()">
                    åŠ¨æ€ç±»æ•°ç»„
                </div>

                <!-- æ¡ä»¶ç±»ç»„åˆ -->
                <button [ngClass]="[
                    'btn',
                    type === 'primary' ? 'btn-primary' : 'btn-secondary',
                    size === 'large' ? 'btn-lg' : ''
                ]">
                    æŒ‰é’®
                </button>
            `,
            styles:[`
                /* åŸºç¡€æ ·å¼ */
                .base-class { padding: 10px; margin: 5px; }
                .additional-class { border: 1px solid #ccc; }

                /* å¡ç‰‡æ ·å¼ */
                .card { border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
                .featured { border: 2px solid gold; }

                /* ç”¨æˆ·å¡ç‰‡ */
                .user-card { padding: 15px; margin: 10px; }
                .highlighted {
                    background-color: #fff3cd;
                    border-color: #ffc107;
                    box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3);
                }
                .animated {
                    animation: pulse 2s infinite;
                }
                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                    100% { transform: scale(1); }
                }


                /* æŒ‰é’®æ ·å¼ */
                .btn { padding: 8px 16px; border: none; cursor: pointer; }
                .btn-primary { background: blue; color: white; }
                .btn-secondary { background: gray; color: white; }
                .btn-disabled { opacity: 0.5; cursor: not-allowed; }
                .btn-lg { font-size:"22px" }

            `]
        })
        export class NgClass02Component {
            isFeatured = true;
            type = 'primary';
            size = 'large';

            getClasses() {
                return [
                    'user-card',
                    this.isFeatured ? 'highlighted' : '',
                    'animated'
                ];
            }
        }

        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/063.gif)

3. å­—ç¬¦ä¸²è¯­æ³•

    - ç»„ä»¶

        ```ts   
        @Component({
            selector: 'ngClass-03',
            template: `
                <!-- ç›´æ¥å­—ç¬¦ä¸² -->
                <div [ngClass]="'class1 class2 class3'">
                    å­—ç¬¦ä¸²è¯­æ³•
                </div>

                <!-- åŠ¨æ€å­—ç¬¦ä¸² -->
                <div [ngClass]="currentClassString">
                    åŠ¨æ€ç±»å­—ç¬¦ä¸²
                </div>

                <!-- æ¡ä»¶å­—ç¬¦ä¸² -->
                <div [ngClass]="isSpecial ? 'special highlighted' : 'normal'">
                    æ¡ä»¶ç±»å­—ç¬¦ä¸²
                </div>

                <!-- ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸² -->
                <div [ngClass]="'base-' + variant + ' size-' + size">
                    æ¨¡æ¿å­—ç¬¦ä¸²ç±»
                </div>
            `,
            styles:[`
                .class1 { color: red }
                .class2 { font-size: 22px }
                .class3 { font-weight: bold }
                .alert { padding: 10px;background-color:pink }
                .alert-info { color: orange; font-size: 12px }
                .special { font-style: italic }
                .highlighted {
                    background-color: #fff3cd;
                    border-color: #ffc107;
                    box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3);
                }
                .base-primary {
                    background-color: #77ec5fff;
                }
                .size-large {
                    font-size: 26px
                }
            `]
        })
        export class NgClass03Component {
            currentClassString = 'alert alert-info';
            isSpecial = true;
            variant = 'primary';
            size = 'large';
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/064.png)

## 3.5 å†…ç½®å±æ€§æŒ‡ä»¤-è¡¨å•


### 3.4.1 è¡¨å•æŒ‡ä»¤ä»‹ç»

1. æŒ‡ä»¤ç±»å‹

    | æŒ‡ä»¤              | é€‚ç”¨ç­–ç•¥ | ä½œç”¨ä¸æè¿°                                                                          |
    |-----------------|------|--------------------------------------------------------------------------------|
    | ngModelGroup    | æ¨¡æ¿é©±åŠ¨ | ä¸ºæ¨¡æ¿é©±åŠ¨è¡¨å•ä¸­çš„ä¸€ç»„æ§ä»¶åˆ›å»ºä¸€ä¸ªé¡¶çº§ FormGroup çš„å­ç»„ã€‚ç”¨äºåˆ†ç»„éªŒè¯å’Œç»„ç»‡æ•°æ®ã€‚                                 |
    | formControl     | å“åº”å¼  | å°†ä¸€ä¸ªç°æœ‰çš„ã€åœ¨ç»„ä»¶ç±»ä¸­åˆ›å»ºçš„ FormControl å®ä¾‹ç»‘å®šåˆ°æ¨¡æ¿ä¸­çš„ä¸€ä¸ªè¡¨å•æ§ä»¶ä¸Šã€‚                                  |
    | formControlName | å“åº”å¼  | å°†ä¸€ä¸ªç°æœ‰çš„ã€åœ¨ç»„ä»¶ç±»ä¸­åˆ›å»ºçš„ FormControl å®ä¾‹ï¼ˆå®ƒæ˜¯çˆ¶ FormGroup çš„ä¸€éƒ¨åˆ†ï¼‰é€šè¿‡å…¶åç§°ç»‘å®šåˆ°æ¨¡æ¿ä¸­çš„ä¸€ä¸ªè¡¨å•æ§ä»¶ä¸Šã€‚         |
    | formGroup       | å“åº”å¼  | å°†ä¸€ä¸ªç°æœ‰çš„ã€åœ¨ç»„ä»¶ç±»ä¸­åˆ›å»ºçš„ FormGroup å®ä¾‹ç»‘å®šåˆ°ä¸€ä¸ª `<form>` å…ƒç´ ä¸Šã€‚                                  |
    | formGroupName   | å“åº”å¼  | å°†ä¸€ä¸ªåµŒå¥—çš„ã€åœ¨ç»„ä»¶ç±»ä¸­åˆ›å»ºçš„ FormGroup å®ä¾‹ï¼ˆå®ƒæ˜¯çˆ¶ FormGroup çš„ä¸€éƒ¨åˆ†ï¼‰é€šè¿‡å…¶åç§°ç»‘å®šåˆ°æ¨¡æ¿ä¸­çš„ä¸€ä¸ª DOM å…ƒç´ ï¼ˆå¦‚ divï¼‰ä¸Šã€‚ |
    | formArrayName   | å“åº”å¼  | å°†ä¸€ä¸ªåµŒå¥—çš„ã€åœ¨ç»„ä»¶ç±»ä¸­åˆ›å»ºçš„ FormArray å®ä¾‹ï¼ˆå®ƒæ˜¯çˆ¶ FormGroup çš„ä¸€éƒ¨åˆ†ï¼‰é€šè¿‡å…¶åç§°ç»‘å®šåˆ°æ¨¡æ¿ä¸­çš„ä¸€ä¸ª DOM å…ƒç´ ä¸Šã€‚        |

2. å‰ç½®å‡†å¤‡

    ```ts
    import { NgModule } from '@angular/core';
    import { BrowserModule } from '@angular/platform-browser';
    import { FormsModule, ReactiveFormsModule } from '@angular/forms';

    import { AppComponent } from './app.component';

    @NgModule({
        declarations: [AppComponent],
        imports: [
            BrowserModule,
            FormsModule,        // ç”¨äºæ¨¡æ¿é©±åŠ¨è¡¨å•
            ReactiveFormsModule // ç”¨äºå“åº”å¼è¡¨å•
        ],
        bootstrap: [AppComponent]
    })
    export class AppModule { }
    ```

### 3.4.2  `ngModel` éªŒè¯è¡¨å•

1. çŠ¶æ€å±æ€§è¯¦è§£

    1. valid / invalid
        - ä½œç”¨: è¡¨ç¤ºæ§ä»¶çš„éªŒè¯çŠ¶æ€ã€‚
        - valid: true - æ§ä»¶çš„å€¼é€šè¿‡äº†æ‰€æœ‰éªŒè¯è§„åˆ™
        - invalid: true - æ§ä»¶çš„å€¼æœªé€šè¿‡è‡³å°‘ä¸€ä¸ªéªŒè¯è§„åˆ™
    2. touched / untouched
        - ä½œç”¨: è¡¨ç¤ºç”¨æˆ·æ˜¯å¦ä¸æ§ä»¶å‘ç”Ÿè¿‡äº¤äº’ï¼ˆèšç„¦ååˆå¤±ç„¦ï¼‰ã€‚
        - touched: true - ç”¨æˆ·å·²ç»èšç„¦è¿‡è¯¥æ§ä»¶ç„¶åç¦»å¼€äº†ï¼ˆblurï¼‰
        - untouched: true - ç”¨æˆ·ä»æœªèšç„¦è¿‡è¯¥æ§ä»¶ï¼Œæˆ–è€…èšç„¦åè¿˜æœªç¦»å¼€
    3. dirty / pristine
        - ä½œç”¨: è¡¨ç¤ºç”¨æˆ·æ˜¯å¦ä¿®æ”¹è¿‡æ§ä»¶çš„å€¼ã€‚
        - dirty: true - ç”¨æˆ·å·²ç»ä¿®æ”¹è¿‡æ§ä»¶çš„å€¼ï¼ˆè‡³å°‘è¾“å…¥è¿‡ä¸€æ¬¡ï¼‰
        - pristine: true - æ§ä»¶çš„å€¼ä»ç„¶æ˜¯åˆå§‹å€¼ï¼Œç”¨æˆ·ä»æœªä¿®æ”¹è¿‡
    4. å†…ç½®éªŒè¯å™¨å¯¹åº”çš„ errors
        1. required - å¿…å¡«éªŒè¯

            ```ts
            // å½“å€¼ä¸ºç©ºæ—¶
            nameCtrl.errors = { 'required': true }
            ```
        2. minlength - æœ€å°é•¿åº¦éªŒè¯

            ```ts
            // å½“è¾“å…¥ "abc" (é•¿åº¦3) æ—¶
            pwdCtrl.errors = {
                'minlength': {
                    requiredLength: 6,
                    actualLength: 3
                }
            }
            ```
        3. maxlength - æœ€å¤§é•¿åº¦éªŒè¯

            ```ts
            // å½“è¾“å…¥è¶…è¿‡50ä¸ªå­—ç¬¦æ—¶
            titleCtrl.errors = {
                'maxlength': {
                    requiredLength: 50,
                    actualLength: 55
                }
            }
            ```
        4. email - é‚®ç®±æ ¼å¼éªŒè¯

            ```ts
            // å½“è¾“å…¥ "invalid-email" æ—¶
            emailCtrl.errors = { 'email': true }
            ```
        5. pattern - æ­£åˆ™è¡¨è¾¾å¼éªŒè¯

            ```ts
            // å½“è¾“å…¥ "abc123" æ—¶
            phoneCtrl.errors = {
                'pattern': {
                    requiredPattern: '^[0-9]{10}$',
                    actualValue: 'abc123'
                }
            }
            ```
2. ä»£ç å±•ç¤º

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'ngMode-01',
        template: `
        <input
            type="email"
            name="email"
            [(ngModel)]="userEmail"
            required
            email
            #emailCtrl="ngModel">

            <div *ngIf="emailCtrl.invalid && emailCtrl.touched">
                <div *ngIf="emailCtrl.errors?.['required']">é‚®ç®±å¿…å¡«</div>
                <div *ngIf="emailCtrl.errors?.['email']">é‚®ç®±æ ¼å¼ä¸æ­£ç¡®</div>
            </div>

            <p>æ§ä»¶çŠ¶æ€:
                Valid: {{ emailCtrl.valid }},
                Touched: {{ emailCtrl.touched }},
                Dirty: {{ emailCtrl.dirty }}
            </p>
        `,
    })
    export class NgModel01Component {
        userEmail:string = ''
    }
    ```
3. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/065.gif)

### 3.4.3 ngModelGroup - åˆ†ç»„ç¤ºä¾‹

1. ç»„ä»¶ä»£ç 

    ```ts  
    @Component({
        selector: 'ngModelGroup-01',
        template: `
            <form #userForm="ngForm">

                <!-- å•ä¸ªå­—æ®µ -->
                <div>
                    <label>ç”¨æˆ·å:</label>
                    <input [(ngModel)]="user.username" name="username" placeholder="è¾“å…¥ç”¨æˆ·å">
                </div>

                <!-- åœ°å€ä¿¡æ¯åˆ†ç»„ -->
                <div ngModelGroup="address" 
                    style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;"
                >
                    <h3>åœ°å€ä¿¡æ¯</h3>

                    <div>
                        <label>è¡—é“:</label>
                        <input [(ngModel)]="user.address.street" name="street" placeholder="è¾“å…¥è¡—é“">
                    </div>

                    <div>
                        <label>åŸå¸‚:</label>
                        <input [(ngModel)]="user.address.city" name="city" placeholder="è¾“å…¥åŸå¸‚">
                    </div>

                    <div>
                        <label>é‚®ç¼–:</label>
                        <input [(ngModel)]="user.address.zipCode" name="zipCode" placeholder="è¾“å…¥é‚®ç¼–">
                    </div>
                </div>

                <!-- æ˜¾ç¤ºè¡¨å•å€¼ -->
                <div style="margin-top: 20px;">
                    <h4>å½“å‰è¡¨å•å€¼:</h4>
                    <pre>{{ userForm.value | json }}</pre>
                </div>

            </form>
        `,
    })
    export class NgModelGroup01Component {
        user = {
            username: '',
            address: {
                street: '',
                city: '',
                zipCode: ''
            }
        };
    }
    ```
2. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/066.gif)

### 3.4.4 formControl - ç‹¬ç«‹æ§ä»¶

1. ç»„ä»¶ä»£ç 

    ```ts
    import { Component } from '@angular/core';
    import { FormControl,Validators } from '@angular/forms';

    @Component({
        selector: 'formControl-01',
        template: `
            <input type="text" [formControl]="usernameControl">
            <p>å€¼: {{ usernameControl.value }}</p>
            <p>çŠ¶æ€: {{ usernameControl.status }}</p>
        `,
    })
    export class FormControl01Component {
        usernameControl = new FormControl('åˆå§‹å€¼', {
            validators: [Validators.required, Validators.minLength(3)]
        });
    }
    ```
2. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/067.gif)

### 3.4.5 formGroup + formControlName - åŸºæœ¬è¡¨å•

1. ç»„ä»¶ä»£ç 

    ```ts
    import { Component } from '@angular/core';
    import { FormGroup, FormControl, Validators } from '@angular/forms';

    @Component({
        selector: 'baseForml-01',
        template: `
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
                <input type="text" formControlName="username" placeholder="ç”¨æˆ·å">
                <input type="password" formControlName="password" placeholder="å¯†ç ">

                <button type="submit" [disabled]="!loginForm.valid">ç™»å½•</button>
            </form>

            <p>è¡¨å•å€¼: {{ loginForm.value | json }}</p>
            <p>è¡¨å•çŠ¶æ€: {{ loginForm.status }}</p>
        `,
    })
    export class BaseForm01Component {
        loginForm = new FormGroup({
            username: new FormControl('', Validators.required),
            password: new FormControl('', [Validators.required, Validators.minLength(6)])
        });

        onSubmit() {
            console.log('æäº¤çš„æ•°æ®:', this.loginForm.value);
        }
    }
    ```
2. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/068.gif)

### 3.4.6 formGroupName - åµŒå¥—åˆ†ç»„

1. ç»„ä»¶ä»£ç 

    ```ts
    import { Component } from '@angular/core';
    import { FormGroup, FormControl, Validators } from '@angular/forms';

    @Component({
        selector: 'formGroupName-01',
        template: `
            <form [formGroup]="userForm">
                <input type="text" formControlName="name" placeholder="å§“å">

                <div formGroupName="contact">
                    <input type="email" formControlName="email" placeholder="é‚®ç®±">
                    <input type="tel" formControlName="phone" placeholder="ç”µè¯">
                </div>
            </form>

            <p>è¡¨å•å€¼: {{ userForm.value | json }}</p>
            <p>è¡¨å•çŠ¶æ€: {{ userForm.status }}</p>
        `,
    })
    export class FormGroupName01Component {
        userForm = new FormGroup({
            name: new FormControl('', Validators.required),
            contact: new FormGroup({
                email: new FormControl('', [Validators.required,Validators.email]),
                phone: new FormControl('', [Validators.required,Validators.minLength(11)])
            })
        });
    }

    ```
2. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/069.gif)

### 3.4.7 formArrayName - åŠ¨æ€è¡¨å•æ•°ç»„

1. ç»„ä»¶ä»£ç 

    ```ts
    import { Component } from '@angular/core';
    import { FormGroup, FormArray, FormControl } from '@angular/forms';

    @Component({
        selector: 'FormArray-01',
        template: `
            <h3>å…´è¶£çˆ±å¥½åˆ—è¡¨</h3>
            <form [formGroup]="userForm">
                <div formArrayName="hobbies">
                    <div *ngFor="let hobby of hobbies.controls; let i = index" class="hobby-item">
                        <input [formControlName]="i" placeholder="è¾“å…¥çˆ±å¥½">
                        <button type="button" (click)="removeHobby(i)">åˆ é™¤</button>
                    </div>
                </div>

                <button type="button" (click)="addHobby()">æ·»åŠ çˆ±å¥½</button>

                <div>
                    <h4>å½“å‰çˆ±å¥½:</h4>
                    <pre>{{ hobbies.value | json }}</pre>
                    <p>å…±æœ‰ {{ hobbies.length }} ä¸ªçˆ±å¥½</p>
                </div>
            </form>
        `,
        styles: [`
            .hobby-item {
                margin: 10px 0;
                display: flex;
                gap: 10px;
            }
            button {
                padding: 5px 10px;
            }
        `]
    })
    export class FormArray01Component {
        userForm: FormGroup;

        constructor() {
            this.userForm = new FormGroup({
            hobbies: new FormArray([
                new FormControl('æ¸¸æ³³'),
                new FormControl('é˜…è¯»')
            ])
            });
        }

        // è·å– hobbies FormArray
        get hobbies() {
            return this.userForm.get('hobbies') as FormArray;
        }

        // æ·»åŠ æ–°çˆ±å¥½
        addHobby() {
            this.hobbies.push(new FormControl(''));
        }

        // åˆ é™¤çˆ±å¥½
        removeHobby(index: number) {
            this.hobbies.removeAt(index);
        }
    }

    ```
2. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/070.gif)

### 3.4.8 FormBuilder

FormBuilder æ˜¯ Angular çš„ä¸€ä¸ªæœåŠ¡ç±»ï¼Œå®ƒæä¾›äº†åˆ›å»º FormGroupã€FormControl å’Œ FormArray çš„å¿«æ·æ–¹æ³•ï¼Œä½¿è¡¨å•åˆ›å»ºä»£ç æ›´åŠ ç®€æ´å’Œå¯è¯»ã€‚

1. åˆ›å»º FormControl çš„ç®€å•ç¤ºä¾‹

    - ç»„ä»¶ä»£ç 

        ```ts
        @Component({
            selector: 'formBuilder-control',
            template: `
                <div>
                    <label>ç”¨æˆ·å:</label>
                    <input [formControl]="usernameControl">
                    <p>å€¼: {{ usernameControl.value }}</p>
                    <p>çŠ¶æ€: {{ usernameControl.status }}</p>
                </div>
            `
        })
        export class FormBuilder01Component {
            // ä½¿ç”¨ FormBuilder åˆ›å»º FormControl
            usernameControl = this.fb.control('é»˜è®¤å€¼', [
                Validators.required,
                Validators.minLength(3)
            ]);

            constructor(private fb: FormBuilder) {}
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/071.gif)

2. åˆ›å»º FormGroup çš„ç®€å•ç¤ºä¾‹

    - ç»„ä»¶ä»£ç 

        ```ts
        @Component({
            selector: 'formBuilder-group',
            template: `
                <form [formGroup]="userForm">
                    <input formControlName="firstName" placeholder="åå­—">
                    <input formControlName="lastName" placeholder="å§“æ°">
                    <p>è¡¨å•å€¼: {{ userForm.value | json }}</p>
                    <p>çŠ¶æ€: {{ userForm.status }}</p>
                </form>
            `
        })
        export class FormBuilder02Component {
            // ä½¿ç”¨ FormBuilder åˆ›å»º FormGroup
            userForm = this.fb.group({
                firstName: ['', Validators.required],
                lastName: ['', Validators.required]
            });

            constructor(private fb: FormBuilder) {}
        }

        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/072.gif)
3. åˆ›å»º FormArray çš„ç®€å•ç¤ºä¾‹

    - ç»„ä»¶ä»£ç 

        ```ts
        @Component({
            selector: 'formBuilder-array',
            template: `
                <h3>å…´è¶£çˆ±å¥½åˆ—è¡¨</h3>
                <form [formGroup]="userForm">
                    <div formArrayName="hobbies">
                        <div *ngFor="let hobby of hobbies.controls; let i = index" class="hobby-item">
                            <input [formControlName]="i" placeholder="è¾“å…¥çˆ±å¥½">
                            <button type="button" (click)="removeHobby(i)">åˆ é™¤</button>
                        </div>
                    </div>

                    <button type="button" (click)="addHobby()">æ·»åŠ çˆ±å¥½</button>

                    <div>
                        <h4>å½“å‰çˆ±å¥½:</h4>
                        <pre>{{ hobbies.value | json }}</pre>
                        <p>å…±æœ‰ {{ hobbies.length }} ä¸ªçˆ±å¥½</p>
                    </div>
                </form>
            `,
            styles: [`
                .hobby-item {
                    margin: 10px 0;
                    display: flex;
                    gap: 10px;
                }
                button {
                    padding: 5px 10px;
                }
            `]
        })
        export class FormBuilder03Component {
            userForm: FormGroup;

            constructor(private fb: FormBuilder) {
                this.userForm = this.fb.group({
                    hobbies: this.fb.array([
                        'æ¸¸æ³³',
                        'é˜…è¯»'
                    ])
                });
            }

            // è·å– hobbies FormArray
            get hobbies() {
                return this.userForm.get('hobbies') as FormArray;
            }

            // æ·»åŠ æ–°çˆ±å¥½
            addHobby() {
                this.hobbies.push(this.fb.control(''));
            }

            // åˆ é™¤çˆ±å¥½
            removeHobby(index: number) {
                this.hobbies.removeAt(index);
            }
        }
        ```
    - è¿è¡Œç»“æœ

        ![](/framework/angular/base16/073.gif)
                

## 3.6 å†…ç½®å±æ€§æŒ‡ä»¤-HTMLå±æ€§

### 3.6.1  `[hidden]` - æ˜¾ç¤º/éšè—

1. ç¤ºä¾‹

    ```html
    <!-- ç®€å•éšè— -->
    <div [hidden]="!isVisible">å†…å®¹</div>
    ```
2. é¡¹ç›®ä»£ç 

    ```ts
    import { Component } from '@angular/core';

    @Component({
        selector: 'hidden-01',
        template: `
            <h3>å†…å®¹æ˜¾ç¤ºæ§åˆ¶</h3>

            <button (click)="isVisible = !isVisible">
                {{ isVisible ? 'éšè—' : 'æ˜¾ç¤º' }}å†…å®¹
            </button>

            <button (click)="showSecret = !showSecret">
                {{ showSecret ? 'éšè—' : 'æ˜¾ç¤º' }}ç§˜å¯†
            </button>

            <div [hidden]="!isVisible">è¿™æ˜¯å¯è§çš„å†…å®¹</div>
            <div [hidden]="!showSecret">ğŸ”’ ç§˜å¯†ä¿¡æ¯</div>
            <div [hidden]="!isVisible || !showSecret">åªæœ‰ä¸¤ä¸ªéƒ½æ˜¾ç¤ºæ—¶æˆ‘æ‰å‡ºç°</div>

            <h4>æƒé™æ§åˆ¶</h4>
            <div [hidden]="!user.isAdmin">ç®¡ç†å‘˜åŠŸèƒ½</div>
            <div [hidden]="user.level < 3">VIPåŠŸèƒ½</div>
        `
    })
    export class Hidden01Component {
        isVisible = true;
        showSecret = false;

        user = {
            isAdmin: true,
            level: 5
        };
    }
    ```
3. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/075.gif)

### 3.6.2 `[title]` - å·¥å…·æç¤º


1. ç¤ºä¾‹

    ```html
    <span [title]="tooltipText">æ‚¬åœæŸ¥çœ‹æç¤º</span>
    ```

2. é¡¹ç›®ä»£ç 

    ```ts
    
    @Component({
        selector: 'title-01',
        template: `
            <h3>æ‚¬åœæç¤ºç¤ºä¾‹</h3>

            <button [title]="buttonTooltip">æ‚¬åœæŸ¥çœ‹æŒ‰é’®æç¤º</button>

            <input
            type="text"
            [title]="inputTitle"
            placeholder="è¾“å…¥å†…å®¹"
            (input)="onInputChange($event)">

            <div [title]="isValid ? 'æ•°æ®æœ‰æ•ˆ' : 'è¯·æ£€æŸ¥è¾“å…¥'">
                æ•°æ®éªŒè¯çŠ¶æ€: {{ isValid ? 'æœ‰æ•ˆ' : 'æ— æ•ˆ' }}
            </div>

            <span [title]="getUserTooltip()">ç”¨æˆ·ä¿¡æ¯</span>

            <img
            src="https://via.placeholder.com/50"
            [title]="'å›¾ç‰‡ID: ' + imageId"
            alt="ç¤ºä¾‹å›¾ç‰‡">

            <a href="#" [title]="linkDescription">é‡è¦é“¾æ¥</a>
        `
    })
    export class Title01Component {
        buttonTooltip = 'ç‚¹å‡»æ­¤æŒ‰é’®æ‰§è¡Œæ“ä½œ';
        inputTitle = 'è¯·è¾“å…¥æ‚¨çš„å§“å';
        isValid = true;
        imageId = '12345';
        linkDescription = 'è¿™æ˜¯ä¸€ä¸ªå¯¼èˆªé“¾æ¥';

        getUserTooltip() {
            return `ç”¨æˆ·ä¿¡æ¯ï¼šå¼ ä¸‰ï¼Œ25å²ï¼Œç®¡ç†å‘˜`;
        }

        onInputChange(event: any) {
            this.isValid = event.target.value.length > 3;
        }
    }

    ```

3. è¿è¡Œç»“æœ

    ![](/framework/angular/base16/076.gif)

### 3.6.3 `[tabindex]` - æ ‡ç­¾ç´¢å¼•


1. ç¤ºä¾‹

    ```html
    <!-- ç®€å•éšè— -->
   <button [tabindex]="isDisabled ? -1 : 0">æŒ‰é’®</button>
    ```

2. é¡¹ç›®ä»£ç 

    ```ts
    @Component({
        selector: 'tabindex-01',
        template: `
            <h3>Tabé”®å¯¼èˆªé¡ºåº</h3>
            <p>ä½¿ç”¨ Tab é”®åœ¨ä¸åŒå…ƒç´ é—´å¯¼èˆª</p>

            <input type="text" placeholder="ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†" tabindex="1">
            <input type="text" placeholder="ç¬¬äºŒä¸ªè¾“å…¥æ¡†" tabindex="2">

            <button (click)="toggleDisabled()" [tabindex]="isDisabled ? -1 : 0">
                {{ isDisabled ? 'ç¦ç”¨æŒ‰é’®' : 'å¯ç‚¹å‡»æŒ‰é’®' }}
            </button>

            <div [tabindex]="0" (keydown.enter)="onDivClick()">
                è¿™ä¸ªdivä¹Ÿå¯ä»¥è·å¾—ç„¦ç‚¹ï¼ˆæŒ‰Enterè§¦å‘ï¼‰
            </div>

            <h4>åŠ¨æ€Tabç´¢å¼•</h4>
            <button *ngFor="let btn of buttons; let i = index"
                    [tabindex]="i + 10">
                æŒ‰é’® {{ i + 1 }}
            </button>

            <h4>æ¡ä»¶Tabç´¢å¼•</h4>
            <input type="text" placeholder="æ¡ä»¶è¾“å…¥æ¡†"
                [tabindex]="allowEditing ? 5 : -1">
            <label>
                <input type="checkbox" [(ngModel)]="allowEditing">
                å…è®¸ç¼–è¾‘
            </label>
        `
    })
    export class Tabindex01Component {
        isDisabled = false;
        allowEditing = true;
        buttons = [1, 2, 3, 4];

        toggleDisabled() {
            this.isDisabled = !this.isDisabled;
        }

        onDivClick() {
            alert('Divè¢«æ¿€æ´»ï¼');
        }
    }
    ```

3. è¿è¡Œç»“æœ (tabé”®ä¸€ç›´ç‚¹)

    ![](/framework/angular/base16/077.gif)