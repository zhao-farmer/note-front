# 三、react应用

## 3.1 react 创建项目

### 3.1.1 react 脚手架

1. xxx 脚手架: 用来帮助程序员快速创建一个基于 xxx 库的模板项目
    1. 包含了所有需要的配置(语法检查、jsx编译、devServer...)
    2. 下载好了所有相关的依赖
    3. 可以直接运行一个简单效果
2. react 提供了一个用于创建 react 项目的脚手架库: create-react-appe
3. 项目的整体技术架构为:react+webpack+es6+eslinte
4. 使用脚手架开发的项目的特点: 模块化,组件化,工程化

### 3.1.2 创建项目并启动

1. 使用 create-react-app 创建项目

    ```sh
    # 全局安装 create-react-app
    npm install create-react-app -g
    # 创建项目
    create-react-app react01
    ```

2. 修改项目版本

    ```sh
    # 进入目录
    cd react01
    # 安装react18
    npm install react@18 react-dom@18
    ```

3. 启动项目

    ```sh
    npm start
    ```

### 3.1.2 项目介绍

1. 项目结构

    ```md
    react01/
    ├── node_modules/       # 项目依赖
    ├── public/             # 静态文件
    │   ├── index.html      # 主HTML文件
    │   └── ...
    ├── src/                # 源代码
    │   ├── App.js          # 主组件
    │   ├── index.js        # 应用入口文件
    │   └── ...
    ├── package.json        # 项目配置和依赖
    └── README.md           # 项目说明
    ```

2. public 静态资源文件夹

    - 文件列表

        favicon.icon ------ 网站页签图标<br>
        <b style="color:red;font-weight:bold">index.html -------- 主页面</b><br>
        logo192.png ------- logo 图<br>
        l0go512.png-------logo 图<br>
        manifest.json -----应用加壳的配置文件<br>
        robots.txt--------爬虫协议文件
        
    - index.html

        ```html
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="utf-8" />
            <!-- %PUBLIC_URL% 代表pulic文件夹的路径 -->
            <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
            <!-- 开启理想窗口，用于做移动端网页的适配 -->
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <!-- 用于配置浏览器页签+地址栏的颜色（仅支持安卓收集浏览器） -->
            <meta name="theme-color" content="#000000" />
            <meta
            name="description"
            content="Web site created using create-react-app"
            />
            <!-- 用于指定网页添加到收集主屏幕后的图表 -->
            <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
            <!-- 应用加壳时的配置文件，写出html页面加上安卓或IOS的壳 -->
            <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
            
            <title>React App</title>
        </head>
        <body>
            <!-- 若浏览器不支持js则展示标签中的内容 -->
            <noscript>You need to enable JavaScript to run this app.</noscript>
            <div id="root"></div>
            
        </body>
        </html>
        ```

3. src 源码文件夹

    - 文件列表

        App.css -------- App 组件的样式<br>
        <b style="color:red;font-weight:bold">App.js --------- App 组件</b><br>
        App.test.js ---- 用于给 App 做测试<br>
        index.css ------ 样式<br>
        <b style="color:red;font-weight:bold">index.js ------- 入口文件</b><br>
        l0g0.sVg ------- logo 图<br>
        reportWebVitals.js --- 页面性能分析文件(需要 web-vitals 库的支持)<br>
        setupTests.js --- 组件单元测试的文件(需要 jest-dom 库的支持)
        
    - App.js

        ```js
        /* 引入logo文件 */
        import logo from './logo.svg';
        /* 引入css样式 */
        import './App.css';

        /* 使用函数创建组件 */
        function App() {
        return (
            <div className="App">
                <header className="App-header">
                    <img src={logo} className="App-logo" alt="logo" />
                    <p>
                        Edit <code>src/App.js</code> and save to reload.
                    </p>
                    <a
                        className="App-link"
                        href="https://reactjs.org"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        Learn React
                    </a>
                </header>
            </div>
        );
        }

        /* 导出组件 */
        export default App;

        ```
    - index.js

        ```js
        /* 引入react与react-dom */
        import React from 'react';
        import ReactDOM from 'react-dom/client';
        /* 引入总体样式 */
        import './index.css';
        /* 引入App组件 */
        import App from './App';
        /* 性能分析 - 后续开发不需要 */
        import reportWebVitals from './reportWebVitals';


        /* 虚拟DOM挂载到 public/index.html <div id="root"></div> */
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            /* React.StrictMode 检查代码是否合理 */
            <React.StrictMode>
                {/* 使用引入的函数组件 */}
                <App />
            </React.StrictMode>
        );

        reportWebVitals();
        ```
    
## 3.2 初始创建

### 3.2.1 简单的hello组件

1. 整理文件

    - 删除 .git .gitignore
    - 移动 public文件夹 与 src 文件文件夹
    - 创建 public文件夹 与 src文件夹


2. 初始创建

    - public/index.html

        ```html
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="utf-8" />
            <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
            <meta
            name="description"
            content="Web site created using create-react-app"
            />
            <title>React App</title>
        </head>
        <body>
            <!-- 所有组件都挂载到这里 -->
            <div id="root"></div>
        </body>
        </html>
        ```
    - src/index.js

        ```js
        // 引入ReactDOm
        import ReactDOM from "react-dom/client"
        // 引入App组件
        import App from "./App"

        // 设置根组件节点
        const root = ReactDOM.createRoot(document.getElementById('root'));

        // 渲染App到页面
        root.render(<App/>)
        ```
    - src/App.js

        ```js
        // 引入react核心库
        import React from "react";

        // 创建外壳组件App
        class App extends React.Component{
            render(){
                return (
                    <div>
                        hello,react
                    </div>
                )
            }
        }

        // 暴漏 App 组件
        export default App
        ```

3. 约定方式一：文件夹同名

    - src/App.js

        ```js{3-4,11}
        // 引入React核心库 的 Component 类
        import React,{Component} from "react";
        // 引入hello组件
        import Hello from "./Hello/Hello"

        // 创建并暴漏 App 组件
        export default class App extends Component{
            render(){
                return (
                    <div>
                        <Hello/>
                    </div>
                )
            }
        }
        ```
    - src/Hello/Hello.jsx

        ```jsx
        import {Component} from "react";
        import "./Hello.css"

        export default class App extends Component{
            render(){
                return <h2 className="demo1">hello,react</h2>
            }
        }
        ```
    - src/Hello/Hello.css

        ```css
        .demo1{
            background-color: orange;
        }
        ```
4. 约定方式二：文件夹下写index.jsx

    - src/App.js

        ```js{5-6,14}
        // 引入React核心库 的 Component 类
        import React,{Component} from "react";
        // 引入hello组件
        import Hello from "./Hello/Hello"
        // 引入webcome组件
        import Welcome from "./Welcome"

        // 创建并暴漏 App 组件
        export default class App extends Component{
            render(){
                return (
                    <div>
                        <Hello/>
                        <Welcome/>
                    </div>
                )
            }
        }
        ```
    - src/Welcome/index.jsx

        ```jsx
        import {Component} from "react";
        import "./index.css"

        export default class Webcome extends Component{
            render(){
                return <h2 className="demo2">Webcome</h2>
            }
        }
        ```
    - src/Welcome/index.css

        ```css
       .demo2{
            background-color: skyblue;
        }
        ```
5. 运行结果

    ![](/framework/react/react18Class/019.png)

### 3.2.2 样式的模块化

问题：不同组件下 不同样式的class名称相同怎么解决？

1. less/sass 最外层包裹 `.组件名`

2. 在 css 文件名上加入 module 

    - Hello.css 修改为 Hello.module.css
    - 将 Hello.module.css 作为组件引入并调用

        ```jsx{2,6}
        import {Component} from "react";
        import hello from "./Hello.module.css"

        export default class App extends Component{
            render(){
                return <h2 className={hello.title}>hello,react</h2>
            }
        }
        ``` 

### 3.2.3 vscode插件的安装

1. 安装插件

    ![](/framework/react/react18Class/020.png)

2. 代码片段

    - rcc 快速创建类组件
    - rfc 快速创建函数组件
    - [进入网站查看](https://github.com/r5n-labs/vscode-react-javascript-snippets/blob/HEAD/docs/Snippets.md)

### 3.2.4 组件化编码流程

1. 拆分组件: 拆分界面,抽取组件
2. 实现静态组件: 使用组件实现静态页面效果
3. 实现动态组件
    - 动态显示初始化数据
        - 数据类型
        - 数据名称
        - 保存在哪个组件?
    - 交互(从绑定事件监听开始)

## 3.3 组件的组合使用

### 3.3.1 项目初始构建

1. 拆分组件


    - 效果图

        ![](/framework/react/react18Class/021.png)

    - 拆分

        顶部的输入框，可以完成添加项目的功能，可以拆分成一个 **Header 组件**

        中间部分可以实现一个渲染列表的功能，可以拆分成一个 **List 组件**

        在这部分里面，每一个待办事项都可以拆分成一个 **Item 组件**

        最后底部显示当前完成状态的部分，可以拆分成一个 **Footer 组件**


2. 实现静态组件


    - 静态页面规范

        1. 打好注释
        2. 每个部分的 CSS 要写在一个地方，不要随意写
        3. 命名一定要规范
        4. CSS 选择器不要关联太多层级
        5. 在写 HTML 时就要划分好布局

    - 分离组件

        首先，我们在 `src` 目录下，新建一个 `Components` 文件夹，用于存放我们的组件，然后在文件夹下，新建 `Header` 、`Item`、`List` 、`Footer` 组件文件夹，再创建其下的 `index.jsx`，`index.css` 文件，用于创建对应组件及其样式文件

        ```markdown
        todolist
        ├─ package.json
        ├─ public
        │  ├─ favicon.ico
        │  └─ index.html
        ├─ src
        │  ├─ App.css
        │  ├─ App.jsx
        │  ├─ Components
        │  │  ├─ Footer
        │  │  │  ├─ index.css
        │  │  │  └─ index.jsx
        │  │  ├─ Header
        │  │  │  ├─ index.css
        │  │  │  └─ index.jsx
        │  │  ├─ item
        │  │  │  ├─ index.css
        │  │  │  └─ index.jsx
        │  │  └─ List
        │  │     ├─ index.css
        │  │     └─ index.jsx
        │  └─ index.js
        └─ yarn.lock
        ```

    - 复制代码到组件中

        - `HTML结构` 复制到对应的 .jsx 中 `return` 返回结构
        - `CSS样式` 复制到对应的 .css文件中
        - `.jsx` 引入 `.css`文件 实现HTML+CSS
        - `.jsx` 中 `class` 改为 `className`



### 3.3.2 实现动态组件

#### 3.3.2.1 动态展示列表


1. 实现方式

    我们目前实现的列表项是固定的，我们需要它通过**状态**来维护，而不是通过**组件标签**来维护

    父子之间传递参数，可以通过 `state` 和 `props` 实现

2. 修改 `App.jsx` 

    - 设置状态

        ```jsx
        //初始化状态
        state = {
            todos: [
                {id: '001', name: '吃饭', done: true},
                {id: '002', name: '睡觉', done: true},
                {id: '003', name: '打代码', done: false},
                {id: '004', name: '逛街', done: true},
            ]
        }
        ```

    - 传递给对应的渲染组件 `List` 

        ```jsx
        const { todos } = this.state
        <List todos={todos}/>
        ```
3. 修改 `List/index.jsx` 

    - 通过 `props` 来获取到 `todos` 

        ```jsx
        const { todos } = this.props
        ```

    - 再通过 `map` 遍历渲染 `Item` 数量

    ```js
    {
        todos.map(todo => {
            return <Item key={todo.id} {...todo}/>
        })
    }
    ```
- `Item/index.jsx`

    - 通过 `props` 来获取到 `todo` 

        ```jsx
        const {id, name, done} = this.props
        ```
    - 渲染Item组件

        ```jsx
        <label>
            <input type="checkbox" checked={done} />
            <span>{name}</span>
        </label>
        ```

    - 这里有三个注意点

        1. 关于 `key` 的作用在 diff 算法的文章中已经有讲过了，需要满足**唯一性**
        2. 这里采用了简写形式 `{...todo}` ，这使得代码更加简洁，它代表的意思是 

            ```js
            id = {todo.id} 
            name = {todo.name} 
            done = {todo.done}
            ```

            在 `Item` 组件中取出 `props` 即可使用

            ```js
            const { id, name, done } = this.props
            ```

        3. 对于复选框的选中状态，这里采用的是 `defaultChecked = {done}`，相比于 `checked` 属性，这个设定的是默认值，能够更改

4. 运行结果

    更改 `APP.jsx` 文件中的 `state` 就能驱动着 `Item` 组件的更新

    ![](/framework/react/react18Class/022.gif)
    

#### 3.3.2.2 添加事项功能

1. 实现步骤 

    - 实现目标：输入文字后点击回车，数据自动添加到列表中

    - 我们需要在 Header 组件中，绑定键盘事件，判断按下的是否为回车，如果为回车，则将当前输入框中的内容传递给 APP 组件

    - 在目前的学习知识中，Header 组件和渲染组件 List 属于兄弟组件，没有办法进行直接的数据传递，因此可以将数据传递给 APP 再由 APP 转发给 List。

2. `App.js`

    - 添加新增函数
    
        ```jsx
        addTodo = (todoObj) => {
            const { todos } = this.state
            // 追加一个 todo
            const newTodos = [todoObj, ...todos]
            this.setState({ todos: newTodos })
        }
        ```
    - 函数通过组件上 props 传递给Header组件

        ```jsx
        {/* addTodo 时props的key  this.addTodo 调用的函数 */}
        <Header addTodo={this.addTodo}></Header>
        ```
3. `Header/index.jsx` 

    - 组件上添加触发事件

        ```jsx
        <input onKeyUp={this.handleKeyUp} type="text" placeholder="请输入你的任务名称，按回车键确认"/>
        ```
    - 触发事件的函数
        
        ```jsx
        handleKeyUp = (event) => {
            // 结构赋值获取 keyCode,target
            const { keyCode, target } = event
            // 判断是不是回车
            if (keyCode !== 13) return
            if(target.value.trim() === '') {
                alert('输入不能为空')
            }
            // 准备一个todo对象
            const todoObj = { id: nanoid(), name: target.value, done: false }
            // 传递给app
            this.props.addTodo(todoObj)
            // 清空
            target.value = ''
        }
        ```
    - id唯一性

        采用的 `nanoid` 库，这个库的每一次调用都会返回一个唯一的值

        - 安装依赖

            ```shell
            npm i nanoid
            ```
        -   通过 `nanoid()` 调用 生成唯一值

            ```js
            // 引入
            import {nanoid} from "nanoid";
            // 使用
            nanoid()
            ```
4. 运行结果

    ![](/framework/react/react18Class/023.gif)


#### 3.3.2.3 实现鼠标悬浮效果


1. 鼠标移入时的变色效果

    通过一个状态来维护是否鼠标移入，比如用一个 `mouse` 变量，值给 `false` 当鼠标移入时，重新设定状态为 `true` 当鼠标移出时设为 `false` ，然后我们只需要在 `style` 中用`mouse` 去设定样式即可


2. 实现步骤

    1. 在 `Item` 组件中，先设定状态

        ```jsx
        state = { mouse: false } // 标识鼠标移入，移出
        ```

    2. 给元素绑定上鼠标移入，移出事件

        ```js
        <li onMouseEnter={this.handleMouse(true)} onMouseLeave={this.handleMouse(false)} ><li/>
        ```

        当鼠标移入时，会触发 `onMouseEnter` 事件，调用 `handleMouse` 事件传入参数 `true` 表示鼠标进入，更新组件状态

    3. 事件触发触发函数

        ```js
        handleMouse = flag => {
            return () => {
                this.setState({ mouse: flag })
            }
        }
        ```

    4. 再在 `li` 身上添加由 `mouse` 控制的背景颜色

        ```js
        style={{ backgroundColor: this.state.mouse ? '#ddd' : 'white' }}
        ```

    同时通过 `mouse` 来控制删除按钮的显示和隐藏，做法和上面一样



#### 3.3.2.4 复选框状态维护

1. 将当前复选框的状态，维护到 `state`  当中

    在复选框中添加一个 `onChange`  事件来进行数据的传递，当事件触发时我们执行 `handleCheck` 函数，这个函数可以向 App 组件中传递参数，这样再在 App 中改变状态即可

2. `Item/index.jsx`
    
    1. 组件里的表单上绑定事件 

        ```js
        <input type="checkbox" defaultChecked={done} onChange={this.handleCheck(id)} />
        ```

    2. 事件回调函数

        ```jsx
        handleCheck = (id) => {
            return (event) => {
                this.props.updateTodo(id, event.target.checked)
            }
        }
        ```

        - 传递 `id` 来记录状态更新的对象
        - 复选框的状态我们可以通过 `event.target.checked` 来获取

3. 更改 `App.js`

    - 添加修改`done`的函数

        这里更改的方式是 `{ ...todoObj, done }`，首先会展开 `todoObj` 的每一项，再对 `done` 属性做覆盖

        ```js
        updateTodo = (id, done) => {
            const { todos } = this.state
            // 处理
            const newTodos = todos.map(todoObj => {
                if (todoObj.id === id) {
                    return { ...todoObj, done }
                } else {
                    return todoObj
                }
            })
            this.setState({ todos: newTodos })
        }
        ```
    - 组件上绑定

        ```jsx
        <List todos={todos} updateTodo={this.updateTodo} ></List>
        ```


#### 3.3.2.5 限制参数类型


1. 在Header中 使用 `propTypes` 进行限制参数 对 `addTodo` 限制

    ```js
    import PropTypes from "prop-types";

    static propTypes = {
        addTodo: PropTypes.func.isRequired
    }
    ```
2. 在List 组件中 对 `todos` 以及 `updateTodo` 的限制

    ```js
    import PropTypes from "prop-types";

    static propTypes = {
        todos: PropTypes.array.isRequired,
        updateTodo: PropTypes.func.isRequired,   
    }
    ```

#### 3.3.2.6 删除按钮

现在我们需要

1. 业务分析 ： 实现删除按钮的效果
    需要在 `Item` 组件上的按钮绑定点击事件，然后传入被点击事项的 `id` 值，通过 `props` 将它传递给父元素 `List` ，再通过在 `List` 中绑定一个 `App` 组件中的删除回调，将 `id` 传递给 `App` 来改变 `state`

2. itme组件上触发 点击事件

    ```js
    // Item/index.jsx
    handleDelete = (id) => {
        this.props.deleteTodo(id)
    }
    ```

2. 父组件的修改状态

    子组件想影响父组件的状态，需要父组件传递一个函数，因此我们在 `App` 中添加一个 `deleteTodo` 函数

    ```js
    // app.jsx
    deleteTodo = (id) => {
        const { todos } = this.state
        const newTodos = todos.filter(todoObj => {
            return todoObj.id !== id
        })
        this.setState({ todos: newTodos })
    }
    ```

3. 然后将这个函数传递给 List 组件，再传递给 Item

    增加一个判断

    ```js
    if(window.confirm('确认删除')) {
        this.props.deleteTodo(id)
    }
    ```

#### 3.3.2.7 获取完成数量

1. 我们在 App 中向 `Footer` 组件传递 `todos` 数据，再去统计数据

    统计 `done `为 `true` 的个数

    ```js
    const doneCount = todos.reduce((pre, todo) => {
        return pre + (todo.done ? 1 : 0)
    }, 0)
    ```

#### 3.3.2.8 全选按钮

1. 需要分析

    需要在按钮上绑定事件，由于子组件需要改变父组件的状态，所以我们的操作和之前的一样，先绑定事件，再在 App 中传一个函数个 Footer ，再在 Footer 中调用这个函数并传入参数即可

    `defaulChecked` 只有第一次会起作用，所以我们需要将前面写的改成 `checked` 添加 `onChange` 事件即可

2. App 中给 Footer 传入一个函数 `checkAllTodo` 

    ```js
    // App.jsx
    checkAllTodo = (done) => {
        const { todos } = this.state
        const newTodos = todos.map((todoObj => {
            return { ...todoObj, done: done }
        }))
        this.setState({ todos: newTodos })
    }
    // render
    <Footer todos={todos} checkAllTodo={this.checkAllTodo}/>

    ```

2. Footer 中使用

    
    - 在 Footer 中调用函数

        ```js
        handleCheckAll = (event) => {
            this.props.checkAllTodo(event.target.checked)
        }
        ```

    - div中触发
    
        当前按钮的状态，用于全选和取消全选 同时我们需要排除总数为0 时的干扰

        ```html
        <input type="checkbox" checked={doneCount === total && total !== 0? true : false} onChange={this.handleCheckAll} />
        ```


#### 3.3.2.9 删除已完成

1. 在 Footer 组件中调用传来的函数，在 App 中定义函数，过滤掉  `done` 为 `true` 的，再更新状态即可

    ```js
    clearAllDone = () => {
        const { todos } = this.state
        const newTodos = todos.filter((todoObj) => {
            return todoObj.done !== true
        })
        this.setState({ todos: newTodos })
    }
    ```
2. Footer 中使用

    - 调用函数

        ```js
        handleClearAllDone = () => {
            this.props.clearAllDone()
        }
        ```
    - div中触发

        ```html
        <button onClick={this.handleClearAllDone} className="btn btn-danger">清除已完成任务</button>
        ```

### 3.3.3 具体代码

1. App相关

    - src/App.jsx

        ```jsx
        import React, {Component} from 'react';
        import './App.css'
        import Header from "./components/Header";
        import Footer from "./components/Footer";
        import List from "./components/List";

        
        export default class App extends Component {
            //初始化状态
            state = {
                todos: [
                    {id: '001', name: '吃饭', done: true},
                    {id: '002', name: '睡觉', done: true},
                    {id: '003', name: '打代码', done: false},
                    {id: '004', name: '逛街', done: true},
                ]
            }
        
            addTodo = (todoObj) => {
                const {todos} = this.state
                const newTodos = [todoObj, ...todos]
                this.setState({todos: newTodos})
            }
        
            updateTodo = (id, done) => {
                const {todos} = this.state
                const newTodos = todos.map((todoObj) => {
                    if (todoObj.id === id) {
                        return {...todoObj, done: done}
                    } else {
                        return todoObj
                    }
                })
        
                this.setState({todos: newTodos})
            }
        
            deleteTodo = (id) => {
                const {todos} = this.state
                const newTodos = todos.filter((todoObj) => {
                    return todoObj.id !== id
                })
                this.setState({todos: newTodos})
            }
        
            checkAllTodo = (done) => {
                const {todos} = this.state
                const newTodos = todos.map((todoObj) => {
                    return {...todoObj, done: done}
                })
                this.setState({todos: newTodos})
            }
        
            clearAllDone = () => {
                const {todos} = this.state
                const newTodos = todos.filter((todoObj) => {
                    return !todoObj.done
                })
                this.setState({todos: newTodos})
            }
        
            render() {
                const { todos } = this.state
                return (
                    <div className="todo-container">
                        <div className="todo-wrap">
                        
                            <Header addTodo={this.addTodo}></Header>
                            <List todos={todos} updateTodo={this.updateTodo} deleteTodo={this.deleteTodo}></List>
                            <Footer todos={todos}
                                    checkAllTodo={this.checkAllTodo}
                                    clearAllDone={this.clearAllDone}>
                            </Footer>
                        </div>
                    </div>
                );
            }
        }
        ```
    - src/App.css

        ```css
        /*base*/
        body {
            background: #fff;
        }
        
        .btn {
            display: inline-block;
            padding: 4px 12px;
            margin-bottom: 0;
            font-size: 14px;
            line-height: 20px;
            text-align: center;
            vertical-align: middle;
            cursor: pointer;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }
        
        .btn-danger {
            color: #fff;
            background-color: #da4f49;
            border: 1px solid #bd362f;
        }
        
        .btn-danger:hover {
            color: #fff;
            background-color: #bd362f;
        }
        
        .btn:focus {
            outline: none;
        }
        
        .todo-container {
            width: 600px;
            margin: 0 auto;
        }
        
        .todo-container .todo-wrap {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        ```
2. Footer相关

    - src/components/Footer/index.jsx

        ```jsx
        import React, {Component} from 'react';
        import './index.css'
        
        export default  class Footer extends Component {
            handleCheckAll = (event) => {
                this.props.checkAllTodo(event.target.checked)
            }
            handleClearAllDone = () => {
                this.props.clearAllDone()
            }
        
        
            render() {
                const {todos} = this.props
                const doneCount = todos.reduce((pre, current) => {
                    return pre + (current.done ? 1 : 0)
                }, 0)
                const total = todos.length
                return (
                    <div className="todo-footer">
                        <label>
                            <input type="checkbox" onChange={this.handleCheckAll}
                                checked={doneCount === total && total !== 0 ? true : false}/>
                        </label>
                        <span>
                            <span>已完成{doneCount}</span> / 全部{total}
                        </span>
                        <button onClick={this.handleClearAllDone} className="btn btn-danger">清除已完成任务</button>
                    </div>
                );
            }
        }

        ```
    - src/components/Footer/index.css

        ```css
        /*footer*/
        .todo-footer {
            height: 40px;
            line-height: 40px;
            padding-left: 6px;
            margin-top: 5px;
        }
        
        .todo-footer label {
            display: inline-block;
            margin-right: 20px;
            cursor: pointer;
        }
        
        .todo-footer label input {
            position: relative;
            top: -1px;
            vertical-align: middle;
            margin-right: 5px;
        }
        
        .todo-footer button {
            float: right;
            margin-top: 5px;
        }
        ```
3. Header相关

    - src/components/Header/index.jsx

        ```jsx
        import React, {Component} from 'react';
        import PropTypes from 'prop-types'
        import {nanoid} from "nanoid";
        import './index.css'
        
        export default class Header extends Component {
            static propTypes = {
                addTodo: PropTypes.func.isRequired
            }
        
            handleKeyUp = (event) => {
                const {keyCode, target} = event
                if (keyCode !== 13) return
                if (target.value.trim() === '') {
                    alert('输入不能为空')
                    return;
                }
                const todoObj = {id: nanoid(), name: target.value, done: false}
                this.props.addTodo(todoObj)
        
                target.value = ''
            }
        
            render() {
                return (
                    <div className="todo-header">
                        <input onKeyUp={this.handleKeyUp} type="text" placeholder="请输入你的任务名称，按回车键确认"/>
                    </div>
                );
            }
        }
        ```
    - src/components/Header/index.css

        ```css
        /*header*/
        .todo-header input {
            width: 560px;
            height: 28px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 4px 7px;
        }
        
        .todo-header input:focus {
            outline: none;
            border-color: rgba(82, 168, 236, 0.8);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
        }
        ```

4. List相关

    - src/components/List/index.jsx

        ```jsx
        import React, {Component} from 'react';
        import PropTypes from "prop-types";
        import Item from "../Item";
        import './index.css'
        
        export default class List extends Component {
            static propTypes = {
                todos: PropTypes.array.isRequired,
                updateTodo: PropTypes.func.isRequired,
                deleteTodo: PropTypes.func.isRequired
            }
        
            render() {
                const {todos, updateTodo, deleteTodo} = this.props
                return (
                    <ul className="todo-main">
                        {
                            todos.map((todo) => {
                                return <Item key={todo.id} {...todo} updateTodo={updateTodo} deleteTodo={deleteTodo}></Item>
                            })
                        }
                    </ul>
                );
            }
        }

        ```
    - src/components/List/index.css

        ```css
        /*main*/
        .todo-main {
            margin-left: 0px;
            border: 1px solid #ddd;
            border-radius: 2px;
            padding: 0px;
        }
        
        .todo-empty {
            height: 40px;
            line-height: 40px;
            border: 1px solid #ddd;
            border-radius: 2px;
            padding-left: 5px;
            margin-top: 10px;
        }
        ```

5. Item相关

    - src/components/Item/index.jsx

        ```jsx
        import React, {Component} from 'react';
        import './index.css'
        
        export default class Item extends Component {
            state = {mouse: false}
        
            handelMouse = (flag) => {
                return () => {
                    this.setState({mouse: flag})
                }
            }
        
            handleCheck = (id) => {
                return (event) => {
                    this.props.updateTodo(id, event.target.checked)
                }
            }
        
            handleDelete = (id) => {
                if (window.confirm('确定删除吗？')) {
                    this.props.deleteTodo(id)
                }
            }
        
            render() {
                const {id, name, done} = this.props
                const {mouse} = this.state
                return (
                    <li style={{backgroundColor: mouse ? '#ddd' : 'white'}} onMouseEnter={this.handelMouse(true)}
                        onMouseLeave={this.handelMouse(false)}>
                        <label>
                            <input type="checkbox" checked={done} onChange={this.handleCheck(id)}/>
                            <span>{name}</span>
                        </label>
                        <button onClick={() => {
                            this.handleDelete(id)
                        }}
                                className="btn btn-danger"
                                style={{display: mouse ? 'block' : 'none'}}>删除
                        </button>
                    </li>
                );
            }
        }
        ```
    - src/components/Item/index.css

        ```css
        /*main*/
        .todo-main {
            margin-left: 0px;
            border: 1px solid #ddd;
            border-radius: 2px;
            padding: 0px;
        }
        
        .todo-empty {
            height: 40px;
            line-height: 40px;
            border: 1px solid #ddd;
            border-radius: 2px;
            padding-left: 5px;
            margin-top: 10px;
        }
        ```